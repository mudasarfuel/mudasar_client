"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[428],{78428:(t,e,i)=>{i.r(e),i.d(e,{default:()=>v});var r=i(697),s=i(72791),n=i(28924),l=i(93213),d=i(93973),a=i(75985),c=i(59434),o=i(27152),m=i(37725),u=(i(74893),i(6001)),x=i(71099),h=i(80184);const j=(t,e)=>[{id:1,label:"Customer",type:"select",name:"customerId",options:e.map((t=>{var e;return{id:t._id,name:t.name,value:t._id,avatarUrl:"".concat(m.y,"/public/customers/images/").concat(t.pic),avatarAlt:"./img/avatarfile.png",salary:null===t||void 0===t||null===(e=t.balance)||void 0===e?void 0:e.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}})),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:4}},{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:4}},{id:4,label:"Filter",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}},{id:5,label:"Print",type:"button",btntype:"button",variant:"contained",btnFunc:t,color:"primary",grid:{xs:12,sm:2}}];function v(){var t,e,i,m,v,y;const p=(0,c.I0)(),g=(0,c.v9)((t=>t.reports.customerReports)),D=(0,c.v9)((t=>t.completeData.customers)),[b,S]=(0,s.useState)({customerId:"",startDate:"",endDate:""});(0,s.useEffect)((()=>(p((0,u.C6)()),()=>{p((0,x.HO)()),p((0,o.l4)())})),[p]);const N=null===g||void 0===g?void 0:g[0],f=null===N||void 0===N?void 0:N.customer,F=(null===N||void 0===N||null===(t=N.credits)||void 0===t?void 0:t.records)||[],C=(null===N||void 0===N||null===(e=N.credits)||void 0===e?void 0:e.grandTotal)||0,P=(null===N||void 0===N?void 0:N.lastAmount)||0,R=(null===N||void 0===N||null===(i=N.payments)||void 0===i?void 0:i.records)||[],A=(null===N||void 0===N||null===(m=N.payments)||void 0===m?void 0:m.grandTotal)||0,L=(null===N||void 0===N?void 0:N.advances)||[],T=(null===N||void 0===N||null===(v=N.advances)||void 0===v?void 0:v.grandTotal)||0,U=C+T,K=P+U-A;return(0,h.jsxs)(r.Z,{m:"0px 20px 20px 20px",children:[(0,h.jsx)(n.Z,{title:"Customer Reports",subTitle:"Generate Statement or Report",icon:(0,h.jsx)(l.Z,{})}),(0,h.jsx)(r.Z,{sx:{paddingLeft:3,paddingRight:3},children:(0,h.jsx)(d.Z,{inputs:j((async()=>{const{customerId:t,startDate:e,endDate:i}=b;if(!t&&!e&&!i)return(0,a.Am)("Please select date first",{type:"error"});const r={customerId:t,startDate:e||i,endDate:i||e};p((0,o.tU)(r))}),D),state:b,setState:S,submit:t=>{t.preventDefault();const{customerId:e,startDate:i,endDate:r}=b;if(!e)return(0,a.Am)("Please Select the Customer",{type:"error"});if(!i&&!r)return(0,a.Am)("Please select date first",{type:"error"});const s={customerId:e,startDate:i||r,endDate:r||i};p((0,o.lg)(s))}})}),N&&(0,h.jsx)("div",{className:"report-wrapper",children:(0,h.jsxs)("div",{className:"report-card",children:[(0,h.jsx)("h1",{className:"main-title",children:"Customer Statement"}),(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,h.jsxs)("h4",{children:["Customer Name: ",null===f||void 0===f?void 0:f.name]}),(0,h.jsxs)("h4",{children:["Current Credit:"," ",null===f||void 0===f||null===(y=f.balance)||void 0===y?void 0:y.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"section red",style:{marginTop:30},children:[(0,h.jsx)("h2",{className:"section-title",children:"Customer Credit"}),(0,h.jsxs)("table",{className:"styled-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Product Name"}),(0,h.jsx)("th",{children:"Description"}),(0,h.jsx)("th",{children:"Date"}),(0,h.jsx)("th",{children:"Amount"})]})}),(0,h.jsxs)("tbody",{children:[F.map(((t,e)=>{var i;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:t.productName}),(0,h.jsx)("td",{children:t.description}),(0,h.jsx)("td",{children:t.date}),(0,h.jsx)("td",{children:null===(i=t.amount)||void 0===i?void 0:i.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]},e)})),(0,h.jsxs)("tr",{className:"bold-row",children:[(0,h.jsx)("td",{colSpan:3,children:"Total Amount"}),(0,h.jsx)("td",{children:C.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),(0,h.jsxs)("div",{className:"section blue",children:[(0,h.jsx)("h2",{className:"section-title",children:"Advance - Debit"}),(0,h.jsxs)("table",{className:"styled-table full",style:{marginTop:"20px"},children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Date"}),(0,h.jsx)("th",{children:"Debit"}),(0,h.jsx)("th",{children:"Date"}),(0,h.jsx)("th",{children:"Advance"})]})}),(0,h.jsx)("tbody",{children:(()=>{const t=Math.max(R.length,L.length),e=[];for(let s=0;s<t;s++){var i,r;const t=R[s],n=L[s];e.push((0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(null===t||void 0===t?void 0:t.date)||"-"}),(0,h.jsx)("td",{children:(null===t||void 0===t||null===(i=t.payingAmount)||void 0===i?void 0:i.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||"-"}),(0,h.jsx)("td",{children:(null===n||void 0===n?void 0:n.date)||"-"}),(0,h.jsx)("td",{children:(null===n||void 0===n||null===(r=n.amount)||void 0===r?void 0:r.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||"-"})]},s))}return e.push((0,h.jsxs)("tr",{className:"bold-row",children:[(0,h.jsx)("td",{children:"Totals"}),(0,h.jsx)("td",{children:A.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}),(0,h.jsx)("td",{children:"Totals"}),(0,h.jsx)("td",{children:T.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]},"totals")),e})()})]})]}),(0,h.jsxs)("div",{className:"section green",children:[(0,h.jsx)("h2",{className:"section-title",children:"Summary"}),(0,h.jsx)("div",{className:"summary-box",children:(0,h.jsx)("table",{className:"styled-table",style:{maxWidth:"400px"},children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Credit"}),(0,h.jsx)("td",{children:C})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Advance"}),(0,h.jsx)("td",{children:T})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("strong",{children:"Total Credit"})}),(0,h.jsx)("td",{children:(0,h.jsx)("strong",{children:U})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("strong",{children:"Last Credit"})}),(0,h.jsx)("td",{children:(0,h.jsx)("strong",{children:P})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Debit"}),(0,h.jsx)("td",{children:A})]}),(0,h.jsxs)("tr",{className:"bold-row green-text",children:[(0,h.jsx)("td",{children:"Remaining"}),(0,h.jsx)("td",{children:K})]})]})})})]})]})})]})}}}]);
//# sourceMappingURL=428.4296ad51.chunk.js.map