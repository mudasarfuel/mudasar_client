"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[581],{84213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(697),r=a(72791),o=a(28924),n=a(66351),l=a(59434),i=a(19570),p=a(66807),c=a(82703),d=a(97246),u=a(75985),h=a(21701),g=a(79421),m=a(17568),D=a(99262),f=a(11436),x=a(80184);const S=()=>{const e=(0,l.I0)(),t=(0,l.v9)((e=>e.sales.data)),a=(0,l.v9)((e=>e.sales.current)),S=(0,l.v9)((e=>e.sales.totalRecord)),y=(0,l.v9)((e=>e.sales.errors)),[j,v]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),[A,I]=(0,r.useState)(!1),[P,w]=(0,r.useState)(null),[O,X]=(0,r.useState)(0),[F,R]=(0,r.useState)({field:"",operator:"",sort:-1}),[b,k]=(0,r.useState)({searchInput:"",startDate:"",endDate:""}),[C,L]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(void 0!==P&&!0===j||void 0!==P&&!0===E)&&e((0,m.OD)(P[0]))}),[P]),(0,r.useEffect)((()=>{const t={page:0,sort:F.sort};return e((0,m.X8)(t)),()=>{e((0,m.Lu)())}}),[]),(0,r.useEffect)((()=>{"date"===F.field?R({...F,operator:"inBetween"}):"inBetween"===F.operator&&R({...F,operator:"$regex"})}),[F.field]),(0,r.useEffect)((()=>{(null===y||void 0===y?void 0:y.length)>0&&y.forEach((e=>{(0,u.Am)(e.msg,{position:"top-right",type:"error"})}))}),[y]);const B=t.length>0?t.map((e=>({...e,product:e.items}))):[];return(0,x.jsxs)(s.Z,{m:"0px 20px 15px 20px",children:[(0,x.jsx)(o.Z,{icon:(0,x.jsx)(c.Z,{style:{marginRight:"10px"}}),title:"Sales",subTitle:"Manage Application Sales"}),(0,x.jsxs)(s.Z,{className:"mainCard",children:[(0,x.jsx)(D.Z,{openDetailsDialog:E,heading:0!==Object.keys(a).length?"Sales Detail of ".concat(a.customer.name):"Sale Details",inputs:0!==Object.keys(a).length&&a,icon:(0,x.jsx)(c.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>{Z(!1)}}),(0,x.jsx)(i.Z,{openDeleteDialog:A,setOpenDeleteDialog:I,handleOnDelete:()=>{e((0,m.pe)(P)),w(null)},heading:"DELETE SALE",color:"#ff0000",icon:(0,x.jsx)(p.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Sale?."}),(0,x.jsx)(d.Z,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:r}=b,{field:o,operator:n,sort:l}=F;let i={field:""===o?void 0:o,operator:n,sort:l,page:0,searchInput:r,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===o?""===a&&""===s?(0,u.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,m.X8)(i)),L(!C),X(0)):""===o?(e((0,m.X8)(i)),L(!C),X(0)):""!==o&&""===r?(0,u.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==o&&""!==r&&""===n?(0,u.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,m.X8)(i)),L(!C),X(0))},filters:F,setFilter:R,state:b,setState:k,openFiltersPanel:C,setOpenFiltersPanel:L,loadDataFunc:()=>{e((0,m.X8)({page:0,sort:-1}))},searchFiltersForm:f.s,searchInputForm:h.eK}),(0,x.jsx)(n.Z,{columns:(0,g.Q)(I,Z,v),rows:B,currentPage:O,totalRecords:S,selectedRowId:P,setSelectedRowId:w,handleOnPageChange:t=>{X(t);const{startDate:a,endDate:s,searchInput:r}=b,{field:o,operator:n,sort:l}=F;let i={field:""===o?"":o,operator:n,sort:l,page:t,searchInput:r,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===o?""===a&&""===s?(0,u.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,m.X8)(i)):""===o?e((0,m.X8)(i)):""!==o&&""===r?(0,u.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,m.X8)(i))}})]})]})}}}]);
//# sourceMappingURL=581.d9c24b32.chunk.js.map