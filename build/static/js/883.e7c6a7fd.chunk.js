"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[883],{15761:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(72791),i=a(66896),n=a(59434),l=a(80184);const r=()=>{const e=(0,n.v9)((e=>e.alerts)),{enqueueSnackbar:t}=(0,i.Ds)(),a=e=>{let{id:a,msg:i,type:n}=e;(0,s.useEffect)((()=>{t(i,{variant:n,preventDuplicate:!0,autoHideDuration:6e3,anchorOrigin:{horizontal:"right",vertical:"bottom"}},[a])}))};return e.length>0&&e.map(((e,t)=>(0,l.jsx)("div",{className:"alert",children:(0,l.jsx)(a,{id:e.id,msg:e.msg,type:e.type})},t)))}},43429:(e,t,a)=>{a.d(t,{Z:()=>p});a(72791);var s=a(85667),i=a(63658),n=a(41473),l=a(85947),r=a(20890),o=a(94294),d=a(40503),c=a(80184);function m(e){var t;return e&&(null===e||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))}const p=e=>{let{id:t,selected:a,handleRegister:p,setSelected:u,state:g,setState:h,title:x,color:y,image:f,price:j,feature:v}=e;return(0,c.jsxs)("div",{className:"card",style:{background:void 0!==a&&a.checked&&void 0!==a&&a.id===t&&"#303134"},onClick:"http://localhost:3000/signup"===window.location.href?()=>{u({checked:!0,id:t}),h({...g,packageId:t})}:void 0,children:[(0,c.jsx)(s.Z,{sx:{fontSize:"40px",color:"green",visibility:null!==a&&void 0!==a&&a.checked&&(null===a||void 0===a?void 0:a.id)===t?"visible":"hidden"}}),(0,c.jsxs)("div",{className:"top",children:[(0,c.jsx)(d.ZP,{src:f,size:"80",round:!0}),(0,c.jsx)("h4",{className:"title",children:m(x)})]}),(0,c.jsxs)("div",{className:"middle",children:[(0,c.jsxs)("h5",{className:"price ".concat(x),children:["Rs. ",j]}),(0,c.jsxs)("div",{className:"items",children:[Array.isArray(v)&&v.map((e=>(0,c.jsxs)("div",{className:"item",style:{display:"flex",justifyContent:"start"},children:[e.groupStatus?(0,c.jsx)(i.Z,{className:"icon positive"}):(0,c.jsx)(n.Z,{className:"icon negative"}),(0,c.jsx)(r.Z,{children:m(e.groupDescription?e.groupDescription.substr(0,25)+"...":"sales module")})]},e.id))),(0,c.jsx)("div",{className:"item",children:(0,c.jsxs)(o.Z,{variant:"contained",className:"button ".concat(x," "),style:{width:"100%",backgroundColor:y},onClick:()=>p(),children:[(0,c.jsx)(l.Z,{fontSize:"small"}),"Buy"]})})]})]})]})}},21008:(e,t,a)=>{a.d(t,{Z:()=>D});var s=a(72791),i=a(57689),n=a(98008),l=(a(42108),a(13400)),r=a(20890),o=a(93044),d=a(94294),c=a(11087),m=a(39086),p=a(36914),u=a(59310),g=a(5803),h=a(75811),x=a(697),y=a(31976),f=a(77865),j=a(80184);const v=[{id:1,title:"Dashboard",icon:(0,j.jsx)(u.Z,{style:{fontSize:"20px"}})},{id:2,title:"Profile",icon:(0,j.jsx)(g.Z,{style:{fontSize:"20px"}})},{id:3,title:"Logout",icon:(0,j.jsx)(h.Z,{style:{fontSize:"20px"}})}];function b(e){let{anchorElUser:t,setAnchorElUser:a}=e;const s=()=>{a(null)};return(0,j.jsx)(x.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},className:"dropdown",children:(0,j.jsx)(y.Z,{sx:{mt:"30px"},id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},className:"dropdownMenu",style:{marginLeft:"-20px"},open:Boolean(t),onClose:s,children:v.map((e=>(0,j.jsx)(f.Z,{onClick:s,children:(0,j.jsxs)("div",{style:{marginRight:"10px",color:"gray",display:"flex",alignItems:"center"},children:[e.icon,(0,j.jsx)(r.Z,{textAlign:"center",style:{fontSize:"14px",marginLeft:"10px"},children:e.title})]})},e.id)))})})}const D=()=>{const{darkMode:e,dispatch:t}=(0,s.useContext)(p.Z),{isAuthenticated:a,user:u}=(0,s.useContext)(m.Z),g=(0,i.TH)(),[h,x]=(0,s.useState)(null);return(0,j.jsx)("div",{className:"navbar",children:(0,j.jsxs)("div",{className:"wrapper",children:[(0,j.jsxs)("div",{className:"top",children:[(0,j.jsx)(l.Z,{className:"sidebarBtnOpen",children:(0,j.jsx)(n.Z,{})}),(0,j.jsx)(c.rU,{to:"/",style:{textDecoration:"none"},children:(0,j.jsx)(r.Z,{className:"brand",children:"Mudasar Fuel"})})]}),a?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"items",children:[(0,j.jsx)("div",{className:"item",children:(0,j.jsxs)(r.Z,{children:["Hello, ",u.name]})}),(0,j.jsx)(l.Z,{className:"item",onClick:e=>{x(e.currentTarget)},sx:{p:0},children:(0,j.jsx)(o.Z,{alt:"Remy Sharp",src:u.pic?"http://localhost:5000/public/users/images/".concat(u.pic):"./img/avatarfile.png"})}),(0,j.jsx)(b,{className:"profileMenu",anchorElUser:h,setAnchorElUser:x,BackdropProps:{invisible:!1}})]})}):(0,j.jsx)("div",{className:"items",children:"/"===g.pathname?(0,j.jsx)("div",{className:"item"}):(0,j.jsx)("div",{className:"item",children:(0,j.jsx)(c.rU,{to:"/",style:{textDecoration:"none"},children:(0,j.jsx)(d.Z,{variant:"outlined",style:{textTransform:"none"},size:"small",className:"navlinkBtn",children:"Login"})})})})]})})}},54177:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(30090),i=a(76006);const n=(e,t)=>{s.h.dispatch((0,i.V_)({msg:e,type:t}))}},5250:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ts});var s=a(72791),i=a(11087),n=a(57689),l=a(21008),r=a(59434),o=a(66379),d=a(90493),c=a(76278),m=a(57064),p=a(49900),u=a(56125),g=a(22885),h=a(81131),x=a(20890),y=a(89366),f=a(92167),j=a(46174),v=a(55200),b=a(56670),D=a(5092),S=a(80120),w=a(5803),A=a(63148),Z=a(10284),I=a(82703),N=a(16614),P=a(31980),C=a(56266),E=a(75057),R=a(93213),O=a(10494),F=a(31694),k=a(46507),T=a(75811),B=a(8254),z=a(39086),U=a(80184);const M=()=>{const{listItems:e}=(()=>{const e=(0,n.s0)(),{logout:t,user:a}=(0,s.useContext)(z.Z),i=()=>{t(),e("/")},l=[{id:0,label:"Dashboard",icon:(0,U.jsx)(y.Z,{className:"icon"}),url:"/",category:"MAIN"},{id:1,label:"Customer",icon:(0,U.jsx)(f.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",category:"ACCOUNTS",nested:[{itemId:1,label:"Customers",icon:(0,U.jsx)(f.Z,{className:"icon"}),url:"/customers"},{itemId:2,label:"Customer Balance",icon:(0,U.jsx)(j.Z,{className:"icon"}),url:"/customerpayments"}]},{id:2,label:"Supplier",icon:(0,U.jsx)(v.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",nested:[{itemId:1,label:"Suppliers",icon:(0,U.jsx)(v.Z,{className:"icon"}),url:"/suppliers"},{itemId:2,label:"Suppliers Balance",icon:(0,U.jsx)(b.Z,{className:"icon"}),url:"/supplierpayments"}]},{id:3,label:"Employee",icon:(0,U.jsx)(f.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",nested:[{itemId:1,label:"Employee",icon:(0,U.jsx)(D.Z,{className:"icon"}),url:"/employees"},{itemId:2,label:"Employee Salary",icon:(0,U.jsx)(S.Z,{className:"icon"}),url:"/employeesalary"},{itemId:3,label:"Employee Advances",icon:(0,U.jsx)(b.Z,{className:"icon"}),url:"/employeeadvances"}]},("web_admin"===a.access||"app_admin"===a.access)&&{id:4,label:"Cashier Record",icon:(0,U.jsx)(w.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",nested:[{itemId:1,label:"Sales Closing",icon:(0,U.jsx)(D.Z,{className:"icon"}),url:"/closing"},{itemId:2,label:"Total Closings",icon:(0,U.jsx)(S.Z,{className:"icon"}),url:"/allclosings"}]},{id:5,label:"Sale Closing",icon:(0,U.jsx)(A.Z,{className:"icon"}),category:"DATA ENTRY",url:"/closing"},{id:6,label:"POS",icon:(0,U.jsx)(Z.Z,{className:"icon"}),url:"/pos"},{id:7,label:"Sales",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/sales"},{id:8,label:"Settings",icon:(0,U.jsx)(N.Z,{className:"icon"}),category:"SYSTEM",setList:"TOGGLE_SETTINGS",nested:[{itemId:1,label:"Machines",icon:(0,U.jsx)(P.Z,{className:"icon"}),url:"/machines"},{itemId:2,label:"Readings",icon:(0,U.jsx)(A.Z,{className:"icon"}),url:"/readings"},{itemId:3,label:"Products",icon:(0,U.jsx)(C.Z,{className:"icon"}),url:"/products"},{itemId:4,label:"Price Management",icon:(0,U.jsx)(E.Z,{className:"icon"}),url:"/prices"},{itemId:5,label:"Users",icon:(0,U.jsx)(v.Z,{className:"icon"}),url:"/admin/users"}]},{id:9,label:"Reports",icon:(0,U.jsx)(R.Z,{className:"icon"}),setList:"TOGGLE_STOCK",nested:[{itemId:1,label:"Get Report",icon:(0,U.jsx)(R.Z,{className:"icon"}),url:"/reports"},{itemId:2,label:"Expenses",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/expenses"}]},{id:10,label:"Stock Management",icon:(0,U.jsx)(O.Z,{className:"icon"}),setList:"TOGGLE_STOCK",nested:[{itemId:1,label:"Stock List",icon:(0,U.jsx)(O.Z,{className:"icon"}),url:"/stocks"},{itemId:2,label:"Purchase Stock",icon:(0,U.jsx)(F.Z,{className:"icon"}),url:"/purchases"},{itemId:3,label:"Dip Records",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/dips"},{itemId:4,label:"Stock Wastage",icon:(0,U.jsx)(k.Z,{className:"icon"}),url:"/wastages"}]},{id:11,label:"Profile",icon:(0,U.jsx)(w.Z,{className:"icon"}),url:"/sales",category:"USER"},{id:12,label:"Logout",icon:(0,U.jsx)(T.Z,{className:"icon"}),clickFunc:i}],r=[{id:0,label:"Dashboard",icon:(0,U.jsx)(y.Z,{className:"icon"}),url:"/",category:"MAIN"},{id:1,label:"Customer",icon:(0,U.jsx)(f.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",category:"ACCOUNTS",nested:[{itemId:1,label:"Customers",icon:(0,U.jsx)(f.Z,{className:"icon"}),url:"/customers"},{itemId:2,label:"Customer Balance",icon:(0,U.jsx)(j.Z,{className:"icon"}),url:"/customerpayments"}]},{id:2,label:"Supplier",icon:(0,U.jsx)(v.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",nested:[{itemId:1,label:"Suppliers",icon:(0,U.jsx)(v.Z,{className:"icon"}),url:"/suppliers"},{itemId:2,label:"Suppliers Balance",icon:(0,U.jsx)(b.Z,{className:"icon"}),url:"/supplierpayments"}]},{id:3,label:"Employee",icon:(0,U.jsx)(f.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",nested:[{itemId:1,label:"Employee",icon:(0,U.jsx)(D.Z,{className:"icon"}),url:"/employees"},{itemId:2,label:"Employee Salary",icon:(0,U.jsx)(S.Z,{className:"icon"}),url:"/employeesalary"},{itemId:3,label:"Employee Advances",icon:(0,U.jsx)(b.Z,{className:"icon"}),url:"/employeeadvances"}]},{id:4,label:"Meter Reading",icon:(0,U.jsx)(A.Z,{className:"icon"}),category:"DATA ENTRY",url:"/meters"},{id:5,label:"POS",icon:(0,U.jsx)(Z.Z,{className:"icon"}),url:"/pos"},{id:6,label:"Sales",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/sales"},{id:7,label:"Settings",icon:(0,U.jsx)(N.Z,{className:"icon"}),category:"SYSTEM",setList:"TOGGLE_SETTINGS",nested:[{itemId:1,label:"Machines",icon:(0,U.jsx)(P.Z,{className:"icon"}),url:"/machines"},{itemId:2,label:"Readings",icon:(0,U.jsx)(A.Z,{className:"icon"}),url:"/readings"},{itemId:3,label:"Products",icon:(0,U.jsx)(C.Z,{className:"icon"}),url:"/products"},{itemId:4,label:"Price Management",icon:(0,U.jsx)(E.Z,{className:"icon"}),url:"/prices"},{itemId:5,label:"Users",icon:(0,U.jsx)(v.Z,{className:"icon"}),url:"/admin/users"}]},{id:8,label:"Reports",icon:(0,U.jsx)(R.Z,{className:"icon"}),setList:"TOGGLE_STOCK",nested:[{itemId:1,label:"Get Report",icon:(0,U.jsx)(R.Z,{className:"icon"}),url:"/reports"},{itemId:2,label:"Expenses",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/expenses"}]},{id:9,label:"Stock Management",icon:(0,U.jsx)(O.Z,{className:"icon"}),setList:"TOGGLE_STOCK",nested:[{itemId:1,label:"Stock List",icon:(0,U.jsx)(O.Z,{className:"icon"}),url:"/stocks"},{itemId:2,label:"Purchase Stock",icon:(0,U.jsx)(F.Z,{className:"icon"}),url:"/purchases"},{itemId:3,label:"Dip Records",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/dips"},{itemId:4,label:"Stock Wastage",icon:(0,U.jsx)(k.Z,{className:"icon"}),url:"/wastages"},{itemId:5,label:"Stock Testing",icon:(0,U.jsx)(B.Z,{className:"icon"}),url:"/features"}]},{id:10,label:"Profile",icon:(0,U.jsx)(w.Z,{className:"icon"}),url:"/sales",category:"USER"},{id:11,label:"Logout",icon:(0,U.jsx)(T.Z,{className:"icon"}),clickFunc:i}],o=[{id:0,label:"Dashboard",icon:(0,U.jsx)(y.Z,{className:"icon"}),url:"/",category:"MAIN"},{id:1,label:"Customer",icon:(0,U.jsx)(f.Z,{className:"icon"}),setList:"TOGGLE_CUSTOMER",category:"ACCOUNTS",nested:[{itemId:1,label:"Customers",icon:(0,U.jsx)(f.Z,{className:"icon"}),url:"/customers"},{itemId:2,label:"Customer Balance",icon:(0,U.jsx)(j.Z,{className:"icon"}),url:"/customerpayments"}]},{id:2,label:"Sale Closing",icon:(0,U.jsx)(A.Z,{className:"icon"}),category:"DATA ENTRY",url:"/closing"},{id:3,label:"POS",icon:(0,U.jsx)(Z.Z,{className:"icon"}),url:"/pos"},{itemId:13,label:"Expenses",icon:(0,U.jsx)(I.Z,{className:"icon"}),url:"/expenses"},{id:11,label:"Logout",icon:(0,U.jsx)(T.Z,{className:"icon"}),clickFunc:i}];return{listItems:"web_admin"===a.access&&l||"admin"===a.access&&r||"cashier"===a.access&&o}})(),t=(0,r.v9)((e=>e.sidebar));const a=e=>t.filter((t=>function(e,t){return e.id===t}(t,e))),l=(0,r.I0)();return(0,U.jsx)("div",{className:"sidebar",children:(0,U.jsx)("div",{className:"bottom",children:e.map((e=>(0,U.jsxs)(d.Z,{sx:{width:"15%",minWidth:210,padding:0},subheader:e.category&&(0,U.jsx)(x.Z,{className:"title",children:e.category}),className:"list",children:[e.url?(0,U.jsx)(i.rU,{to:e.url,style:{textDecoration:"none"},children:(0,U.jsxs)(c.Z,{onClick:()=>{e.setList?l((0,o.rh)({id:e.id})):e.clickFunc&&e.clickFunc()},className:"li",children:[(0,U.jsx)(m.Z,{className:"icon",children:e.icon}),(0,U.jsx)(p.Z,{primary:(0,U.jsx)(x.Z,{className:"text",children:e.label})}),e.setList&&a(e.id)[0].toggle?e.nested&&(0,U.jsx)(g.Z,{className:"chevron"}):e.nested&&(0,U.jsx)(h.Z,{className:"chevron"})]})}):(0,U.jsxs)(c.Z,{onClick:()=>{e.setList?l((0,o.rh)(e.id)):e.clickFunc&&e.clickFunc()},className:"li",children:[(0,U.jsx)(m.Z,{className:"icon",children:e.icon}),(0,U.jsx)(p.Z,{primary:(0,U.jsx)(x.Z,{className:"text",children:e.label})}),e.setList&&a(e.id)[0].toggle?e.nested&&(0,U.jsx)(g.Z,{className:"chevron"}):e.nested&&(0,U.jsx)(h.Z,{className:"chevron"})]}),e.nested&&e.nested.map((t=>(0,U.jsx)(u.Z,{in:a(e.id)[0].toggle,timeout:"auto",children:(0,U.jsx)(d.Z,{component:"div",disablePadding:!0,className:"nestedli",children:(0,U.jsx)(i.rU,{to:t.url,style:{textDecoration:"none"},children:(0,U.jsxs)(c.Z,{sx:{pl:2},children:[(0,U.jsx)(m.Z,{className:"icon",children:t.icon}),(0,U.jsx)(p.Z,{primary:(0,U.jsx)(x.Z,{className:"text",children:t.label})})]})})})},t.itemId)))]},e.id)))})})};var W=a(92868);const L=a.p+"static/media/petrolCane.f614d26be51a9379c94c.webp",_=a.p+"static/media/DieselCane.7615a3f16853e9dc69d6.jpg";var q=a(40503),G=a(37725);const $=e=>{let{type:t,data:a}=e;return(0,U.jsxs)("div",{className:"widget",style:{background:a.stock>0?"#b1f3b1":"#ffb4b4"},children:[(0,U.jsxs)("div",{className:"left",children:[(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,U.jsx)(q.ZP,{src:"mobile"!==a.product.type?"petrol"===a.product.type?L:_:""!==a.product.pic?"".concat(G.y,"/public/product/images/").concat(a.product.pic):"./img/avatarfile.png",round:!0,size:"30",style:{marginRight:"10px"}}),(0,U.jsx)("span",{className:"title",children:a.product.name})]}),(0,U.jsxs)("span",{className:"counter",children:["Qty.",(0,U.jsx)("span",{style:{color:a.stock>0?"green":"#ff0000"},children:a.stock})]}),(0,U.jsx)("span",{className:"link",children:a.link})]}),(0,U.jsxs)("div",{className:"right",children:[(0,U.jsxs)("div",{className:"percentage positive",children:["S.P Rs. ",a.price.newSellingPrice]}),(0,U.jsxs)("div",{className:"percentage positive",style:{color:"crimson"},children:["C.P Rs. ",a.price.costPrice]}),(0,U.jsx)(W.Z,{className:"icon",style:{color:"crimson",backgroundColor:"rgba(255, 0,0, 0.2)"}})]})]})};a(59391),a(1009);a(42108);var K=a(61889),Y=a(6001);const X=()=>{const{logout:e,user:t}=(0,s.useContext)(z.Z),a=(0,r.v9)((e=>e.completeData.stocks)),i=(0,r.I0)();return(0,s.useEffect)((()=>(i((0,Y.WU)()),()=>{i((0,Y.gP)())})),[]),console.log(a),(0,U.jsx)("div",{className:"dashboard",children:(0,U.jsxs)("div",{className:"dashboardContainer",children:[(0,U.jsx)("div",{className:"widgets",children:(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:a.map((e=>("Petrol"===e.product.name||"Diesel"===e.product.name)&&(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:3,children:(0,U.jsx)($,{type:"users",data:e})},e._id)))})}),(0,U.jsx)("div",{className:"charts",children:(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:a.map((e=>"Petrol"!==e.product.name&&"Diesel"!==e.product.name&&(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:3,children:(0,U.jsx)($,{type:"users",data:e})},e._id)))})})]})})};a(7075);var H=a(697),Q=a(34711),V=a(36314);const J=e=>{let{columns:t,footer:a,rows:s,totalRecords:i,selectedRowId:n,handleOnPageChange:l,currentPage:r,setSelectedRowId:o}=e;return(0,U.jsx)("div",{className:"datatable",children:(0,U.jsx)(Q._,{className:"dataGrid",rows:s,columns:t,pageSize:5,disableColumnFilter:!0,rowCount:i,paginationMode:"server",components:{NoRowsOverlay:()=>(0,U.jsx)(V.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:"No Record Available"}),Pagination:a?()=>null:void 0},page:r,onSelectionModelChange:e=>o(e),selectionModel:n?[n]:[],onPageChange:e=>{l(e)},rowsPerPageOptions:[5],checkboxSelection:!1,disableRowSelectionOnClick:!0})})};var ee=a(13967),te=a(94294),ae=a(11607);const se=e=>{let{title:t,subTitle:a,link:s,icon:n,dialog:l,btnIcon:r,setDialog:o,addBtnTitle:d,secondaryBtnTitle:c,secondaryBtnIcon:m,setSecondaryDialog:p,secondaryDialog:u}=e;const g=(0,ee.Z)(),h=(0,ae.J)(g.palette.mode);return(0,U.jsxs)(H.Z,{m:"0px 20px 30px 0px",p:"10px 20px 0 20px",style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",height:"80px",top:"0px",width:"100%",zIndex:2},bgcolor:g.palette.background.main,className:"header",children:[(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(x.Z,{style:{fontSize:"20px",display:"flex",alignItems:"center"},color:h.grey[200],fontWeight:"550",sx:{mt:"10px"},children:[n,t]}),(0,U.jsx)(x.Z,{style:{fontSize:"16px"},color:h.grey[400],children:a})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",flexDirection:"column"},children:[o&&(0,U.jsxs)(te.Z,{sx:{mb:1,mt:1},color:"primary",onClick:()=>o(!l),component:i.rU,to:s,variant:"contained",children:[r&&r," ",d]}),c&&(0,U.jsxs)(te.Z,{color:"success",onClick:()=>p(!u),component:i.rU,to:s,variant:"contained",children:[m," ",c]}),s!==window.location.pathname&&s&&(0,U.jsx)(te.Z,{color:"primary",component:i.rU,to:s,variant:"contained",children:"Add New"})]})]})};var ie=a(38820),ne=a(5397),le=a(81918),re=a(13400);const oe=[{field:"id",headerName:"ID",width:70},{field:"feature",headerName:"Feature Name",width:250},{field:"description",headerName:"Description",width:250},{field:"status",headerName:"Status",width:150,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})}],de=e=>[{field:"ownerName",headerName:"Owner Name",sortable:!1,width:200,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.logo?"http://localhost:5000/public/tenants/images/".concat(e.row.logo):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.ownerName]})},{field:"email",headerName:"Email",width:200,sortable:!1},{field:"tenantName",headerName:"Company Name",width:200,sortable:!1},{field:"contact",headerName:"Contact",width:200,sortable:!1},{field:"address",headerName:"Address",width:200,sortable:!1},{field:"action",headerName:"Action",sortable:!1,width:100,renderCell:t=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(i.rU,{to:"/tenants/update/".concat(t.row.id),style:{textDecoration:"none"},children:(0,U.jsx)(re.Z,{className:"viewButton",children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})})}),(0,U.jsx)(re.Z,{onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],ce=[{field:"id",headerName:"ID",width:70},{field:"plan",headerName:"Plan",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.image,alt:"",className:"cellImg"}),e.row.plan]})},{field:"price",headerName:"Price",width:70},{field:"features",headerName:"Features",width:200,renderCell:e=>(0,U.jsx)("div",{className:"cellAction features",children:(0,U.jsx)(le.Z,{label:"Features",size:"small"})})},{field:"status",headerName:"Status",width:160,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})}],me=[{id:1,plan:"Blackberry",img:"img/blackberry.png",price:"$5",features:"Read, Add, Update, Delete",status:"active"},{id:2,plan:"Orange",price:"$10",img:"img/orange.png",status:"active"},{id:3,plan:"Cherry",price:"$15",img:"img/cherry3.jpg",status:"active"}];function pe(){return(0,U.jsxs)(H.Z,{m:"0px 20px 20px 20px",children:[(0,U.jsx)(se,{title:"SUBSCRIPTION",subTitle:"Managing the Subscription Plans"}),(0,U.jsx)(J,{columns:ce,rows:me})]})}var ue=a(27391),ge=a(79012),he=a(85523),xe=a(89891),ye=a(68096),fe=a(30829),je=a(58406),ve=a(77865);function be(e){let{inputs:t,state:a,setState:i,submit:n,submitBtn:l}=e;const r=e=>{i({...a,[e.target.name]:e.target.value})};(0,s.useEffect)((()=>{let e={};t.forEach((t=>{e[t.name]=""})),i(e)}),[t,i]);return(0,U.jsx)("form",{onSubmit:n,style:{display:"flex",paddingLeft:"20px",paddingRight:"20px"},children:(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:t.map((e=>(e=>{switch(e.type){case"text":case"number":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ue.Z,{label:e.label,id:"outlined-size-small",size:"small",style:{minWidth:"100%"},onChange:r,name:e.name,value:a[e.name]})},e.id);case"switch":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ge.Z,{children:(0,U.jsx)(he.Z,{control:(0,U.jsx)(xe.Z,{defaultChecked:!0}),disabled:!1,name:e.name,onChange:r,label:e.label})})},e.id);case"select":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsxs)(ye.Z,{style:{minWidth:"100%"},size:"small",children:[(0,U.jsx)(fe.Z,{id:"demo-simple-select-label",children:e.label}),(0,U.jsx)(je.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",style:{minWidth:e.minWidth,paddingTop:"-10px"},value:""!==a?a[e.name]:"",label:e.label,name:e.name,size:e.size,onChange:r,children:e.options&&e.options.map((e=>(0,U.jsx)(ve.Z,{value:e.value,children:e.name},e.id)))})]})},e.id);default:return(0,U.jsx)("div",{className:"formInput",children:(0,U.jsx)(ue.Z,{label:e.label,id:"outlined-size-small",size:"small"})},e.id)}})(e)))})})}const De=[{id:1,label:"Name",type:"text",name:"name"},{id:2,label:"Desciption",type:"text",name:"description"},{id:3,label:"Status",type:"select",name:"status",size:"small",minWidth:"100%",options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]}],Se=(e,t)=>[{id:1,label:"Select Group",type:"select",name:"selectgroup",class:"group",size:"small",options:null===t||void 0===t?void 0:t.map((e=>({id:e.id,name:e.groupTitle,value:e.id}))),grid:{xs:12,sm:4}},{id:2,label:"Select Feature",type:"select",name:"selectfeature",size:"small",minWidth:"100wh",options:e.map((e=>({id:e.id,name:e.feature,value:e.id}))),grid:{xs:12,sm:5}},{id:3,label:"Add Feature",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:3}}],we=(e,t)=>[{id:1,label:"Owner Name",type:"text",name:"ownerName",grid:{xs:12,sm:6,md:6,lg:4}},{id:2,label:"Username",type:"text",name:"username",grid:{xs:12,sm:6,md:6,lg:4}},{id:3,label:"Phone",type:"phone",name:"phone",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4}},{id:4,label:"Email",type:"email",name:"email",grid:{xs:12,sm:6}},{id:5,label:"Company Name",type:"text",name:"tenantName",grid:{xs:12,sm:6}},{id:6,label:"Select Package",type:"select",name:"packageId",size:"small",minWidth:"100wh",options:t&&t.map((e=>({id:e._id,name:"".concat(e.name," ( Price: ").concat(e.price," - Months: ").concat(e.expiresInMonths," )"),value:e._id}))),grid:{xs:12,sm:6,md:4,lg:4}},{id:7,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:4,lg:4}},{id:8,label:"Status",type:"select",name:"status",size:"small",minWidth:"100wh",options:[{id:1,name:"Active",value:"active"},{id:2,name:"De-Active",value:"deactive"}],grid:{xs:12,sm:6,md:4,lg:4}},{id:9,label:"Address",type:"text",name:"address",grid:{xs:12,sm:12,md:12,lg:6}},{id:10,label:"Password",type:"password",name:"password",grid:{xs:12,sm:6,md:3,lg:3}},{id:11,label:"Confirm Password",type:"password",name:"confirmPassword",grid:{xs:12,sm:6,md:3,lg:3}},{id:12,label:e,type:"button",btntype:"submit",variant:"contained",color:"secondary",grid:{xs:12,sm:12}}],Ae=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Owner Name",value:"ownerName"},{id:2,name:"Username",value:"username"},{id:3,name:"Email",value:"email"},{id:4,name:"Company Name",value:"tenantName"},{id:5,name:"Contact",value:"contact"},{id:6,name:"Address",value:"address"},{id:7,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],Ze=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}],Ie=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}];var Ne=a(83645),Pe=a(91826);function Ce(){const e=(0,r.I0)(),t=(0,r.v9)((e=>e.features)),a=(0,s.useContext)(Ne.Z),{setAlert:i}=a,[n,l]=(0,s.useState)(""),{name:o,description:d,status:c}=n;(0,s.useEffect)((()=>(e((0,Pe.N$)()),()=>{e((0,Pe.nl)())})),[]);return(0,U.jsxs)(H.Z,{m:"0px 20px 20px 20px",children:[(0,U.jsx)(se,{title:"FEATURES",subTitle:"Managing Application Features",link:"/features"}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(be,{inputs:De,state:n,setState:l,submitBtn:"Add Feature",submit:async t=>{if(t.preventDefault(),""==o)i("Please enter name","error");else if(""==d)i("Please enter description","error");else if(""==c)i("Please select status","error");else{var a;const t=await e((0,Pe.TN)(n));1==(null===(a=t.payload)||void 0===a?void 0:a.success)&&(i(t.payload.msg,"success"),l(""))}}}),(0,U.jsx)(J,{columns:oe,rows:t,deleteItem:async t=>{const a=await e((0,Pe.S0)(t));1==a.payload.success&&i(a.payload.msg,"success")}})]})]})}function Ee(){return(0,U.jsxs)(H.Z,{m:"0px 20px 20px 20px",children:[(0,U.jsx)(se,{title:"FEATURES",subTitle:"Managing Application Features"}),(0,U.jsx)(be,{inputs:De})]})}var Re=a(54177),Oe=a(94634);const Fe=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.packages.data));(0,s.useEffect)((()=>(e((0,Oe.EV)()),()=>{e((0,Oe.UA)())})),[]);return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{title:"PACKAGES",subTitle:"Manage Application Packages",link:"/packages/new"}),(0,U.jsx)(H.Z,{className:"mainCard",children:(0,U.jsx)(J,{columns:(a=async t=>{const a=await e((0,Oe.uu)(t));!0===a.payload.success&&(0,Re.Z)(a.payload.msg,"error")},[{field:"id",headerName:"ID",width:70},{field:"name",headerName:"Plan",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.image,alt:"",className:"cellImg"}),e.row.name]})},{field:"price",headerName:"Price",width:70},{field:"features",headerName:"Features",width:200,renderCell:e=>(0,U.jsx)("div",{className:"cellAction features",children:(0,U.jsx)(le.Z,{label:"Features",size:"small"})})},{field:"status",headerName:"Status",width:160,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:200,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(i.rU,{to:"/packages/update/".concat(e.row.id),style:{textDecoration:"none"},children:(0,U.jsx)(re.Z,{className:"viewButton",children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})})}),(0,U.jsx)(re.Z,{onClick:()=>a(e.row.id),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}]),rows:t})})]});var a};var ke=a(17133),Te=a(88970),Be=a(61419);const ze=e=>{let{file:t,setFile:a}=e;return(0,U.jsx)("div",{children:(0,U.jsx)("input",{type:"file",onChange:e=>{a(e.target.files[0])},className:"fileInput"})})};var Ue=a(7175);const Me=e=>{let{value:t,handleColorChange:a}=e;return(0,U.jsx)(Ue.O,{format:"hex",style:{width:"100%"},value:t,onChange:a})};var We=a(3710),Le=a(29569);const _e=e=>{let{label:t,onChange:a,name:i,type:n,state:l}=e;const[r,o]=(0,s.useState)(!1),d=()=>{o(!r)};return(0,U.jsxs)("div",{style:{position:"relative"},children:[(0,U.jsx)(ue.Z,{label:t,size:"small",style:{minWidth:"100%"},onChange:a,name:i,type:r?"text":n,value:l[i]}),r?(0,U.jsx)(We.Z,{onClick:()=>d(),style:{position:"absolute",right:"15",top:"8"}}):(0,U.jsx)(Le.Z,{onClick:()=>d(),style:{position:"absolute",right:"15",top:"8"}})]})};var qe=a(99801),Ge=a(71652),$e=a(24750),Ke=a(75737),Ye=a.n(Ke);a(98404);const Xe=e=>{let{state:t,setState:a}=e;return(0,U.jsx)(Ye(),{name:"Contact Number",country:"pk",masks:{pk:"...-......."},placeholder:"+92 300-1234567",value:t.contact,onChange:e=>a({...t,contact:e})})};var He=a(97892),Qe=a.n(He);function Ve(e){let{formTitle:t,inputs:a,file:s,setFile:n,state:l,setState:r,submit:o}=e;const d=e=>{r({...l,[e.target.name]:e.target.value})},c=e=>{r({...l,color:e})};return(0,U.jsxs)("form",{className:"form",onSubmit:o,children:[(0,U.jsx)("div",{style:{marginBottom:"10px",marginTop:"10px"},children:(0,U.jsx)(x.Z,{children:t})}),(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:a.map((e=>(e=>{switch(e.type){case"text":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ue.Z,{label:e.label,size:"small",tabIndex:e.tabIndex,disabled:e.disabled,type:e.type,name:e.name,spellCheck:!1,value:""!==l?l[e.name]:"",onChange:d,style:{width:"100%"}})},e.id);case"number":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ue.Z,{label:e.label,size:"small",type:e.type,tabIndex:e.tabIndex,name:e.name,value:""!==l?l[e.name]:"",onChange:d,style:{width:"100%"}})},e.id);case"switch":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:(0,U.jsx)(he.Z,{control:(0,U.jsx)(xe.Z,{}),disabled:e.disability,name:e.name,tabIndex:e.tabIndex,label:e.label,onChange:t=>r({...l,[e.name]:t.target.checked})})},e.id);case"button":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:e.link?(0,U.jsx)(te.Z,{tabIndex:e.tabIndex,type:"".concat(e.btntype),color:"".concat(e.color),variant:e.variant,component:i.rU,to:e.link,style:{width:"100%"},children:e.label}):e.btnFunc?(0,U.jsx)(te.Z,{tabIndex:e.tabIndex,type:"button",color:"".concat(e.color),variant:e.variant,onClick:()=>e.btnFunc(),style:{width:"100%"},children:e.label}):(0,U.jsx)(te.Z,{tabIndex:e.tabIndex,type:"".concat(e.btntype),color:"".concat(e.color),variant:e.variant,style:{width:"100%"},children:e.label})},e.id);case"select":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsxs)(ye.Z,{style:{width:"100%"},size:"small",children:[(0,U.jsx)(fe.Z,{id:"demo-simple-select-label",children:e.label}),(0,U.jsx)(je.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:""!==l&&void 0!==l[e.name]?l[e.name]:"",label:e.label,tabIndex:e.tabIndex,name:e.name,size:e.size,onChange:d,MenuProps:{PaperProps:{style:{maxHeight:200,overflowY:"auto"}}},renderValue:t=>{const a=e.options.find((e=>e.value===t));return a?(0,U.jsxs)(H.Z,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px"},children:[(0,U.jsxs)(H.Z,{style:{display:"flex",alignItems:"center",flex:1},children:[a.avatarUrl&&(0,U.jsx)(q.ZP,{src:a.avatarUrl,round:!0,size:"30",style:{marginRight:"10px"}}),a.name]}),(0,U.jsx)(H.Z,{style:{textAlign:"center",flex:1},children:a.amount?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{children:"".concat(a.amount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))}),(0,U.jsx)("div",{children:"".concat(a.remAdv.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))})]}):a.salary?"".concat(a.salary.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})):null}),(0,U.jsx)(H.Z,{style:{textAlign:"right",flex:1},children:a.designation?"( ".concat(a.designation," )"):a.date?"( ".concat(a.date," )"):null})]}):""},children:e.options&&e.options.map((e=>e&&(0,U.jsxs)(ve.Z,{value:e.value,style:{display:"flex",justifyContent:"space-between",justifyItems:"center"},children:[(0,U.jsxs)(H.Z,{style:{flex:2},children:[e.avatarUrl&&(0,U.jsx)(q.ZP,{src:e.avatarUrl?e.avatarUrl:e.avatarAlt,round:!0,size:"30",style:{marginRight:10}}),e.name]}),e.amount?(0,U.jsxs)(H.Z,{style:{flex:1},children:[(0,U.jsx)(H.Z,{children:"".concat(e.amount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))}),"".concat(e.remAdv.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))]}):e.salary?(0,U.jsx)(H.Z,{style:{flex:1},children:"".concat(e.salary.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))}):null,e.designation?(0,U.jsx)(H.Z,{style:{flex:1},children:"( "+e.designation+" )"}):e.date?(0,U.jsx)(H.Z,{style:{flex:1},children:"( "+e.date+" )"}):null]},e.id)))})]})},e.id);case"colorInput":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:(0,U.jsx)(Me,{value:l.color,handleColorChange:c})},e.id);case"file":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ze,{file:s,setFile:n})},e.id);case"email":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(ue.Z,{label:e.label,size:"small",tabIndex:e.tabIndex,style:{minWidth:"100%"},spellCheck:!1,onChange:d,name:e.name,value:l[e.name]})},e.id);case"password":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(_e,{label:e.label,onChange:d,name:e.name,type:e.type,state:l})},e.id);case"phone":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsx)(Xe,{state:l,setState:r})},e.id);case"date":return(0,U.jsxs)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:[console.log("Name => ",e.name,"value => ",l[e.name]),(0,U.jsx)(Ge._,{dateAdapter:$e.y,children:(0,U.jsx)(qe.M,{label:e.label,name:e.name,format:"DD-MM-YYYY",tabIndex:e.tabIndex,value:""!==l[e.name]?Qe()(l[e.name],"DD-MM-YYYY"):null,slotProps:{textField:{size:"small",fullWidth:!0,error:!1}},onChange:t=>r({...l,[e.name]:Qe()(t.$d).format("DD-MM-YYYY")})})})]},e.id);case"month":return(0,U.jsxs)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:[console.log("Name => ",e.name,"Value => ",l[e.name]),(0,U.jsx)(Ge._,{dateAdapter:$e.y,children:(0,U.jsx)(qe.M,{label:e.label,views:["month"],name:e.name,value:""!==l[e.name]?Qe()(l[e.name],"MMM"):"",slotProps:{textField:{size:"small",fullWidth:!0,error:!1}},onChange:t=>{const a=t?t.format("MMM"):null;r({...l,[e.name]:a}),console.log(t?t.format("MMM"):Qe()().format("MMM"))},format:"MMM"})})]},e.id);case"radio":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:(0,U.jsxs)(ye.Z,{children:[(0,U.jsx)(ke.Z,{id:"demo-radio-buttons-group-label",children:e.label}),(0,U.jsx)(Te.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:e.name,children:e.options.map((e=>e&&(0,U.jsx)(he.Z,{value:e.value,control:(0,U.jsx)(Be.Z,{}),label:e.name},e.id)))})]})},e.id);default:return}})(e)))})]})}var Je=a(43429),et=a(74569),tt=a.n(et);const at=async e=>{try{return await tt().post("http://localhost:5000/api/uploads",e).then((e=>e.data))}catch(t){return t.response.data}};var st=a(54261),it=a(97893);const nt=e=>{let{heading:t,groups:a,deleteGroup:s,deleteFeature:i,features:n,dbfeatures:l}=e;const r=e=>{var t;return null===(t=l.filter((t=>t.id===e))[0])||void 0===t?void 0:t.feature};return(0,U.jsxs)("div",{className:"card",style:{marginTop:"15px"},children:[(0,U.jsx)(x.Z,{children:t||""}),Array.isArray(a)&&a.map((e=>(0,U.jsxs)("div",{children:[(0,U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,U.jsx)(x.Z,{children:e.groupTitle}),(0,U.jsx)(it.Z,{onClick:()=>s(e.id),sx:{fontSize:20,color:"#9c9c9c"}})]}),(0,U.jsx)("div",{style:{display:"flex",gap:"5px",paddingTop:"10px",flexWrap:"wrap"},children:Array.isArray(n)&&n.filter((t=>t.group===e.id)).map((e=>(0,U.jsx)("div",{children:(0,U.jsx)(le.Z,{label:"".concat(r(e.id)),size:"small",onDelete:()=>i(e.id)})},e.id)))})]},e.id)))]})},lt=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.features)),a=(0,r.v9)((e=>e.packages.current)),{id:i}=(0,n.UO)();(0,s.useEffect)((()=>{void 0!==i&&0!==Object.keys(a).length?o({...a}):o({name:"",description:"",price:"",expiresInMonths:"",group:[],features:[],color:"",image:"",status:""})}),[a]),(0,s.useEffect)((()=>(void 0!==i&&e((0,Oe.UP)(i)),e((0,Pe.N$)()),()=>{e((0,Pe.nl)()),e((0,Oe.UA)())})),[i]);const[l,o]=(0,s.useState)({name:"",description:"",price:"",expiresInMonths:"",group:[],features:[],color:"",image:"",status:""}),d=st.Z,[c,m]=(0,s.useState)({id:d(),groupTitle:"",groupDescription:"",groupStatus:""}),[p,u]=(0,s.useState)({selectgroup:"",selectfeature:""}),[g,h]=(0,s.useState)(""),x=async()=>{const t=await at(function(e){const t=new FormData;return t.append("file",e),t}(g));if(!0===(null===t||void 0===t?void 0:t.success)){const a={...l};a.image=t.filename,o(a);const s=async()=>{if(void 0!==i){const t={id:i,Data:a};return e((0,Oe.$y)(t))}return e((0,Oe.$5)(a))},n=await s();!0===n.payload.success?((0,Re.Z)(n.payload.msg,"success"),void 0===i&&o({name:"",description:"",price:"",expiresInMonths:"",group:[],features:[],color:"",image:"",status:""}),h("")):(0,Re.Z)(n.payload.msg,"error")}else!1===t.success&&(0,Re.Z)(t.msg,"error")};return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{title:"PACKAGES",subTitle:"Managing Application Packages",link:"/packages/new"}),(0,U.jsx)(H.Z,{className:"mainCard",children:(0,U.jsxs)(K.ZP,{container:!0,spacing:2,children:[(0,U.jsxs)(K.ZP,{item:!0,xs:12,sm:4,children:[(0,U.jsx)(Je.Z,{style:{marginTop:"10px"},title:null===l||void 0===l?void 0:l.name,color:null===l||void 0===l?void 0:l.color,price:null===l||void 0===l?void 0:l.price,feature:null===l||void 0===l?void 0:l.group,image:g?URL.createObjectURL(g):null!==l&&void 0!==l&&l.image?"http://localhost:5000/public/packages/images/".concat(l.image):"/img/file_upload.png"}),(0,U.jsx)(nt,{heading:"Features",deleteGroup:e=>{const t=l.group.filter((t=>t.id!==e)),a=l.features.filter((t=>t.group!==e));o({...l,features:a,group:t})},deleteFeature:e=>{const t=l.features.filter((t=>t.id!==e));o({...l,features:t})},groups:null===l||void 0===l?void 0:l.group,features:null===l||void 0===l?void 0:l.features,dbfeatures:t})]}),(0,U.jsxs)(K.ZP,{item:!0,xs:12,sm:8,children:[(0,U.jsx)(Ve,{formTitle:"".concat(void 0===i?"Add Package Group Form":"Update Package Group Form"),submit:e=>{e.preventDefault(),""===c.groupTitle?(0,Re.Z)("Please enter group name","error"):""===c.groupDescription?(0,Re.Z)("Please enter group description","error"):""===c.groupStatus?(0,Re.Z)("Please select group status","error"):(l.group.push(c),(0,Re.Z)("Group Added successfully","success"),m({id:d(),groupTitle:"",groupDescription:"",groupStatus:""}))},inputs:[{id:1,label:"Group Title",type:"text",name:"groupTitle",grid:{xs:12,sm:6}},{id:2,label:"Group Status",type:"select",name:"groupStatus",size:"small",minWidth:"100wh",options:[{id:1,name:"Active",value:!0},{id:2,name:"De-Active",value:!1}],grid:{xs:12,sm:6}},{id:3,label:"Group Description",type:"text",name:"groupDescription",grid:{xs:12,sm:9}},{id:4,label:"Add Group",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:3}}],state:c,setState:m}),(0,U.jsx)(Ve,{formTitle:"".concat(void 0===i?"Add Package Feature Form":"Update Package Feature Form"),submit:e=>{if(e.preventDefault(),""===p.selectgroup)(0,Re.Z)("Please select group","error");else if(""===p.selectfeature)(0,Re.Z)("Please select feature","error");else{const e={id:p.selectfeature,group:p.selectgroup};l.features.push(e),(0,Re.Z)("Feature added successfully","success"),u({selectgroup:"",selectfeature:""})}},state:p,setState:u,inputs:Se(t,l.group)}),(0,U.jsx)(Ve,{formTitle:"".concat(void 0===i?"Add Package Form":"Update Package Form"),inputs:(y=void 0===i?"Add Package":"Update Package",[{id:1,type:"file",grid:{xs:12,sm:12}},{id:2,label:"Name",type:"text",name:"name",grid:{xs:12,sm:6}},{id:3,label:"Price",type:"number",name:"price",grid:{xs:12,sm:6}},{id:4,label:"Desciption",type:"text",name:"description",grid:{xs:12,sm:8}},{id:5,label:"Expires in months",type:"number",name:"expiresInMonths",grid:{xs:12,sm:4}},{id:6,label:"Status",type:"select",name:"status",size:"small",minWidth:"100wh",options:[{id:1,name:"Active",value:"active"},{id:2,name:"De-Active",value:"deactive"}],grid:{xs:12,sm:6}},{id:7,type:"colorInput",grid:{xs:12,sm:6}},{id:8,label:y,type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12}}]),file:g,setFile:h,state:l,setState:o,submit:e=>{e.preventDefault();const{name:t,description:a,price:s,expiresInMonths:i,group:n,features:r,status:o}=l;""===t?(0,Re.Z)("Please enter package name","error"):""===a?(0,Re.Z)("Please enter package description","error"):""===s?(0,Re.Z)("Please enter package price","error"):""===i?(0,Re.Z)("Please enter total months for expiration","error"):0===n.length?(0,Re.Z)("Please add features group","error"):0===r.length?(0,Re.Z)("Add features in group","error"):""===o?(0,Re.Z)("Please select status for package","error"):x()}})]})]})})]});var y};var rt=a(15761),ot=a(95113),dt=a(5574),ct=a(97123),mt=a(39157),pt=a(51691),ut=a(65661);const gt=e=>{let{openDeleteDialog:t,setConfirmInput:a,handleOnDelete:s,setOpenDeleteDialog:i,confirmInput:n,heading:l,icon:r,color:o,message:d}=e;return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:()=>i(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:o,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"800"},children:[r,l]}),(0,U.jsxs)(mt.Z,{children:[(0,U.jsx)(pt.Z,{id:"alert-dialog-description",children:d}),a&&(0,U.jsx)(ue.Z,{label:"Enter Email",id:"outlined-size-small",size:"small",type:"text",name:"confirmInput",value:n,onChange:e=>a(e.target.value),style:{width:"100%",marginTop:"20px"}})]}),(0,U.jsxs)(ct.Z,{style:{marginRight:"18px",marginBottom:"15px"},children:[(0,U.jsx)(te.Z,{variant:"outlined",onClick:()=>i(!1),children:"Cancel"}),(0,U.jsx)(te.Z,{variant:"outlined",onClick:()=>{s(),i(!1)},autoFocus:!0,children:"Confirm"})]})]})})};var ht=a(66807),xt=a(84642),yt=a(21799);const ft=e=>{let{formTitle:t,inputs:a,filters:s,setFilter:i}=e;const n=e=>{i({...s,[e.target.name]:e.target.value})};return(0,U.jsxs)("form",{className:"form",children:[(0,U.jsx)("div",{style:{marginBottom:"10px",marginTop:"10px"},children:(0,U.jsx)(x.Z,{children:t})}),(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:a.map((e=>(e=>{switch(e.type){case"switch":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:(0,U.jsx)(ge.Z,{children:(0,U.jsx)(he.Z,{control:(0,U.jsx)(xe.Z,{checked:s[e.name]}),disabled:e.disability,name:e.name,label:e.label,onChange:t=>i({...s,[e.name]:t.target.checked})})})},e.id);case"button":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,children:(0,U.jsx)(te.Z,{type:"".concat(e.btntype),color:"".concat(e.color),variant:e.variant,style:{width:"100%"},children:e.label})},e.id);case"select":return(0,U.jsx)(K.ZP,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,children:(0,U.jsxs)(ye.Z,{style:{width:"100%"},size:"small",children:[(0,U.jsx)(fe.Z,{id:"demo-simple-select-label",children:e.label}),(0,U.jsx)(je.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",style:{minWidth:e.minWidth,paddingTop:"-10px",width:"100%"},value:""!==s&&void 0!==s[e.name]?s[e.name]:"",label:e.label,name:e.name,size:e.size,onChange:n,children:e.options&&e.options.map((e=>e&&(0,U.jsx)(ve.Z,{value:e.value,children:e.name},e.id)))})]})},e.id);default:return}})(e)))})]})},jt=e=>{let{filters:t,submit:a,setFilter:s,state:i,setState:n,loadDataFunc:l,openFiltersPanel:r,setOpenFiltersPanel:o,searchFiltersForm:d,searchInputForm:c}=e;return(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,U.jsxs)(H.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,U.jsx)(re.Z,{onClick:e=>{e.preventDefault(),o(!r)},children:(0,U.jsx)(xt.Z,{})}),(0,U.jsx)(x.Z,{children:"Filter"})]}),""!==t.field&&(0,U.jsxs)(H.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,U.jsx)(re.Z,{onClick:()=>{s({...t,field:"",operator:"",sort:-1}),n({searchInput:"",startDate:"",endDate:""}),o(r?!r:r),l()},children:(0,U.jsx)(yt.Z,{})}),(0,U.jsx)(x.Z,{children:"Clear Filters"})]})]}),(0,U.jsxs)(H.Z,{className:r?"searchArea searchAreaActive":"searchArea",children:[(0,U.jsx)(ft,{inputs:d(t),filters:t,setFilter:s}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(Ve,{inputs:c(t),submit:a,state:i,setState:n})})]})]})};var vt=a(75985);const bt=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.tenants.data)),a=(0,r.v9)((e=>e.tenants.totalRecord)),[i,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(""),[m,p]=(0,s.useState)(0),[u,g]=(0,s.useState)({field:"",operator:"",sort:-1}),[h,x]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[y,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const t={page:0,sort:u.sort};return e((0,ot.ax)(t)),()=>{e((0,ot.RJ)())}}),[]),(0,s.useEffect)((()=>{"date"===u.field?g({...u,operator:"inBetween"}):"inBetween"===u.operator&&g({...u,operator:"$regex"})}),[u.field]);function j(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const v=t.map((e=>({...e,ownerName:e.ownerName&&j(e.ownerName),username:e.username&&j(e.username),tenantName:e.tenantName&&j(e.tenantName),address:e.address&&j(e.address)})));return console.log(v),(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(W.Z,{style:{marginRight:"10px"}}),title:"Tenants",subTitle:"Manage Application Tenants",link:"/tenants/new"}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(gt,{openDeleteDialog:i,setOpenDeleteDialog:n,handleOnDelete:()=>{t.filter((e=>e.id===l[0])).forEach((t=>{d===t.email?e((0,ot.yO)(l)):(0,vt.Am)("Email not matches",{position:"top-right",type:"warning"})}))},confirmInput:d,setConfirmInput:c,heading:"DELETE TENANT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Tenant? Once you delete it's entire record will be deleted, and you can never get it back."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=h,{field:n,operator:l,sort:r}=u;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,ot.ax)(o)),f(!y),p(0)):""===n?(e((0,ot.ax)(o)),f(!y),p(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,ot.ax)(o)),f(!y),p(0))},filters:u,setFilter:g,state:h,setState:x,openFiltersPanel:y,setOpenFiltersPanel:f,loadDataFunc:()=>{e((0,ot.ax)({page:0,sort:-1}))},searchFiltersForm:Ae,searchInputForm:Ze}),(0,U.jsx)(J,{columns:de(n),rows:v,currentPage:m,totalRecords:a,setSelectedRowId:o,handleOnPageChange:t=>{p(t);const{startDate:a,endDate:s,searchInput:i}=h,{field:n,operator:l,sort:r}=u;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,ot.ax)(o)):""===n?e((0,ot.ax)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,ot.ax)(o))}})]})]})},Dt=e=>{let{file:t,setFile:a}=e;return(0,U.jsxs)("div",{className:"avatarInputWrapper",id:"wrapper",children:[(0,U.jsx)("img",{src:t&&URL.createObjectURL(t),width:"130px",height:"130px"}),(0,U.jsx)("input",{type:"file",onChange:e=>{a(e.target.files[0])},className:"avatarInput"})]})},St=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.tenants.packages)),a=(0,r.v9)((e=>e.tenants.current)),{id:i}=(0,n.UO)(),[l,o]=(0,s.useState)({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",confirmPassword:"",logo:"",subscriptionId:""}),[d,c]=(0,s.useState)("");(0,s.useEffect)((()=>{void 0!==i&&e((0,ot.cg)(i)),e((0,ot.BP)("active"))}),[i]),console.log(d),(0,s.useEffect)((()=>{if(void 0!==i&&0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob(),s=new File([a],"test.jpg",{type:"image/jpeg"});return console.log(s),s}async function t(){const t=await e("http://localhost:5000/public/tenants/images/".concat(a.logo));c(t)}o({...l,...a}),a.logo&&t()}else o({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",confirmPassword:"",subscriptionId:""})}),[a]);const{ownerName:m,username:p,email:u,tenantName:g,contact:h,address:x,password:y,status:f,date:j,packageId:v,confirmPassword:b}=l;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{title:"New Tenant",subTitle:"Manage Application Tenants"}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(Dt,{file:d,setFile:c})}),t.length>0&&(0,U.jsx)(Ve,{title:"Add New Tenant",inputs:we("Add Tenant",t),state:l,setState:o,file:d,setFile:c,submit:async t=>{if(t.preventDefault(),""===m)(0,vt.Am)("Enter owner name",{position:"top-right",type:"error"});else if(""===p)(0,vt.Am)("Enter username",{position:"top-right",type:"error"});else if(""===u)(0,vt.Am)("Enter username",{position:"top-right",type:"error"});else if(""===g)(0,vt.Am)("Enter enter company name",{position:"top-right",type:"error"});else if(""===h)(0,vt.Am)("Enter username",{position:"top-right",type:"error"});else if(""===x)(0,vt.Am)("Enter username",{position:"top-right",type:"error"});else if(""===y)(0,vt.Am)("Enter username",{position:"top-right",type:"error"});else if(""===v)(0,vt.Am)("Please select package",{position:"top-right",type:"error"});else if(""===f)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""===j)(0,vt.Am)("Please select date",{position:"top-right",type:"error"});else if(y!==b)(0,vt.Am)("Password does not Match !",{position:"top-right",type:"error"});else if(""!==d){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(d));if(!0===(null===s||void 0===s?void 0:s.success)){const n={...l};if(n.logo=s.filename,o(n),void 0!==i){const r={id:i,Data:n};console.log("Checking data before send => ",r),e((0,ot.Jq)(r)),o({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",logo:"",subscriptionId:""}),c("")}else e((0,ot.Gc)(n)),o({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",logo:"",subscriptionId:""}),c("")}}else if(void 0!==i){const D={id:i,Data:l};e((0,ot.Jq)(D)),o({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",logo:"",subscriptionId:""}),c("")}else e((0,ot.Gc)(l)),o({ownerName:"",username:"",email:"",tenantName:"",contact:"",address:"",packageId:"",status:"",date:"",password:"",logo:"",subscriptionId:""}),c("")}})]})]})};a(5462);var wt=a(52524);const At=(e,t,a)=>[{field:"user",headerName:"User",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/users/images/").concat(e.row.pic):"avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"email",headerName:"Email",width:230},{field:"contact",headerName:"Contact",width:150},{field:"access",headerName:"Role",width:120},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{e(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>a(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var Zt=a(53661);const It=e=>{let{openFormDialog:t,heading:a,icon:s,color:i,state:n,setState:l,file:r,setFile:o,handleOnClose:d,handleOnSubmit:c,inputs:m}=e;return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:i,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",fontWeight:"800"},children:[(0,U.jsxs)(H.Z,{style:{color:i,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"600"},children:[s,a]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{onClick:d,children:(0,U.jsx)(Zt.Z,{})})})]}),(0,U.jsxs)(mt.Z,{children:[o&&(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(Dt,{file:r,setFile:o})}),(0,U.jsx)(Ve,{title:"Add New Tenant",inputs:m,state:n,setState:l,file:r,setFile:o,submit:c})]})]})})};var Nt=a(38294),Pt=a(71099);const Ct=(e,t)=>[{id:1,label:"Name",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Balance",tabIndex:3,type:"number",name:"balance",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Customer":"ADD CUSTOMER",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Et=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Balance",value:"balance"},{id:5,name:"Address",value:"address"},{id:6,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],Rt=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}],Ot=e=>{let{inputs:t}=e;const a=e=>{if("string"!==typeof e)return"";const t=e.match(/([A-Z][a-z]+|[a-z]+)/g);if(!t)return e;return t.map(((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" ")};return(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:Object.entries(t).map(((e,t)=>{let[s,i]=e;return"_id"!==s&&"pic"!==s&&(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:(0,U.jsxs)(H.Z,{style:{display:"flex",gap:10},children:[(0,U.jsx)(x.Z,{children:a(s)})," :","active"===i||"deactive"===i?(0,U.jsx)("div",{style:{background:"active"===i?"#02bf2e":"#777",color:"white",width:70,textAlign:"center",borderRadius:4},children:a(String(i))}):"salary"===s?(0,U.jsx)(x.Z,{children:"Rs. ".concat(a(String(i)))}):"email"===s?(0,U.jsx)(x.Z,{children:String(i)}):(0,U.jsx)(x.Z,{children:a(String(i))})]})},t)}))})},Ft=e=>{let{openDetailsDialog:t,handleOnDelete:a,setOpenDetailsDialog:s,heading:i,icon:n,color:l,state:r,setState:o,file:d,setFile:c,Id:m,handleOnCloseDetails:p,handleOnSubmit:u,inputs:g,message:h}=e;return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:l,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",fontWeight:"800"},children:[(0,U.jsxs)(H.Z,{style:{color:l,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"600"},children:[n,i]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{onClick:p,children:(0,U.jsx)(Zt.Z,{})})})]}),(0,U.jsxs)(mt.Z,{children:[(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(q.ZP,{src:g&&""!==g.pic?"http://localhost:5000/public/".concat(g.designation?"employees":"customers","/images/").concat(g.pic):"./img/avatarfile.png"})}),(0,U.jsx)(Ot,{inputs:g})]})]})})};var kt=a(65712);const Tt=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Username *",type:"text",name:"username",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Role",type:"select",tabIndex:5,disable:!1,name:"access",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Admin",value:"admin"},{id:2,name:"Cashier",value:"cashier"}]},{id:5,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:"Password",tabIndex:2,type:"password",name:"password",grid:{xs:12,sm:6,md:6,lg:6}},{id:8,label:"Confirm Password",tabIndex:2,type:"password",name:"confirmPassword",grid:{xs:12,sm:6,md:6,lg:6}},{id:9,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:12,md:12,lg:12}},{id:10,label:null!==e&&0!==Object.keys(t).length?"Update User":"Add User",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Bt=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.users.data)),a=(0,r.v9)((e=>e.users.current)),i=(0,r.v9)((e=>e.users.totalRecord)),n=(0,r.v9)((e=>e.users.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,f]=(0,s.useState)({field:"",operator:"",sort:-1}),[j,v]=(0,s.useState)({searchInput:""}),[b,S]=(0,s.useState)({name:"",username:"",access:"",email:"",contact:"",address:"",password:"",status:"",pic:""}),[w,A]=(0,s.useState)(""),[Z,I]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};e((0,kt.AW)(t))}),[]),(0,s.useEffect)((()=>{"date"===y.field?f({...y,operator:"inBetween"}):"inBetween"===y.operator&&f({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):N()}),[n]);const N=()=>{o(!1),g(null),S({name:"",email:"",contact:"",address:"",balance:"",status:""}),A("")};function P(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const C=t.map((e=>({...e,name:e.name&&P(e.name),address:e.address&&P(e.address),status:e.status&&P(e.status)}))),{name:E,username:R,access:O,contact:F,address:k,password:T,status:B}=b;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(Nt.Z,{style:{marginRight:"10px"}}),title:"Users",subTitle:"Manage Application Users",addBtnTitle:"Add User",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE USER":"ADD USER",color:"#999999",state:b,Id:u,setState:S,file:w,setFile:A,handleOnClose:N,handleOnSubmit:async t=>{if(t.preventDefault(),""===E)(0,vt.Am)("Enter Name",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Enter unique username",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Select User Role",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Enter contact number",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Enter a password min 6 characters",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Enter address of user",{position:"top-right",type:"error"});else if(""===B)(0,vt.Am)("Select status",{position:"top-right",type:"error"});else if(""!==w){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(w));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...b};if(i.pic=s.filename,S(i),null!==u){const n={id:u[0],Data:i};e((0,Pt.uG)(n))}else e((0,kt.cn)(i))}}else if(null!==u){const l={id:u[0],Data:b};e((0,Pt.uG)(l))}else e((0,kt.cn)(b))},inputs:Tt(u,a),icon:(0,U.jsx)(Nt.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(a).length&&(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"Kashif's Detail",inputs:a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Pt.LA)(u)),g(null)},heading:"DELETE TENANT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Tenant? Once you delete it's entire record will be deleted, and you can never get it back."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Pt.OL)(o)),I(!Z),x(0)):""===n?(e((0,Pt.OL)(o)),I(!Z),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Pt.OL)(o)),I(!Z),x(0))},filters:y,setFilter:f,state:j,setState:v,openFiltersPanel:Z,setOpenFiltersPanel:I,loadDataFunc:()=>{e((0,Pt.OL)({page:0,sort:-1}))},searchFiltersForm:Et,searchInputForm:Rt}),(0,U.jsx)(J,{columns:At(p,c,o),rows:C,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=b,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Pt.OL)(o)):""===n?e((0,Pt.OL)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Pt.OL)(o))}})]})]})};var zt=a(85667);const Ut=a.p+"static/media/petrol.0bf86c4e06a2c3e4911f.jpg",Mt=[{id:1,label:"New Reading",type:"number",name:"reading",grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Cash Sales (Amount)",type:"number",name:"salesCash",grid:{xs:12,sm:12,md:12,lg:12}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:4,label:"Add Reading",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}];var Wt=a(92686),Lt=a(26594);const _t=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.machines.data)),[a,i]=(0,s.useState)({machineId:"",reading:"",salesCash:"",date:""}),[n,l]=(0,s.useState)({petrol:!1,diesel:!1});console.log(t);const o=t=>{if("petrol"===t){const t={field:"type",operator:"$regex",searchInput:"petrol",sort:-1};e((0,Wt.Bb)(t)),l({petrol:!0,diesel:!1})}else{const t={field:"type",operator:"$regex",searchInput:"diesel",sort:-1};e((0,Wt.Bb)(t)),l({petrol:!1,diesel:!0})}};console.log(a);const{machineId:d,cashSalesAmount:c,date:m,newReading:p}=a;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(A.Z,{style:{marginRight:"10px"}}),title:"Meters",subTitle:"Manage Machine Readings"}),(0,U.jsxs)(H.Z,{className:"mainCard meterCard",children:[(0,U.jsxs)(H.Z,{className:"widgetOptionsContainer",children:[(0,U.jsxs)(K.ZP,{container:!0,gap:2,className:"widgetContainer",style:{marginBottom:10},children:[(0,U.jsxs)(K.ZP,{item:!0,md:12,lg:6,className:"widget",onClick:()=>o("petrol"),children:[!0===n.petrol&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsxs)(H.Z,{className:"inner-widget",children:[(0,U.jsx)(q.ZP,{src:L,round:!0,size:"60"}),(0,U.jsx)(x.Z,{style:{fontSize:"22px",marginLeft:"10px"},children:"Petrol"})]})]}),(0,U.jsxs)(K.ZP,{item:!0,md:12,lg:6,className:"widget",onClick:()=>o("diesel"),children:[!0===n.diesel&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsxs)(H.Z,{className:"inner-widget",children:[(0,U.jsx)(q.ZP,{src:_,round:!0,size:"70"}),(0,U.jsx)(x.Z,{style:{fontSize:"22px",marginLeft:"10px"},children:"Diesel"})]})]})]}),(0,U.jsx)(K.ZP,{container:!0,gap:2,children:t.length>0&&t.map((e=>(0,U.jsxs)(K.ZP,{item:!0,xs:6,md:12,lg:6,className:"widget",onClick:()=>(e=>{i({...a,machineId:e._id})})(e),children:[a.machineId===e._id&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsxs)(H.Z,{className:"inner-widget",children:[(0,U.jsx)(q.ZP,{src:Ut,round:!0,size:"45"}),(0,U.jsxs)(H.Z,{children:[(0,U.jsx)(x.Z,{style:{fontSize:"22px",marginLeft:"10px"},children:e.name}),(0,U.jsxs)(x.Z,{style:{fontSize:"16px",marginLeft:"10px"},children:["Current: ",e.currentReading]})]})]})]},e._id)))})]}),(0,U.jsxs)(H.Z,{className:"readingForm",children:[(0,U.jsx)("h3",{children:"Meter Reading Entry"}),(0,U.jsx)(Ve,{title:"Add New Reading",inputs:Mt,state:a,setState:i,submit:t=>{t.preventDefault(),""===d?(0,vt.Am)("Please select machine",{position:"top-right",type:"error"}):""===p?(0,vt.Am)("Enter new machine reading",{position:"top-right",type:"error"}):""===c?(0,vt.Am)("Enter cash sales amount",{position:"top-right",type:"error"}):""===m?(0,vt.Am)("Select date",{position:"top-right",type:"error"}):e((0,Lt.eH)(a))}})]})]})]})};var qt=a(33439),Gt=a(85252),$t=a(68087),Kt=a(37355),Yt=a(98268),Xt=a(95683),Ht=a(20068),Qt=a(11426);const Vt=()=>{var e,t,a,i;const{user:n}=(0,s.useContext)(z.Z),l=(0,r.I0)(),o=(0,r.v9)((e=>e.completeData.machines)),d=(0,r.v9)((e=>e.completeData.products)),c=(0,r.v9)((e=>e.completeData.prices)),m=(0,r.v9)((e=>e.completeData.readings)),p=(0,r.v9)((e=>e.closings.errors));(0,s.useEffect)((()=>(l((0,Y.Dg)()),l((0,Y.Uu)()),l((0,Y.f7)()),l((0,Y.le)()),()=>{l((0,Y.gP)())})),[]);const[u,g]=(0,s.useState)({cashierId:n._id,items:[],salesCash:"",debitCash:"",cardAmount:"",creditAmount:"",date:""}),[h,y]=(0,s.useState)({machineId:"",productId:"",quantity:"",reading:""}),[f,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(null===p||void 0===p?void 0:p.length)>0&&p.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})}))}),[p]);const v=()=>{j(!f)},b=e=>{if("petrol"!==e.type&&"diesel"!==e.type){if(console.log("Sales uper Hited"),u.items.some((t=>t.productId===e._id)))return;y({...h,productId:e._id})}else h.productId!==e._id?(y({machineId:"",reading:"",quantity:"",productId:e._id}),console.log("Hited => ",h)):y({...h,productId:e._id})};console.log(h);const{items:D,salesCash:S,debitCash:w,creditAmount:A,cardAmount:Z}=u;let I=[],N=u.items.reduce(((e,t)=>(e[t.productId]||(e[t.productId]=[]),t.machineId?(e[t.productId].push({machineId:t.machineId,reading:t.reading}),I.push(t.machineId)):e[t.productId].push({productId:t.productId,quantity:t.quantity}),e)),{});const P=e=>{let t=0,a=0;Object.entries(N).map((s=>{let[i,n]=s;i===e&&n.map((e=>{if(e.machineId){let s=m.find((t=>t.machineId===e.machineId)),n=e.reading-(null!==s&&void 0!==s&&s.newReading?null===s||void 0===s?void 0:s.newReading:0);t+=n;let l=c.find((e=>e.productId===i));a+=(null===l||void 0===l?void 0:l.newSellingPrice)*n}else{let s=c.find((e=>e.productId===i));t+=parseInt(e.quantity),a+=(null===s||void 0===s?void 0:s.newSellingPrice)*e.quantity}}))}));let s=E(a);return{sale:E(t),amount:s.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}},C=()=>{let e=0;return Object.entries(N).map((t=>{let[a,s]=t;const i=d.find((e=>e._id===a));s.map((t=>{if(!t.machineId||"petrol"!==(null===i||void 0===i?void 0:i.type)&&"diesel"!==(null===i||void 0===i?void 0:i.type)){let s=c.find((e=>e.productId===a));console.log("checking the current price ",s),e+=(null===s||void 0===s?void 0:s.newSellingPrice)*t.quantity}else{let s=m.find((e=>e.machineId===t.machineId)),i=t.reading-(null!==s&&void 0!==s&&s.newReading?null===s||void 0===s?void 0:s.newReading:0),n=c.find((e=>e.productId===a));e+=(null===n||void 0===n?void 0:n.newSellingPrice)*i}}))})),E(e)},E=e=>Math.round(100*e)/100,R=e=>{const t=/^\d+(\.\d{1,2})?$/,{name:a,value:s}=e.target;console.log("Checking the state => ",u.name,a),"quantity"===e.target.name&&/^\d+$/.test(e.target.value)?y({...h,quantity:e.target.value}):"reading"===e.target.name&&t.test(e.target.value)?y({...h,reading:e.target.value}):t.test(e.target.value)?(console.log("CHeck name => ",e.target.name),g({...u,[e.target.name]:e.target.value})):"quantity"!==a&&"reading"!==a&&1===u[e.target.name].length?g({...u,[e.target.name]:e.target.value.slice(0,-1)}):"quantity"===a&&1===h.quantity.length?y({...h,quantity:e.target.value.slice(0,-1)}):"reading"===a&&1===h.reading.length&&y({...h,reading:e.target.value.slice(0,-1)})};return(0,U.jsx)(H.Z,{m:"0px 20px 15px 20px",children:(0,U.jsxs)(K.ZP,{container:!0,className:"mainCard meterCard",children:[(0,U.jsxs)(K.ZP,{item:!0,lg:8,className:"widgetOptionsContainer",children:[(0,U.jsx)(K.ZP,{container:!0,gap:2,className:"widgetContainer",style:{marginBottom:10},children:d.map((e=>("petrol"===e.type||"diesel"===e.type)&&(0,U.jsxs)(K.ZP,{item:!0,md:12,lg:6,className:"widget",onClick:()=>b(e),children:[h.productId===e._id&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsxs)(H.Z,{className:"inner-widget",children:[(0,U.jsx)(q.ZP,{src:"petrol"===e.type?L:_,round:!0,size:"60"}),(0,U.jsx)(x.Z,{style:{fontSize:"22px",marginLeft:"10px"},children:e.name})]})]},e._id)))}),(0,U.jsx)(K.ZP,{container:!0,gap:2,children:o.length>0&&o.map((e=>{var t,a;return(null===(t=d.find((e=>e._id==h.productId)))||void 0===t?void 0:t.type)===e.type&&(0,U.jsxs)(K.ZP,{item:!0,xs:6,md:12,lg:6,className:"widget",onClick:()=>(e=>{I.some((t=>t===e._id))||y({...h,machineId:e._id})})(e),style:{backgroundColor:I.some((t=>t===e._id))?"#cccaca":h.machineId===e._id?"#b1f3b1":"#fff",cursor:I.some((t=>t===e._id))?null:"pointer"},children:[h.machineId===e._id&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsxs)(H.Z,{className:"inner-widget",children:[(0,U.jsx)(q.ZP,{src:Ut,round:!0,size:"35"}),(0,U.jsxs)(H.Z,{children:[(0,U.jsx)(x.Z,{style:{fontSize:"15px",marginLeft:"10px",fontWeight:600},children:e.name}),(0,U.jsxs)(x.Z,{style:{fontSize:"16px",marginLeft:"10px"},children:["Current: ",null===(a=m.find((t=>t.machineId===e._id)))||void 0===a?void 0:a.newReading]})]})]})]},e._id)}))}),(0,U.jsx)("hr",{style:{marginTop:20}}),(0,U.jsx)("h4",{style:{marginTop:20},children:"Mobile Oil"}),(0,U.jsx)(K.ZP,{container:!0,gap:1,children:d.length>0&&d.map((e=>{var t;if("petrol"!==e.type&&"diesel"!==e.type)return(0,U.jsxs)(K.ZP,{item:!0,lg:2,md:3,xl:3,sm:3,className:"productItems",onClick:()=>b(e),style:{backgroundColor:u.items.some((t=>t.productId===e._id))?"#cccaca":h.productId===e._id?"#b1f3b1":"#fff",cursor:u.items.some((t=>t===e._id))?null:"pointer"},children:[h.productId===e._id&&(0,U.jsx)(zt.Z,{className:"productSelector"}),(0,U.jsx)(q.ZP,{src:"http://localhost:5000/public/products/images/".concat(e.pic),round:!0,size:"40"}),(0,U.jsx)(x.Z,{children:e.name}),(0,U.jsxs)(x.Z,{children:["Rs. ",null===e||void 0===e||null===(t=e.price)||void 0===t?void 0:t.newSellingPrice]})]},e._id)}))})]}),(0,U.jsxs)(K.ZP,{item:!0,lg:4,className:"itemsForm",children:[(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,U.jsx)(H.Z,{className:"title",children:(0,U.jsx)("h4",{children:"Shift Closing"})}),(0,U.jsxs)(H.Z,{className:"actionIcons",children:[(0,U.jsx)(Ht.Z,{title:"Refresh / Clear form",children:(0,U.jsx)(re.Z,{onClick:()=>(y({productId:"",machineId:"",reading:"",quantity:""}),void g({cashierId:"",items:[],salesCash:"",debitCash:"",cardAmount:"",creditAmount:"",date:""})),children:(0,U.jsx)(qt.Z,{})})}),(0,U.jsx)(Ht.Z,{title:"Resume Sale",children:(0,U.jsx)(re.Z,{onClick:()=>{},children:(0,U.jsx)(Gt.Z,{})})})]})]}),(0,U.jsxs)(K.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(K.ZP,{item:!0,lg:8,md:8,sm:8,xs:12,children:"petrol"===(null===(e=d.find((e=>e._id==h.productId)))||void 0===e?void 0:e.type)||"diesel"===(null===(t=d.find((e=>e._id==h.productId)))||void 0===t?void 0:t.type)?(0,U.jsx)(ue.Z,{label:"New Reading",size:"small",type:"number",name:"reading",value:h.reading||"",onChange:R,style:{width:"100%",marginRight:4}}):(0,U.jsx)(ue.Z,{label:"Quantity",size:"small",type:"text",name:"quantity",value:h.quantity||"",onChange:R,style:{width:"100%",marginRight:4}})}),(0,U.jsx)(K.ZP,{item:!0,lg:3,md:2,sm:2,xs:2,children:(0,U.jsxs)(te.Z,{variant:"contained",disabled:"petrol"===(null===(a=d.find((e=>e._id===h.productId)))||void 0===a?void 0:a.type)||"diesel"===(null===(i=d.find((e=>e._id===h.productId)))||void 0===i?void 0:i.type)?""!==h.productId&&""===h.machineId:""===h.productId,onClick:()=>(()=>{if(""!==h.machineId&&""!==h.productId){let e=m.find((e=>e.machineId===h.machineId));if(h.reading<e.newReading)return void(0,vt.Am)("Reading is less than Previous",{position:"top-right",type:"error"});{const{quantity:e,...t}=h;g({...u,items:[...u.items,t]}),y({productId:"",machineId:"",reading:"",quantity:""})}}else{const{machineId:e,reading:t,...a}=h;g({...u,items:[...u.items,a]}),y({productId:"",machineId:"",reading:"",quantity:""})}})(),children:[(0,U.jsx)($t.Z,{})," Add"]})})]}),(0,U.jsx)("hr",{style:{marginTop:10,height:1,color:"#666"}}),(0,U.jsx)(H.Z,{className:"itemsSalesCloseContainer",children:Object.entries(N).length>0&&Object.entries(N).map((e=>{let[t,a]=e;return d.map((e=>t===e._id?(0,U.jsxs)(H.Z,{className:"itemBox",style:{height:f?150:38},children:[(0,U.jsxs)(H.Z,{className:"itemWrapperBox",children:[(0,U.jsxs)(H.Z,{className:"innerItemBox",children:[(0,U.jsx)(re.Z,{style:{padding:1},onClick:v,children:f?(0,U.jsx)(Kt.Z,{}):(0,U.jsx)(Yt.Z,{})}),(0,U.jsx)(x.Z,{children:e.name})]}),(0,U.jsxs)(H.Z,{className:"innerItemBox",children:[(0,U.jsx)(x.Z,{style:{marginRight:5},children:"".concat(P(e.id).amount)}),(0,U.jsx)(re.Z,{style:{padding:1},onClick:()=>(e=>{const t=u.items.filter((t=>t.productId!==e._id));g({...u,items:t})})(e),children:(0,U.jsx)(Zt.Z,{style:{fontSize:20}})})]})]}),(0,U.jsx)(H.Z,{children:(0,U.jsxs)(H.Z,{className:"detailedEntry",children:[(0,U.jsx)(H.Z,{style:{Width:"300px"},children:a.map((e=>{var t;return e.machineId&&(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{children:null===(t=o.find((t=>t._id===e.machineId)))||void 0===t?void 0:t.name}),(0,U.jsxs)(x.Z,{children:["Rd. ",e.reading]})]},e.machineId)}))}),(0,U.jsx)("hr",{}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",Width:"300px"},children:[(0,U.jsxs)(H.Z,{children:[(0,U.jsx)(x.Z,{children:"Total Sale"}),(0,U.jsx)(x.Z,{children:"Total Amount"})]}),(0,U.jsxs)(H.Z,{children:[(0,U.jsx)(x.Z,{children:"Lt. ".concat(P(e.id).sale)}),(0,U.jsx)(x.Z,{children:"".concat(P(e.id).amount)})]})]})]})})]},t):null))}))}),(0,U.jsx)("hr",{style:{marginTop:10,height:1,color:"#666"}}),(0,U.jsxs)(K.ZP,{container:!0,spacing:1,children:[(0,U.jsxs)(K.ZP,{item:!0,lg:6,md:6,sm:6,xs:12,children:[" ",(0,U.jsx)(ue.Z,{label:"Tot: Sales Cash",size:"small",type:"number",name:"salesCash",value:u.salesCash||"",onChange:R,style:{width:"100%",marginTop:10,marginRight:4}})]}),(0,U.jsxs)(K.ZP,{item:!0,lg:6,md:6,sm:6,xs:12,children:[" ",(0,U.jsx)(ue.Z,{label:"Tot: Debit Cash",size:"small",type:"number",name:"debitCash",value:u.debitCash||"",onChange:R,style:{width:"100%",marginTop:10,marginRight:4}})]}),(0,U.jsxs)(K.ZP,{item:!0,lg:6,md:6,sm:6,xs:12,children:[" ",(0,U.jsx)(ue.Z,{label:"Tot: Credit Amount",size:"small",type:"number",name:"creditAmount",value:u.creditAmount||"",onChange:R,style:{width:"100%",marginRight:4}})]}),(0,U.jsxs)(K.ZP,{item:!0,lg:6,md:6,sm:6,xs:12,children:[" ",(0,U.jsx)(ue.Z,{label:"Tot: Card Amount",size:"small",type:"number",name:"cardAmount",value:u.cardAmount||"",onChange:R,style:{width:"100%",marginRight:4}})]})]}),(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[(0,U.jsx)(x.Z,{style:{fontSize:15},children:"Total Sales Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:C().toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",color:parseFloat(u.salesCash)+parseFloat(u.cardAmount)+parseFloat(u.creditAmount)>=C()?"#0cb10c":"red"},children:[(0,U.jsx)(x.Z,{style:{fontSize:15,fontWeight:600},children:"Sales Cash: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:parseFloat(u.salesCash).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{style:{fontSize:15},children:"Debit Cash: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:parseFloat(u.debitCash).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{style:{fontSize:15},children:"Total Card Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:parseFloat(u.cardAmount).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{style:{fontSize:15},children:"Total Credit Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:parseFloat(u.creditAmount).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",color:"#0cb10c"},children:[(0,U.jsx)(x.Z,{style:{fontSize:15,fontWeight:600},children:"Cash in Hand: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600,fontSize:15},children:(parseFloat(u.debitCash)+parseFloat(u.salesCash)).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),(0,U.jsxs)(te.Z,{type:"submit",color:"primary",variant:"contained",onClick:e=>{e.preventDefault(),0===D.length?(0,vt.Am)("Add sale information",{position:"top-right",type:"error"}):I.length!==o.length?(0,vt.Am)("Enter reading of all machines",{position:"top-right",type:"error"}):Object.entries(N).length!==d.length?(0,vt.Am)("Please enter all products info",{position:"top-right",type:"error"}):""===S?(0,vt.Am)("Enter total sales cash amount",{position:"top-right",type:"error"}):""===w?(0,vt.Am)("Enter total debit cash amount",{position:"top-right",type:"error"}):""===A?(0,vt.Am)("Enter total credit amount",{position:"top-right",type:"error"}):""===Z?(0,vt.Am)("Enter total card amount",{position:"top-right",type:"error"}):(g({...u,cashierId:n._id}),l((0,Qt.Zg)(u)))},style:{width:"100%",marginTop:5},children:[(0,U.jsx)(Xt.Z,{style:{marginRight:10}}),"SAVE"]})]})]})})},Jt=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/customers/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"balance",headerName:"Receivable",width:150},{field:"contact",headerName:"Contact",width:150},{field:"address",headerName:"Address",width:200},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],ea=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.customers.data)),a=(0,r.v9)((e=>e.customers.current)),i=(0,r.v9)((e=>e.customers.totalRecord)),n=(0,r.v9)((e=>e.customers.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:""}),[S,w]=(0,s.useState)({name:"",email:"",contact:"",address:"",balance:"",status:"",pic:""}),[A,Z]=(0,s.useState)(""),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,Pt.gV)(u))}),[u]),(0,s.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("http://localhost:5000/public/customers/images/".concat(a.pic));Z(t)}w({name:a.name,email:a.email,contact:a.contact,balance:a.balance,address:a.address,status:a.status}),a.pic&&t()}}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,Pt.OL)(t)),()=>{e((0,Pt.HO)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?j({...y,operator:"inBetween"}):"inBetween"===y.operator&&j({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[n]);const P=()=>{o(!1),g(null),w({name:"",email:"",contact:"",address:"",balance:"",status:""}),Z("")};function C(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const E=t.map((e=>({...e,name:e.name&&C(e.name),address:e.address&&C(e.address),status:e.status&&C(e.status)}))),{name:R,balance:O,status:F}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}}),title:"Customers",subTitle:"Manage Application Customers",addBtnTitle:"Add Customer",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE CUSTOMER":"ADD CUSTOMER",color:"#999999",state:S,Id:u,setState:w,file:A,setFile:Z,handleOnClose:P,handleOnSubmit:async t=>{if(t.preventDefault(),""===R)(0,vt.Am)("Enter Customer name",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Enter initial balance",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==A){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(A));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...S};if(i.pic=s.filename,w(i),null!==u){const n={id:u[0],Data:i};e((0,Pt.uG)(n))}else e((0,Pt.Sy)(i))}}else if(null!==u){const l={id:u[0],Data:S};e((0,Pt.uG)(l))}else e((0,Pt.Sy)(S))},inputs:Ct(u,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(a).length&&(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"Kashif's Detail",inputs:a,handleOnCloseDetails:()=>c(!1),icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Pt.LA)(u)),g(null)},heading:"DELETE CUSTOMER",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Customer? Once you delete it's entire record will be deleted, and you can never get it back."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Pt.OL)(o)),N(!I),x(0)):""===n?(e((0,Pt.OL)(o)),N(!I),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Pt.OL)(o)),N(!I),x(0))},filters:y,setFilter:j,state:v,setState:b,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:()=>{e((0,Pt.OL)({page:0,sort:-1}))},searchFiltersForm:Et,searchInputForm:Rt}),(0,U.jsx)(J,{columns:Jt(p,c,o),rows:E,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Pt.OL)(o)):""===n?e((0,Pt.OL)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Pt.OL)(o))}})]})]})},ta=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Balance *",tabIndex:3,type:"number",name:"balance",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Company Name *",tabIndex:4,type:"text",name:"companyName",grid:{xs:12,sm:12,md:12,lg:12}},{id:6,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:8,label:null!==e&&0!==Object.keys(t).length?"Update Supplier":"Add Supplier",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],aa=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Company Name",value:"companyName"},{id:5,name:"Balance",value:"balance"},{id:6,name:"Address",value:"address"},{id:7,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],sa=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}],ia=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/suppliers/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"balance",headerName:"Payable",width:150},{field:"contact",headerName:"Contact",width:150},{field:"companyName",headerName:"Company",width:150},{field:"address",headerName:"Address",width:200},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var na=a(99784);const la=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.suppliers.data)),a=(0,r.v9)((e=>e.suppliers.current)),i=(0,r.v9)((e=>e.suppliers.totalRecord)),n=(0,r.v9)((e=>e.suppliers.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[b,S]=(0,s.useState)({searchInput:""}),[w,A]=(0,s.useState)({name:"",email:"",contact:"",companyName:"",address:"",balance:"",status:"",pic:""}),[Z,I]=(0,s.useState)(""),[N,P]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,na.G5)(u))}),[u]),(0,s.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("http://localhost:5000/public/suppliers/images/".concat(a.pic));I(t)}A({name:a.name,email:a.email,contact:a.contact,companyName:a.companyName,balance:a.balance,address:a.address,status:a.status}),a.pic&&t()}}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,na.rH)(t)),()=>{e((0,na.f2)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?j({...y,operator:"inBetween"}):"inBetween"===y.operator&&j({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):C()}),[n]);const C=()=>{o(!1),g(null),A({name:"",email:"",contact:"",companyName:"",address:"",balance:"",status:"",pic:""}),I("")};function E(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const R=t.map((e=>({...e,name:e.name&&E(e.name),companyName:e.companyName&&E(e.companyName),address:e.address&&E(e.address),status:e.status&&E(e.status)}))),{name:O,balance:F,status:k,contact:T,companyName:B}=w;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(v.Z,{style:{marginRight:"10px"}}),title:"Suppliers",subTitle:"Manage Application Suppliers",addBtnTitle:"Add Supplier",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE SUPPLIER":"ADD SUPPLIER",color:"#999999",state:w,Id:u,setState:A,file:Z,setFile:I,handleOnClose:C,handleOnSubmit:async t=>{if(t.preventDefault(),""===O)(0,vt.Am)("Enter Supplier name",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Enter contact",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Enter initial balance",{position:"top-right",type:"error"});else if(""===B)(0,vt.Am)("Enter company name",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==Z){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(Z));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...w};if(i.pic=s.filename,A(i),null!==u){const n={id:u[0],Data:i};e((0,na.S6)(n))}else e((0,na.GI)(i))}}else if(null!==u){const l={id:u[0],Data:w};e((0,na.S6)(l))}else e((0,na.GI)(w))},inputs:ta(u,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"Kashif's Detail",inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,na.eT)(u)),g(null)},heading:"DELETE TENANT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Supplier?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=b,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,na.rH)(o)),P(!N),x(0)):""===n?(e((0,na.rH)(o)),P(!N),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,na.rH)(o)),P(!N),x(0))},filters:y,setFilter:j,state:b,setState:S,openFiltersPanel:N,setOpenFiltersPanel:P,loadDataFunc:()=>{e((0,na.rH)({page:0,sort:-1}))},searchFiltersForm:aa,searchInputForm:sa}),(0,U.jsx)(J,{columns:ia(p,c,o),rows:R,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=w,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,na.rH)(o)):""===n?e((0,na.rH)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,na.rH)(o))}})]})]})},ra=(e,t,a)=>[{field:"name",headerName:"Name",width:210,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/employees/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"salary",headerName:"Salary",width:110,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithStatus ".concat(e.row.salary),children:["Rs. ",e.row.salary]})},{field:"remainingAdvance",headerName:"Remaining Advance",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithStatus ".concat(e.row.remainingAdvance),children:["Rs. ",e.row.remainingAdvance]})},{field:"contact",headerName:"Contact",width:140},{field:"designation",headerName:"Designation",width:130},{field:"status",headerName:"Status",width:90,renderCell:e=>(0,U.jsx)("div",{style:{background:"Active"===e.row.status?"#02bf2e":"#777",color:"white",width:65,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var oa=a(18481);const da=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Salary *",tabIndex:3,type:"number",name:"salary",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Designation *",tabIndex:4,type:"text",name:"designation",grid:{xs:12,sm:12,md:12,lg:12}},{id:6,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:8,label:null!==e&&0!==Object.keys(t).length?"Update Employee":"Add Employee",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],ca=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Designation",value:"designation"},{id:5,name:"Advance",value:"advance"},{id:6,name:"Address",value:"address"},{id:7,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],ma=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}],pa=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.employees.data)),a=(0,r.v9)((e=>e.employees.current)),i=(0,r.v9)((e=>e.employees.totalRecord)),n=(0,r.v9)((e=>e.employees.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:""}),[S,w]=(0,s.useState)({name:"",email:"",contact:"",designation:"",address:"",salary:"",status:"",pic:""}),[A,Z]=(0,s.useState)(""),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,oa.Kc)(u))}),[u]),(0,s.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("http://localhost:5000/public/employees/images/".concat(a.pic));Z(t)}w({name:a.name,email:a.email,contact:a.contact,designation:a.designation,salary:a.salary,address:a.address,status:a.status}),a.pic&&t()}}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,oa.fN)(t)),()=>{e((0,oa.Kg)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?j({...y,operator:"inBetween"}):"inBetween"===y.operator&&j({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[n]);const P=()=>{o(!1),g(null),w({name:"",email:"",contact:"",designation:"",address:"",salary:"",status:"",pic:""}),Z("")};function C(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const E=t.map((e=>({...e,name:e.name&&C(e.name),designation:e.designation&&C(e.designation),address:e.address&&C(e.address),status:e.status&&C(e.status)}))),{name:R,salary:O,status:F,contact:k,designation:T}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}}),title:"Employees",subTitle:"Manage Application Employees",addBtnTitle:"Add Employee",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE EMPLOYEE":"ADD EMPLOYEE",color:"#999999",state:S,Id:u,setState:w,file:A,setFile:Z,handleOnClose:P,handleOnSubmit:async t=>{if(t.preventDefault(),""===R)(0,vt.Am)("Enter employee name",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Enter employee salary",{position:"top-right",type:"error"});else if(O<=0)(0,vt.Am)("Enter a valid salary",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Enter employee designation",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==A){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(A));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...S};if(i.pic=s.filename,w(i),null!==u){const n={id:u[0],Data:i};e((0,oa.HG)(n)),P()}else e((0,oa.xk)(i)),P()}}else if(null!==u){const l={id:u[0],Data:S};e((0,oa.HG)(l)),P()}else e((0,oa.xk)(S)),P()},inputs:da(u,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"".concat(0!==Object.keys(a).length&&a.name,"'s Detail"),inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>c(!1)}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,oa.h1)(u)),g(null)},heading:"DELETE Employee",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Employee?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,oa.fN)(o)),N(!I),x(0)):""===n?(e((0,oa.fN)(o)),N(!I),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,oa.fN)(o)),N(!I),x(0))},filters:y,setFilter:j,state:v,setState:b,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:()=>{e((0,oa.fN)({page:0,sort:-1}))},searchFiltersForm:ca,searchInputForm:ma}),(0,U.jsx)(J,{columns:ra(p,c,o),rows:E,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,oa.fN)(o)):""===n?e((0,oa.fN)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,oa.fN)(o))}})]})]})},ua=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsx)("div",{className:"cellWithImg",children:e.row.name})},{field:"type",headerName:"Fuel Type",width:150},{field:"initialReading",headerName:"Initial Reading",width:150},{field:"currentReading",headerName:"Current Reading",width:150},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],ga=(e,t)=>[{id:1,label:"Machine Name",type:"text",name:"name",grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Fuel Type",type:"select",name:"type",options:[{id:1,name:"Petrol",value:"petrol"},{id:2,name:"Diesel",value:"diesel"}],grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Initial Reading",type:"number",name:"initialReading",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Current Reading",type:"number",name:"currentReading",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Status",type:"select",name:"status",options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}],grid:{xs:12,sm:12,md:12,lg:12}},{id:6,label:null!==e&&0!==Object.keys(t).length?"Update Machine":"Add Machine",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],ha=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"type",value:"type"},{id:7,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],xa=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.machines.data)),a=(0,r.v9)((e=>e.machines.current)),i=(0,r.v9)((e=>e.machines.totalRecord)),n=(0,r.v9)((e=>e.machines.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:""}),[S,w]=(0,s.useState)({name:"",type:"",initialReading:"",currentReading:"",status:""}),[A,Z]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,Wt.QS)(u))}),[u]),(0,s.useEffect)((()=>{0!==Object.keys(a).length&&w({name:a.name,type:a.type,initialReading:a.initialReading,currentReading:a.currentReading,status:a.status})}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,Wt.Bb)(t)),()=>{e((0,Wt.PJ)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?j({...y,operator:"inBetween"}):"inBetween"===y.operator&&j({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):I()}),[n]);const I=()=>{o(!1),g(null),w({name:"",type:"",initialReading:"",currentReading:"",status:""})};function N(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const C=t.map((e=>({...e,name:e.name&&N(e.name),type:e.type&&N(e.type),status:e.status&&N(e.status)}))),{name:E,type:R,initialReading:O,currentReading:F,status:k}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(P.Z,{style:{marginRight:"10px"}}),title:"Machines",subTitle:"Manage Application Machines",addBtnTitle:"Add Machine",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE MACHINE":"ADD MACHINE",color:"#999999",state:S,Id:u,setState:w,handleOnClose:I,handleOnSubmit:async t=>{if(t.preventDefault(),""===E)(0,vt.Am)("Enter machine name",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Select fuel type",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Enter initial reading",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Enter current reading",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(null!==u){const t={id:u[0],Data:S};e((0,Wt.Oq)(t))}else e((0,Wt.m5)(S))},inputs:ga(u,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"Kashif's Detail",inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Wt.XV)(u)),g(null)},heading:"DELETE MACHINE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Machine?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Wt.Bb)(o)),Z(!A),x(0)):""===n?(e((0,Wt.Bb)(o)),Z(!A),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Wt.Bb)(o)),Z(!A),x(0))},filters:y,setFilter:j,state:v,setState:b,openFiltersPanel:A,setOpenFiltersPanel:Z,loadDataFunc:()=>{e((0,Wt.Bb)({page:0,sort:-1}))},searchFiltersForm:ha,searchInputForm:Ie}),(0,U.jsx)(J,{columns:ua(p,c,o),rows:C,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o)):""===n?e((0,Wt.Bb)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o))}})]})]})};var ya=a(3799);const fa=(e,t,a,s)=>[{id:1,label:"Select Product",type:"select",name:"productId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id}))),grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Select Supplier",type:"select",name:"supplierId",options:s.length>0&&s.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/suppliers/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Product Quantity",type:"number",name:"quantity",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Cost Price",type:"number",name:"costPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Selling Price",type:"number",name:"sellingPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Paying Amount",type:"number",name:"paidAmount",grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:8,label:null!==e&&0!==Object.keys(t).length?"Update Stock":"Add Stock",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],ja=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Supplier Name",value:"supplier"},{id:2,name:"Product Name",value:"product"},{id:7,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}];var va=a(92061),ba=a(75416);const Da=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.stocks.data)),a=(0,r.v9)((e=>e.products.data)),i=(0,r.v9)((e=>e.suppliers.data)),n=(0,r.v9)((e=>e.machines.current)),l=(0,r.v9)((e=>e.stocks.totalRecord)),o=(0,r.v9)((e=>e.stocks.errors)),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[y,j]=(0,s.useState)(0),[v,b]=(0,s.useState)({field:"",operator:"",sort:-1}),[S,w]=(0,s.useState)({searchInput:""}),[A,Z]=(0,s.useState)({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""}),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==h&&!0===d||void 0!==h&&!0===m)&&e((0,Wt.QS)(h))}),[h]),(0,s.useEffect)((()=>{0!==Object.keys(n).length&&Z({name:n.name,type:n.type,initialReading:n.initialReading,currentReading:n.currentReading,status:n.status})}),[n]),(0,s.useEffect)((()=>{const t={page:0,sort:v.sort};return e((0,ya.Sn)(t)),e((0,va.Xp)(t)),e((0,na.rH)(t)),()=>{e((0,Wt.PJ)())}}),[]),(0,s.useEffect)((()=>{"date"===v.field?b({...v,operator:"inBetween"}):"inBetween"===v.operator&&b({...v,operator:"$regex"})}),[v.field]),(0,s.useEffect)((()=>{(null===o||void 0===o?void 0:o.length)>0?o.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[o]);const P=()=>{c(!1),x(null),Z({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""})};const C=t.map((e=>({...e}))),{productId:E,supplierId:R,quantity:F,costPrice:k,sellingPrice:T,paidAmount:B,date:z}=A;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(O.Z,{style:{marginRight:"10px"}}),title:"Stocks",subTitle:"Manage Application Stocks",addBtnTitle:"Add Stock",dialog:d,setDialog:c}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:d,setOpenFormDialog:c,heading:"ADD STOCK",color:"#999999",state:A,Id:h,setState:Z,handleOnClose:P,handleOnSubmit:async t=>{t.preventDefault(),""===E?(0,vt.Am)("Select product",{position:"top-right",type:"error"}):""===R?(0,vt.Am)("Select product supplier",{position:"top-right",type:"error"}):""===F?(0,vt.Am)("Enter quantity of product",{position:"top-right",type:"error"}):""===k?(0,vt.Am)("Enter cost price",{position:"top-right",type:"error"}):""===T?(0,vt.Am)("Enter selling price",{position:"top-right",type:"error"}):""===B?(0,vt.Am)("Enter amount paid",{position:"top-right",type:"error"}):""===z?(0,vt.Am)("Select date ",{position:"top-right",type:"error"}):e((0,ba.I0)(A))},inputs:fa(h,n,a,i),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:m,heading:"Kashif's Detail",inputs:0!==Object.keys(n).length&&n,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:u,setOpenDeleteDialog:g,handleOnDelete:()=>{e((0,Wt.XV)(h)),x(null)},heading:"DELETE MACHINE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Machine?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=v;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,ya.Sn)(o)),N(!I),j(0)):""===n?(e((0,ya.Sn)(o)),N(!I),j(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,ya.Sn)(o)),N(!I),j(0))},filters:v,setFilter:b,state:S,setState:w,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:()=>{e((0,Wt.Bb)({page:0,sort:-1}))},searchFiltersForm:ha,searchInputForm:Ie}),(0,U.jsx)(J,{columns:[{field:"product",headerName:"Product Name",width:400,renderCell:e=>{var t;return(0,U.jsx)("div",{className:"cellAction",children:(null===(t=e.row)||void 0===t?void 0:t.product)&&e.row.product.name})}},{field:"stock",headerName:"Quantity",width:400},{field:"action",headerName:"Action",width:150,renderCell:e=>(0,U.jsx)("div",{className:"cellAction",children:e.row.stock>0?(0,U.jsx)(le.Z,{label:"Available",style:{background:"green",color:"white"}}):(0,U.jsx)(le.Z,{label:"Out of Stock",style:{background:"red"}})})}],rows:C,currentPage:y,totalRecords:l,selectedRowId:h,setSelectedRowId:x,handleOnPageChange:t=>{j(t);const{startDate:a,endDate:s,searchInput:i}=A,{field:n,operator:l,sort:r}=v;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o)):""===n?e((0,Wt.Bb)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o))}})]})]})},Sa=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/products/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"type",headerName:"Type",width:100},{field:"costPrice",headerName:"Cost Price",width:150,renderCell:e=>(0,U.jsxs)("div",{children:[console.log(e.row.prices),"Rs. ",e.row.prices.costPrice?e.row.prices.costPrice:""]})},{field:"sellingPrice",headerName:"Selling Price",width:140,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.prices.newSellingPrice]})},{field:"date",headerName:"Last Updated",width:120,renderCell:e=>(0,U.jsx)("div",{children:e.row.prices.date})},{field:"status",headerName:"Status",width:90,renderCell:e=>(0,U.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})})]})}],wa=(e,t)=>[{id:1,label:"Product Name",type:"text",name:"name",grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Type",type:"select",name:"type",options:[{id:1,name:"Petrol",value:"petrol"},{id:2,name:"Diesel",value:"diesel"},{id:3,name:"Mobile",value:"mobile"}],grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Cost Price",type:"number",name:"costPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Selling Price",type:"number",name:"sellingPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",name:"status",options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}],grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Product":"Add Product",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Aa=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"type",value:"type"},{id:7,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}];var Za=a(66934),Ia=a(35527),Na=a(36914);const Pa=e=>{let{openDetailsDialog:t,handleOnDelete:a,setOpenDetailsDialog:i,heading:n,icon:l,color:r,state:o,setState:d,file:c,setFile:m,Id:p,handleOnCloseDetails:u,handleOnSubmit:g,inputs:h,message:y}=e;const{darkMode:f,dispatch:j}=(0,s.useContext)(Na.Z),v=((0,Za.ZP)(Ia.Z)((e=>{let{theme:t}=e;return{width:"100%",padding:t.spacing(2),...t.typography.body2}})),e=>{let t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return t=t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),t});return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:r,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",fontWeight:"800"},children:[(0,U.jsxs)(H.Z,{style:{color:r,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"600"},children:[l,n]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{onClick:u,children:(0,U.jsx)(Zt.Z,{})})})]}),(0,U.jsxs)(mt.Z,{children:[(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(q.ZP,{src:h.pic?"http://localhost:5000/public/products/images/".concat(h.pic):"./img/avatarfile.png",size:120,round:!0})}),(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:Object.entries(h).map(((e,t)=>{let[a,s]=e;return((e,t,a)=>"prices"===e&&null!==t?(0,U.jsxs)(K.ZP,{item:!0,xs:12,children:[(0,U.jsx)(x.Z,{variant:"h6",style:{marginBottom:5},children:v(String(e))}),(0,U.jsxs)(K.ZP,{container:!0,spacing:2,style:{paddingLeft:20},children:[console.log(t),t.map(((e,t)=>Object.entries(e).map(((e,t)=>{let[a,s]=e;if("_id"!==a&&"productId"!==a&&"purchaseId"!==a&&"createdOn"!==a&&"__v"!==a&&"date"!==a)return(0,U.jsxs)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:[(0,U.jsxs)(x.Z,{children:[v(String(a))," : ",v(String(s))," "]})," "]},a)}))))]})]},a):"object"!==typeof t&&"_id"!==e&&"createdOn"!==e&&"pic"!==e?(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:(0,U.jsxs)(H.Z,{style:{display:"flex",gap:10},children:[(0,U.jsx)(x.Z,{children:v(String(e))}),"active"===t||"deactive"===t?(0,U.jsx)("div",{style:{background:"active"===t?"#64c72e":"#94928e",color:"white",width:55,textAlign:"center",borderRadius:4},children:v(String(t))}):(0,U.jsx)(x.Z,{children:v(String(t))})]})},a):null)(a,s,t)}))})]})]})})},Ca=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.products.data)),a=(0,r.v9)((e=>e.products.current)),i=(0,r.v9)((e=>e.products.totalRecord)),n=(0,r.v9)((e=>e.products.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,f]=(0,s.useState)({field:"",operator:"",sort:-1}),[j,v]=(0,s.useState)({searchInput:""}),[b,S]=(0,s.useState)({name:"",type:"",costPrice:"",sellingPrice:"",date:"",status:"",pic:""}),[w,A]=(0,s.useState)(""),[Z,I]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,va._0)(u))}),[u]),(0,s.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("http://localhost:5000/public/products/images/".concat(a.pic));A(t)}S({name:a.name,type:a.type,costPrice:a.prices[0].costPrice,sellingPrice:a.prices[0].newSellingPrice,date:a.prices[0].date,status:a.status}),a.pic&&t()}}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,va.Xp)(t)),()=>{e((0,va.kH)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?f({...y,operator:"inBetween"}):"inBetween"===y.operator&&f({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):N()}),[n]);const N=()=>{o(!1),g(null),S({name:"",type:"",costPrice:"",sellingPrice:"",date:"",status:"",pic:""}),A("")};function P(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const E=t.map((e=>({...e,name:e.name&&P(e.name),type:e.type&&P(e.type),status:e.status&&P(e.status)}))),{name:R,type:O,status:F,date:k,costPrice:T,sellingPrice:B}=b;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(C.Z,{style:{marginRight:"10px"}}),title:"Products",subTitle:"Manage Application Products",addBtnTitle:"Add Product",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE PRODUCT":"ADD PRODUCT",color:"#999999",state:b,Id:u,setState:S,file:w,setFile:A,handleOnClose:N,handleOnSubmit:async t=>{if(t.preventDefault(),""===R)(0,vt.Am)("Enter product name",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Select product type",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Enter cost price",{position:"top-right",type:"error"});else if(T<0)(0,vt.Am)("Cost Price can not be negative",{position:"top-right",type:"error"});else if(""===B)(0,vt.Am)("Enter selling price",{position:"top-right",type:"error"});else if(B<0)(0,vt.Am)("Selling Price can not be negative",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Select date",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==w){function a(e){const t=new FormData;return t.append("file",e),t}const s=await at(a(w));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...b};if(i.pic=s.filename,S(i),null!==u){const n={id:u[0],Data:i};e((0,va.nM)(n))}else e((0,va.gK)(i))}}else if(null!==u){const l={id:u[0],Data:b};e((0,va.nM)(l))}else e((0,va.gK)(b))},inputs:wa(u,a),icon:(0,U.jsx)(C.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Pa,{openDetailsDialog:d,heading:a.name,inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>{c(!1)}}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,va.Ir)(u)),g(null)},heading:"DELETE Product",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Product?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,va.Xp)(o)),I(!Z),x(0)):""===n?(e((0,va.Xp)(o)),I(!Z),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,va.Xp)(o)),I(!Z),x(0))},filters:y,setFilter:f,state:j,setState:v,openFiltersPanel:Z,setOpenFiltersPanel:I,loadDataFunc:()=>{e((0,va.Xp)({page:0,sort:-1}))},searchFiltersForm:Aa,searchInputForm:ma}),(0,U.jsx)(J,{columns:Sa(0,c,o),rows:E,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=b,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,va.Xp)(o)):""===n?e((0,va.Xp)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,va.Xp)(o))}})]})]})},Ea=(e,t,a)=>[{id:1,label:"Product Name",type:"select",name:"productId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/products/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Cost Price",type:"number",name:"costPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Selling Price",type:"number",name:"sellingPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Price":"Add New Price",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Ra=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Product",value:"product"},{id:2,name:"date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],Oa=(e,t,a)=>[{field:"name",headerName:"Name",width:200,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.product.pic?"".concat(G.y,"/public/products/images/").concat(e.row.product.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.product.name]})},{field:"costPrice",headerName:"Cost Price",width:120,renderCell:e=>(0,U.jsxs)("div",{children:[console.log(e.row.prices),"Rs. ",e.row.costPrice?e.row.costPrice:""]})},{field:"oldSellingPrice",headerName:"Old Selling Price",width:140,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.oldSellingPrice]})},{field:"newSellingPrice",headerName:"Selling Price",width:120,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.newSellingPrice]})},{field:"differenceValue",headerName:"Difference Amount",width:170,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.differenceValue]})},{field:"date",headerName:"Date",width:120,renderCell:e=>(0,U.jsx)("div",{children:e.row.date})},{field:"action",headerName:"Action",width:110,renderCell:a=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var Fa=a(78638);const ka=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.products.data)),a=(0,r.v9)((e=>e.prices.data)),i=(0,r.v9)((e=>e.products.current)),n=(0,r.v9)((e=>e.prices.totalRecord)),l=(0,r.v9)((e=>e.prices.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[f,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[S,w]=(0,s.useState)({productId:"",costPrice:"",sellingPrice:"",date:""}),[A,Z]=(0,s.useState)(""),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,va._0)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&w({name:i.name,type:i.type,costPrice:i.prices[0].costPrice,sellingPrice:i.prices[0].newSellingPrice,date:i.prices[0].date,status:i.status})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:f.sort};return e((0,va.Xp)(t)),e((0,Fa.vD)(t)),()=>{e((0,Fa.Tl)())}}),[]),(0,s.useEffect)((()=>{"date"===f.field?j({...f,operator:"inBetween"}):"inBetween"===f.operator&&j({...f,operator:"$regex"})}),[f.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[l]);const P=()=>{d(!1),h(null),w({productId:"",costPrice:"",sellingPrice:"",date:""}),Z("")};const R=a.map((e=>({...e}))),{productId:O,date:F,costPrice:k,sellingPrice:T}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(E.Z,{style:{marginRight:"10px"}}),title:"Prices",subTitle:"Manage Application Products Prices",addBtnTitle:"Add Price",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE PRICE":"ADD PRICE",color:"#999999",state:S,Id:g,setState:w,handleOnClose:P,handleOnSubmit:async t=>{t.preventDefault(),""===O?(0,vt.Am)("Select product",{position:"top-right",type:"error"}):""===k?(0,vt.Am)("Enter cost price",{position:"top-right",type:"error"}):k<0?(0,vt.Am)("Cost Price can not be negative",{position:"top-right",type:"error"}):""===T?(0,vt.Am)("Enter selling price",{position:"top-right",type:"error"}):T<0?(0,vt.Am)("Selling Price can not be negative",{position:"top-right",type:"error"}):""===F?(0,vt.Am)("Select date",{position:"top-right",type:"error"}):e((0,Fa.zB)(S))},inputs:Ea(g,i,t),icon:(0,U.jsx)(C.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:0!==Object.keys(i).length&&i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,Fa.oh)(g)),h(null)},heading:"DELETE Product",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Product?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=f;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Fa.vD)(o)),N(!I),y(0)):""===n?(e((0,Fa.vD)(o)),N(!I),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Fa.vD)(o)),N(!I),y(0))},filters:f,setFilter:j,state:v,setState:b,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:()=>{e((0,Fa.vD)({page:0,sort:-1}))},searchFiltersForm:Ra,searchInputForm:ma}),(0,U.jsx)(J,{columns:Oa(u,m),rows:R,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=f;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Fa.vD)(o)):""===n?e((0,Fa.vD)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Fa.vD)(o))}})]})]})};var Ta=a(43992),Ba=a(17568);const za=()=>{const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(t,"-").concat(a,"-").concat(s)},Ua=()=>{var e;const{user:t}=(0,s.useContext)(z.Z),a=(0,r.I0)(),i=(0,r.v9)((e=>e.completeData.products)),n=(0,r.v9)((e=>e.customers.data)),l=(0,r.v9)((e=>e.closings.closed)),o=(0,r.v9)((e=>e.sales.errors)),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,y]=(0,s.useState)(""),[f,j]=(0,s.useState)({name:"",email:"",contact:"",address:"",balance:"",status:"",pic:""}),[b,D]=(0,s.useState)({totalAmount:0,discountAmount:0}),[S,w]=(0,s.useState)({cashierId:t._id,customerId:"",items:[],paymentMethod:"",paidAmount:"",date:""}),[A,Z]=(0,s.useState)(null);console.log("Check the Closed => ",l);const I=e=>Math.round(100*e)/100;(0,s.useEffect)((()=>{a((0,Y.Dg)()),a((0,Pt.OL)({page:0,sort:-1})),a((0,Qt.mZ)()),w({...S,customerId:"668a5306630d3d9a7448d8fe"})}),[]),(0,s.useEffect)((()=>{(null===o||void 0===o?void 0:o.length)>0?o.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):N()}),[o]),(0,s.useEffect)((()=>{(()=>{var e;let t=0,a=0;null===S||void 0===S||null===(e=S.items)||void 0===e||e.forEach((e=>{const s=i.find((t=>t._id===e.productId));if(s){const i=parseFloat(s.price.newSellingPrice)||0,n=parseInt(e.quantity)||0,l=parseFloat(e.discount)||0,r=I(i*n),o=I(r*(l/100));t+=r,a+=o}})),D({totalAmount:I(t),discountAmount:I(a)})})()}),[S]);const N=()=>{c(!1),g(null),w({cashierId:t._id,customerId:"",items:[],paymentMethod:"cash",paidAmount:""})},{cashierId:P,customerId:C,items:E,paymentMethod:R,paidAmount:O}=S,F=e=>{w({...S,[e.target.name]:e.target.value})},k=(e,t)=>{if(S.items.find((e=>e.productId===t.productId))){const a=S.items.map((a=>a.productId===t.productId?{...a,[e.target.name]:e.target.value}:a));w({...S,items:a})}},T=()=>{p(!m)},B=e=>{let t=0;const a=S.items.find((t=>t.productId===e._id));if(a){const s=S.items.map((t=>t.productId===e._id?{...t,quantity:t.quantity+1}:t));w({...S,items:s}),t=I(e.price.newSellingPrice*(a.discount/100))}else{const a={productId:e._id,quantity:1,priceId:e.price._id,discount:0};w({...S,items:[...S.items,a]}),t=I(e.price.newSellingPrice*(a.discount/100))}D({...b,totalAmount:I(b.totalAmount+e.price.newSellingPrice),discountAmount:I(b.discountAmount+t)})},{name:M,balance:W,status:L}=f;return(0,U.jsx)(H.Z,{m:"0px 20px 15px 20px",children:(0,U.jsxs)(K.ZP,{container:!0,className:"posCard",children:[(0,U.jsx)(It,{openFormDialog:d,setOpenFormDialog:c,heading:"ADD CUSTOMER",color:"#999999",state:f,Id:u,setState:j,file:h,setFile:y,handleOnClose:N,handleOnSubmit:async e=>{if(e.preventDefault(),""===M)(0,vt.Am)("Enter Customer name",{position:"top-right",type:"error"});else if(""===W)(0,vt.Am)("Enter initial balance",{position:"top-right",type:"error"});else if(""===L)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==h){function t(e){const t=new FormData;return t.append("file",e),t}const s=await at(t(h));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...f};i.pic=s.filename,w(i),a((0,Pt.Sy)(i))}}else a((0,Pt.Sy)(f))},inputs:Ct(u),icon:(0,U.jsx)(v.Z,{style:{marginRight:"10px"}})}),(0,U.jsxs)(K.ZP,{item:!0,lg:8,className:"productGrid",children:[(0,U.jsx)("h4",{children:"Point of Sale"}),(0,U.jsx)("h4",{children:"Fuel"}),(0,U.jsx)(K.ZP,{container:!0,gap:1,children:i.length>0&&i.map((e=>{var t;if("petrol"===e.type||"diesel"===e.type)return(0,U.jsxs)(K.ZP,{item:!0,lg:2,md:3,xl:3,sm:3,className:"productItems",onClick:()=>B(e),children:[(null===(t=S.items)||void 0===t?void 0:t.length)>0&&S.items.map((t=>e._id===t.productId?(0,U.jsx)(H.Z,{className:"selectedProduct",children:t.quantity},e._id):null)),(0,U.jsx)(q.ZP,{src:"http://localhost:5000/public/products/images/".concat(e.pic),round:!0,size:"60"}),(0,U.jsx)(x.Z,{children:e.name}),(0,U.jsxs)(x.Z,{children:["Rs. ",e.price.newSellingPrice]})]},e._id)}))}),(0,U.jsx)("h4",{style:{marginTop:20},children:"Mobile Oil"}),(0,U.jsx)(K.ZP,{container:!0,gap:1,children:i.length>0&&i.map((e=>{var t,a;if("petrol"!==e.type&&"diesel"!==e.type)return(0,U.jsxs)(K.ZP,{item:!0,lg:2,md:3,xl:3,sm:3,className:"productItems",onClick:()=>B(e),children:[(null===(t=S.items)||void 0===t?void 0:t.length)>0&&S.items.map((t=>e._id===t.productId?(0,U.jsx)(H.Z,{className:"selectedProduct",children:t.quantity},e._id):null)),(0,U.jsx)(q.ZP,{src:"http://localhost:5000/public/products/images/".concat(e.pic),round:!0,size:"60"}),(0,U.jsx)(x.Z,{children:e.name}),(0,U.jsxs)(x.Z,{children:["Rs. ",null===e||void 0===e||null===(a=e.price)||void 0===a?void 0:a.newSellingPrice]})]},e._id)}))})]}),(0,U.jsxs)(K.ZP,{item:!0,lg:4,className:"itemsForm",children:[(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,U.jsx)(H.Z,{className:"title",children:(0,U.jsx)("h4",{children:"Items Entry"})}),(0,U.jsxs)(H.Z,{className:"actionIcons",children:[(0,U.jsx)(Ht.Z,{title:"Add Customer",children:(0,U.jsx)(re.Z,{onClick:()=>c(!0),children:(0,U.jsx)(Ta.Z,{})})}),(0,U.jsx)(Ht.Z,{title:"Refresh / Clear form",children:(0,U.jsx)(re.Z,{onClick:()=>(w({cashierId:t._id,customerId:"668a5306630d3d9a7448d8fe",items:[],paymentMethod:"cash",paidAmount:""}),void D({totalAmount:0,discountAmount:0})),children:(0,U.jsx)(qt.Z,{})})}),(0,U.jsx)(Ht.Z,{title:"Resume Sale",children:(0,U.jsx)(re.Z,{onClick:()=>{null!==A?(w({...A}),Z(null)):(0,vt.Am)("No Sale to Resume",{position:"top-right",type:"warning"})},children:(0,U.jsx)(Gt.Z,{})})})]})]}),(0,U.jsxs)(ye.Z,{style:{width:"100%"},size:"small",children:[(0,U.jsx)(fe.Z,{id:"demo-simple-select-label",children:"Customer"}),(0,U.jsx)(je.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:""!==S.customerId?S.customerId:"",label:"Customer",size:"small",name:"customerId",onChange:e=>F(e),children:n.map((e=>e&&(0,U.jsxs)(ve.Z,{value:e._id,children:[(0,U.jsx)(q.ZP,{src:"http://localhost:5000/public/customers/images/".concat(e.pic),round:!0,size:"30",style:{marginRight:10}}),e.name]},e._id)))})]}),(0,U.jsx)("hr",{style:{marginTop:10,height:1,color:"#666"}}),(0,U.jsx)(H.Z,{className:"itemsContainer",children:(null===(e=S.items)||void 0===e?void 0:e.length)>0&&S.items.map((e=>i.map((t=>e.productId===t._id?(0,U.jsxs)(H.Z,{className:"itemBox",style:{height:m?100:38},children:[(0,U.jsxs)(H.Z,{className:"itemWrapperBox",children:[(0,U.jsxs)(H.Z,{className:"innerItemBox",children:[(0,U.jsx)(re.Z,{style:{padding:1},onClick:T,children:m?(0,U.jsx)(Kt.Z,{}):(0,U.jsx)(Yt.Z,{})}),(0,U.jsx)(x.Z,{style:{marginRight:10,marginLeft:3},children:e.quantity}),(0,U.jsx)(x.Z,{children:t.name})]}),(0,U.jsxs)(H.Z,{className:"innerItemBox",children:[(0,U.jsxs)(x.Z,{style:{marginRight:5},children:["Rs. ",t.price.newSellingPrice]}),(0,U.jsx)(re.Z,{style:{padding:1},onClick:()=>(e=>{console.log("Removing Item Id => ",e._id);const t=S.items.find((t=>t.productId===e._id));if(t){const a=I(e.price.newSellingPrice*(t.discount/100)),s=I(e.price.newSellingPrice*t.quantity),i=S.items.filter((t=>t.productId!==e._id));w({...S,items:i}),D({...b,totalAmount:I(b.totalAmount-s),discountAmount:I(b.discountAmount-a*t.quantity)})}})(t),children:(0,U.jsx)(ht.Z,{style:{fontSize:20}})})]})]}),(0,U.jsxs)(H.Z,{children:[(0,U.jsx)(ue.Z,{label:"Quantity",size:"small",type:"text",name:"quantity",value:e.quantity?e.quantity:"",onChange:t=>k(t,e),style:{width:"48%",marginTop:10,marginRight:4}}),(0,U.jsx)(ue.Z,{label:"Discount %",size:"small",type:"text",name:"discount",value:e.discount?e.discount:"",onChange:t=>k(t,e),style:{width:"48%",marginTop:10}})]})]},e.productId):null))))}),(0,U.jsx)("hr",{style:{marginTop:10,height:1,color:"#666"}}),(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[(0,U.jsx)(x.Z,{children:"Total Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600},children:b.totalAmount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{children:"Discount Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600},children:b.discountAmount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(x.Z,{children:"Payable Amount: "}),(0,U.jsx)(x.Z,{style:{marginRight:10,fontWeight:600},children:I(b.totalAmount-b.discountAmount).toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(ye.Z,{style:{width:"48%",marginRight:7,marginTop:10},size:"small",children:[(0,U.jsx)(fe.Z,{id:"demo-simple-select-label",children:"Payment Type"}),(0,U.jsx)(je.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:S.paymentMethod?S.paymentMethod:"",label:"Payment Type",size:"small",name:"paymentMethod",onChange:e=>F(e),children:[{id:1,name:"Cash",value:"cash"},{id:2,name:"Credit",value:"credit"}].map((e=>e&&(0,U.jsx)(ve.Z,{value:e.value,children:e.name},e.id)))})]}),(0,U.jsx)(ue.Z,{label:"Amount",size:"small",type:"number",name:"paidAmount",value:S.paidAmount?S.paidAmount:"",onChange:e=>F(e),style:{width:"48%",marginTop:10}})]})]}),(0,U.jsxs)(te.Z,{type:"submit",color:"primary",variant:"contained",style:{width:"48%",marginTop:10,marginRight:8},onClick:e=>(e=>{e.preventDefault(),0===S.items.length?(0,vt.Am)("No sale to hold",{position:"top-right",type:"warning"}):(Z({...S}),w({cashierId:t._id,customerId:"668a5306630d3d9a7448d8fe",items:[],paymentMethod:"",paidAmount:""}))})(e),disabled:null!==A,children:["Hold",null!==A&&(0,U.jsx)(H.Z,{style:{position:"absolute",right:-3,top:-3,backgroundColor:"#0496c7",width:20,height:20,fontSize:14,borderRadius:"50%"},children:"1"})]}),(0,U.jsx)(te.Z,{type:"submit",color:"primary",variant:"contained",disabled:l,onClick:e=>(e=>{if(e.preventDefault(),""===P)(0,vt.Am)("Login again user id is missing",{position:"top-right",type:"error"});else if(""===C)(0,vt.Am)("Please select customer",{position:"top-right",type:"error"});else if(E.length<1)(0,vt.Am)("Please select product to sale",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Select any payment method",{position:"top-right",type:"error"});else if("cash"===R&&""===O)(0,vt.Am)("In cash payment method amount can't be null",{position:"top-right",type:"error"});else{const e={...S,date:za()};a((0,Ba.hb)(e))}})(e),style:{width:"48%",marginTop:10},children:"Proceed"})]})]})})},Ma=(e,t,a)=>[{field:"date",headerName:"Date",width:100},{field:"receiptNo",headerName:"Receipt No",width:90},{field:"name",headerName:"Name",width:190,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.customer.pic?"".concat(G.y,"/public/customers/images/").concat(e.row.customer.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.customer.name.length>11?e.row.customer.name.substring(0,11)+"....":e.row.customer.name]})},{field:"product",headerName:"Products Info",width:230,renderCell:e=>{var t;return(0,U.jsx)("div",{style:{width:"100%"},children:(null===(t=e.row.items)||void 0===t?void 0:t.length)>0&&e.row.items.map((e=>(0,U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,U.jsx)("div",{children:null!==e.product?e.product.name:null}),(0,U.jsxs)("div",{children:["Qty. ",e.quantity]})]},e._id)))})}},{field:"paymentMethod",headerName:"Method",width:70,renderCell:e=>(0,U.jsx)("div",{style:{background:"credit"===e.row.paymentMethod?"#ff0000":"#06c90a",color:"white",width:50,textAlign:"center",borderRadius:4},children:e.row.paymentMethod})},{field:"totalAmount",headerName:"Total Amount",width:120,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.totalAmount]})},{field:"paidAmount",headerName:"Paid Amount",width:100,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.paidAmount?e.row.paidAmount:0]})},{field:"action",headerName:"Action",width:90,renderCell:a=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),"open"===a.row.status&&(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],Wa=e=>{let{openDetailsDialog:t,handleOnDelete:a,setOpenDetailsDialog:i,heading:n,icon:l,color:r,state:o,setState:d,file:c,setFile:m,Id:p,handleOnCloseDetails:u,handleOnSubmit:g,inputs:h,message:y}=e;const{darkMode:f,dispatch:j}=(0,s.useContext)(Na.Z);console.log(f);const v=(0,Za.ZP)(Ia.Z)((e=>{let{theme:t}=e;return{width:"100%",padding:t.spacing(2),...t.typography.body2}})),b=e=>{if("string"!==typeof e)return"";const t=e.match(/([A-Z][a-z]+|[a-z]+)/g);if(!t)return e;return t.map(((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" ")};return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:r,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",fontWeight:"800"},children:[(0,U.jsxs)(H.Z,{style:{color:r,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"600"},children:[l,n]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{onClick:u,children:(0,U.jsx)(Zt.Z,{})})})]}),(0,U.jsxs)(mt.Z,{children:[(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(q.ZP,{src:h.customer?"http://localhost:5000/public/customers/images/".concat(h.customer.pic):"./img/avatarfile.png",size:120,round:!0})}),(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:Object.entries(h).map(((e,t)=>{let[a,s]=e;return"object"!==typeof s&&"array"!==typeof s&&"customerId"!==a&&"_id"!==a&&(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:(0,U.jsxs)(H.Z,{style:{display:"flex",gap:10},children:[(0,U.jsx)(x.Z,{children:b(String(a))}),"credit"===s||"cash"===s?(0,U.jsx)("div",{style:{background:"credit"===s?"#ff0000":"#06c90a",color:"white",width:50,textAlign:"center",borderRadius:4},children:s}):(0,U.jsx)(x.Z,{children:b(String(s))})]})},t)}))}),(0,U.jsx)("div",{style:{marginTop:10,height:200,overflow:"auto"},children:Object.entries(h).map(((e,t)=>{let[a,s]=e;return Array.isArray(s)?s.map(((e,t)=>(0,U.jsx)(v,{style:{marginTop:7,color:"dark"===f?"#999":"#222"},children:(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-around"},children:[(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{children:["Quantity: ",e.quantity]}),(0,U.jsxs)(H.Z,{children:["Selling Price: ",e.price.newSellingPrice]})]}),(0,U.jsx)(H.Z,{children:e.product.name}),(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{children:["Total Amount: ",e.quantity*e.price.newSellingPrice]}),(0,U.jsxs)(H.Z,{children:["Discount Amount: ",e.price.newSellingPrice/100*e.discount]})]})]})},"".concat(a,"-").concat(t)))):null}))})]})]})})},La=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Receipt No",value:"receiptNo"},{id:2,name:"Customer Name",value:"name"},{id:3,name:"Product Name",value:"productName"},{id:4,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],_a=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.sales.data)),a=(0,r.v9)((e=>e.sales.current)),i=(0,r.v9)((e=>e.sales.totalRecord)),n=(0,r.v9)((e=>e.sales.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,f]=(0,s.useState)({field:"",operator:"",sort:-1}),[j,v]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[b,D]=(0,s.useState)({name:"",type:"",initialReading:"",currentReading:"",status:""}),[S,w]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,Ba.OD)(u[0]))}),[u]),console.log("Checking the search State ",j),(0,s.useEffect)((()=>{0!==Object.keys(a).length&&D({name:a.name,type:a.type,initialReading:a.initialReading,currentReading:a.currentReading,status:a.status})}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,Ba.X8)(t)),()=>{e((0,Ba.Lu)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?f({...y,operator:"inBetween"}):"inBetween"===y.operator&&f({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0&&n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})}))}),[n]);function A(e){let t=0,a=0;return null===e||void 0===e||e.forEach((e=>{if(!e.price||!e.price.newSellingPrice)return void console.error("Missing price data for item:",e);let s=e.price.newSellingPrice,i=s*e.discount/100,n=s*e.quantity;t+=n,a+=i*e.quantity})),console.log("Total Amount:",t,"Total Discount:",a),{totalAmount:t,totalDiscount:a}}const Z=t.length>0?t.map((e=>({...e,totalAmount:e.items&&A(e.items).totalAmount,totalDiscount:e.items&&A(e.items).totalDiscount,product:e.items}))):[];return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),title:"Sales",subTitle:"Manage Application Sales"}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(Wa,{openDetailsDialog:d,heading:0!==Object.keys(a).length?"Sales Detail of ".concat(a.customer.name):"Sale Details",inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>{c(!1)}}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Ba.pe)(u)),g(null)},heading:"DELETE SALE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Sale?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Ba.X8)(o)),w(!S),x(0)):""===n?(e((0,Ba.X8)(o)),w(!S),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Ba.X8)(o)),w(!S),x(0))},filters:y,setFilter:f,state:j,setState:v,openFiltersPanel:S,setOpenFiltersPanel:w,loadDataFunc:()=>{e((0,Ba.X8)({page:0,sort:-1}))},searchFiltersForm:La,searchInputForm:Ie}),(0,U.jsx)(J,{columns:Ma(p,c),rows:Z,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Ba.X8)(o)):""===n?e((0,Ba.X8)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Ba.X8)(o))}})]})]})},qa=(e,t,a)=>[{field:"supplier",headerName:"Supplier Name",width:230,renderCell:e=>{var t;return(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:null!==(t=e.row.supplier)&&void 0!==t&&t.pic?"".concat(G.y,"/public/suppliers/images/").concat(e.row.supplier.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.supplierName]})}},{field:"productName",headerName:"Product Name",width:150},{field:"quantity",headerName:"Quantity",width:120},{field:"costPrice",headerName:"Cost Price",width:110,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.costPrice]})},{field:"sellingPrice",headerName:"Selling Price",width:110,renderCell:e=>(0,U.jsxs)("div",{children:["Rs. ",e.row.sellingPrice]})},{field:"date",headerName:"Date",width:120,renderCell:e=>(0,U.jsx)("div",{children:e.row.date})},{field:"action",headerName:"Action",width:160,renderCell:t=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],Ga=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.products.data)),a=(0,r.v9)((e=>e.purchases.data)),i=(0,r.v9)((e=>e.suppliers.data)),n=(0,r.v9)((e=>e.purchases.current)),l=(0,r.v9)((e=>e.purchases.totalRecord)),o=(0,r.v9)((e=>e.purchases.errors)),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[y,j]=(0,s.useState)(0),[v,b]=(0,s.useState)({field:"",operator:"",sort:-1}),[S,w]=(0,s.useState)({startDate:"",endDate:"",searchInput:""}),[A,Z]=(0,s.useState)({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""}),[I,N]=(0,s.useState)(""),[P,C]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==h&&!0===d||void 0!==h&&!0===m)&&e((0,ba.sv)(h))}),[h]),(0,s.useEffect)((()=>{0!==Object.keys(n).length&&Z({productId:n.productId,supplierId:n.supplierId,quantity:n.quantity,costPrice:n.costPrice,sellingPrice:n.sellingPrice,paidAmount:n.paidAmount,date:n.date})}),[n]),(0,s.useEffect)((()=>{const t={page:0,sort:v.sort};return e((0,va.Xp)(t)),e((0,ba.GP)(t)),e((0,na.rH)(t)),()=>{e((0,ba.oq)())}}),[]),(0,s.useEffect)((()=>{"date"===v.field?b({...v,operator:"inBetween"}):"inBetween"===v.operator&&b({...v,operator:"$regex"})}),[v.field]),(0,s.useEffect)((()=>{(null===o||void 0===o?void 0:o.length)>0?o.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):R()}),[o]);const E=()=>{e((0,ba.GP)({page:0,sort:-1}))},R=()=>{c(!1),x(null),Z({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""}),N("")};function O(e){return console.log(e),e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const k=a.map((e=>({...e,supplierName:e.supplier&&O(e.supplier.name),productName:e.product&&O(e.product.name)}))),{productId:T,supplierId:B,quantity:z,costPrice:M,sellingPrice:W,paidAmount:L,date:_}=A;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(F.Z,{style:{marginRight:"10px"}}),title:"Purchase History",subTitle:"Manage Application Stocks",addBtnTitle:"Add Stock",dialog:d,setDialog:c}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:d,setOpenFormDialog:c,heading:null!==h&&0!==Object.keys(n).length?"UPDATE STOCK":"ADD STOCK",color:"#999999",state:A,Id:h,setState:Z,handleOnClose:R,handleOnSubmit:async t=>{if(t.preventDefault(),""===T)(0,vt.Am)("Select product",{position:"top-right",type:"error"});else if(""===B)(0,vt.Am)("Select product supplier",{position:"top-right",type:"error"});else if(""===z)(0,vt.Am)("Enter quantity of product",{position:"top-right",type:"error"});else if(""===M)(0,vt.Am)("Enter cost price",{position:"top-right",type:"error"});else if(""===W)(0,vt.Am)("Enter selling price",{position:"top-right",type:"error"});else if(""===L)(0,vt.Am)("Enter amount paid",{position:"top-right",type:"error"});else if(""===_)(0,vt.Am)("Select date ",{position:"top-right",type:"error"});else if(null!==h){const t={id:h[0],Data:A};e((0,ba.CD)(t))}else e((0,ba.I0)(A)),E()},inputs:fa(h,n,t,i),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:m,heading:"Kashif's Detail",inputs:0!==Object.keys(n).length&&n,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:u,setOpenDeleteDialog:g,handleOnDelete:()=>{e((0,ba.uU)(h)),x(null)},heading:"DELETE PURCHASED STOCK",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Purchased Stock?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=v;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,ba.GP)(o)),C(!P),j(0)):""===n?(e((0,ba.GP)(o)),C(!P),j(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,ba.GP)(o)),C(!P),j(0))},filters:v,setFilter:b,state:S,setState:w,openFiltersPanel:P,setOpenFiltersPanel:C,loadDataFunc:E,searchFiltersForm:ja,searchInputForm:ma}),(0,U.jsx)(J,{columns:qa(g,0,c),rows:k,currentPage:y,totalRecords:l,selectedRowId:h,setSelectedRowId:x,handleOnPageChange:t=>{j(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=v;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,ba.GP)(o)):""===n?e((0,ba.GP)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,ba.GP)(o))}})]})]})},$a=()=>{const e=(0,r.I0)(),t=((0,r.v9)((e=>e.machines.data)),(0,r.v9)((e=>e.readings.data))),a=(0,r.v9)((e=>e.machines.current)),i=(0,r.v9)((e=>e.machines.totalRecord)),n=(0,r.v9)((e=>e.readings.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:""}),[S,w]=(0,s.useState)({name:"",type:"",initialReading:"",currentReading:"",status:""}),[Z,I]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,Wt.QS)(u))}),[u]),(0,s.useEffect)((()=>{0!==Object.keys(a).length&&w({name:a.name,type:a.type,initialReading:a.initialReading,currentReading:a.currentReading,status:a.status})}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,Wt.Bb)(t)),e((0,Lt.CL)(t)),()=>{e((0,Wt.PJ)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?j({...y,operator:"inBetween"}):"inBetween"===y.operator&&j({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0?n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):N()}),[n]);const N=()=>{o(!1),g(null),w({name:"",type:"",initialReading:"",currentReading:"",status:""})};function P(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const C=t.map((e=>({...e,name:e.machine.name&&P(e.machine.name),type:e.machine.type&&P(e.machine.type)}))),{name:E,type:R,initialReading:O,currentReading:F,status:k}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(A.Z,{style:{marginRight:"10px"}}),title:"Machine Readings",subTitle:"Manage Application Machines Readings",addBtnTitle:"Add Machine",dialog:l,setDialog:o}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:l,setOpenFormDialog:o,heading:null!==u&&0!==Object.keys(a).length?"UPDATE MACHINE":"ADD MACHINE",color:"#999999",state:S,Id:u,setState:w,handleOnClose:N,handleOnSubmit:async t=>{if(t.preventDefault(),""===E)(0,vt.Am)("Enter machine name",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Select fuel type",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Enter initial reading",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Enter current reading",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Please select status",{position:"top-right",type:"error"});else if(null!==u){const t={id:u[0],Data:S};e((0,Wt.Oq)(t))}else e((0,Wt.m5)(S))},inputs:ga(u,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:d,heading:"Kashif's Detail",inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Lt.K9)(u)),g(null)},heading:"DELETE READING",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Machine Reading?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Wt.Bb)(o)),I(!Z),x(0)):""===n?(e((0,Wt.Bb)(o)),I(!Z),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Wt.Bb)(o)),I(!Z),x(0))},filters:y,setFilter:j,state:v,setState:b,openFiltersPanel:Z,setOpenFiltersPanel:I,loadDataFunc:()=>{e((0,Wt.Bb)({page:0,sort:-1}))},searchFiltersForm:ha,searchInputForm:Ie}),(0,U.jsx)(J,{columns:[{field:"name",headerName:"Machine",width:200},{field:"type",headerName:"Type",width:200},{field:"prevReading",headerName:"Previous Reading",width:200},{field:"newReading",headerName:"Current Reading",width:200},{field:"date",headerName:"Date",width:130}],rows:C,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o)):""===n?e((0,Wt.Bb)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Wt.Bb)(o))}})]})]})},Ka=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.customer.pic?"".concat(G.y,"/public/customers/images/").concat(e.row.customer.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"prevAmount",headerName:"Previous Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.prevAmount]})},{field:"amount",headerName:"Paid Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.amount]})},{field:"remaining",headerName:"Remaining Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.remAmountBefore]})},{field:"date",headerName:"Date",width:150},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),"open"===s.row.status&&(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var Ya=a(23317);const Xa=(e,t,a)=>[{id:1,label:"Customer",type:"select",name:"customerId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"".concat(G.y,"/public/customers/images/").concat(e.pic),avatarAlt:"./img/avatarfile.png",salary:e.balance.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Amount",tabIndex:1,type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:null!==e&&0!==Object.keys(t).length?"Update Customer Payment":"ADD CUSTOMER Payemnt",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Ha=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],Qa=()=>{const e=(0,r.I0)(),{user:t}=(0,s.useContext)(z.Z),a=(0,r.v9)((e=>e.customers.data)),i=(0,r.v9)((e=>e.customerpayments.data)),n=(0,r.v9)((e=>e.customerpayments.current)),l=(0,r.v9)((e=>e.customerpayments.totalRecord)),o=(0,r.v9)((e=>e.customerpayments.errors)),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[y,v]=(0,s.useState)(0),[b,S]=(0,s.useState)({field:"",operator:"",sort:-1}),[w,A]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[Z,I]=(0,s.useState)({cashierId:t._id,customerId:"",amount:"",date:""}),[N,P]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==h&&!0===d||void 0!==h&&!0===m)&&e((0,Ya.cf)(h))}),[h]),(0,s.useEffect)((()=>{0!==Object.keys(n).length&&I({customerId:n.customerId,amount:n.amount,date:n.date})}),[n]),(0,s.useEffect)((()=>{const t={page:0,sort:b.sort};return e((0,Pt.OL)(t)),e((0,Ya.Gr)(t)),()=>{e((0,Ya.tY)())}}),[]),(0,s.useEffect)((()=>{"date"===b.field?S({...b,operator:"inBetween"}):"inBetween"===b.operator&&S({...b,operator:"$regex"})}),[b.field]),(0,s.useEffect)((()=>{(null===o||void 0===o?void 0:o.length)>0?o.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):E()}),[o]);const C=()=>{e((0,Ya.Gr)({page:0,sort:-1}))},E=()=>{c(!1),x(null),I({cashierId:t._id,customerId:"",amount:"",date:""})};const R=i.map((e=>{return{...e,name:e.customer.name&&(t=e.customer.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),remaining:e.customer.balance?e.customer.balance:0};var t})),{cashierId:O,customerId:F,amount:k,date:T}=Z;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(j.Z,{style:{marginRight:"10px"}}),title:"Customer Payments",subTitle:"Manage Application Customers",addBtnTitle:"Add Customer Payment",dialog:d,setDialog:c}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:d,setOpenFormDialog:c,heading:null!==h&&0!==Object.keys(n).length?"UPDATE CUSTOMER PAYMENT":"ADD CUSTOMER PAYMENT",color:"#999999",state:Z,Id:h,setState:I,handleOnClose:E,handleOnSubmit:async t=>{if(t.preventDefault(),""===O)(0,vt.Am)("Please re-login",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Select Customer",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Please enter amount",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Select date",{position:"top-right",type:"error"});else if(null!==h){const t={id:h[0],Data:Z};e((0,Ya.lY)(t))}else e((0,Ya.F6)(Z)),C()},inputs:Xa(h,n,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(n).length&&(0,U.jsx)(Ft,{openDetailsDialog:m,heading:"Kashif's Detail",inputs:n,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:u,setOpenDeleteDialog:g,handleOnDelete:()=>{e((0,Ya.TD)(h)),x(null)},heading:"DELETE CUSTOMER PAYMENT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are you sure you want to delete this payment."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=w,{field:n,operator:l,sort:r}=b;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};console.log(o),"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Ya.Gr)(o)),P(!N),v(0)):""===n?(e((0,Ya.Gr)(o)),P(!N),v(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(console.log("New State => ",o),e((0,Ya.Gr)(o)),P(!N),v(0))},filters:b,setFilter:S,state:w,setState:A,openFiltersPanel:N,setOpenFiltersPanel:P,loadDataFunc:C,searchFiltersForm:Ha,searchInputForm:Rt}),(0,U.jsx)(J,{columns:Ka(g,p,c),rows:R,currentPage:y,totalRecords:l,selectedRowId:h,setSelectedRowId:x,handleOnPageChange:t=>{v(t);const{startDate:a,endDate:s,searchInput:i}=Z,{field:n,operator:l,sort:r}=b;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Ya.Gr)(o)):""===n?e((0,Ya.Gr)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Ya.Gr)(o))}})]})]})};var Va=a(24697);const Ja=(e,t,a)=>[{id:1,label:"Supplier",type:"select",name:"supplierId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/suppliers/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Amount",tabIndex:1,type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:null!==e&&0!==Object.keys(t).length?"Update Supplier Payment":"ADD Supplier Payemnt",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],es=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],ts=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.pic?"".concat(G.y,"/public/suppliers/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"prevAmount",headerName:"Previous Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.prevAmount]})},{field:"amount",headerName:"Paid Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.amount]})},{field:"remaining",headerName:"Remaining Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.remaining]})},{field:"date",headerName:"Date",width:150},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],as=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.suppliers.data)),a=(0,r.v9)((e=>e.supplierpayments.data)),i=(0,r.v9)((e=>e.supplierpayments.current)),n=(0,r.v9)((e=>e.supplierpayments.totalRecord)),l=(0,r.v9)((e=>e.supplierpayments.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[v,b]=(0,s.useState)({field:"",operator:"",sort:-1}),[S,w]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[A,Z]=(0,s.useState)({supplierId:"",amount:"",date:""}),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,Va.UA)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&Z({supplierId:i.supplierId,amount:i.amount,date:i.date})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:v.sort};return e((0,na.rH)(t)),e((0,Va.O6)(t)),()=>{e((0,Va.KA)())}}),[]),(0,s.useEffect)((()=>{"date"===v.field?b({...v,operator:"inBetween"}):"inBetween"===v.operator&&b({...v,operator:"$regex"})}),[v.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):C()}),[l]);const P=()=>{e((0,Va.O6)({page:0,sort:-1}))},C=()=>{d(!1),h(null),Z({supplierId:"",amount:"",date:""})};const E=a.map((e=>{return{...e,name:e.supplier.name&&(t=e.supplier.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),remaining:e.supplier.balance?e.supplier.balance:0};var t})),{supplierId:R,amount:O,date:F}=A;return window.addEventListener("keydown",(e=>{e.ctrlKey&&"a"===e.key?(e.preventDefault(),d(!0)):"Delete"===e.key&&(null===g||""===g?(0,vt.Am)("Select Customer first",{position:"top-right",type:"error"}):u(!0))})),(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(j.Z,{style:{marginRight:"10px"}}),title:"Supplier Payments",subTitle:"Manage Application Supplier Payments",addBtnTitle:"Add Supplier Payment",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE SUPPLIER PAYMENT":"ADD SUPPLIER PAYMENT",color:"#999999",state:A,Id:g,setState:Z,handleOnClose:C,handleOnSubmit:async t=>{if(t.preventDefault(),""===R)(0,vt.Am)("Select Supplier ",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Please enter amount",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Select date",{position:"top-right",type:"error"});else if(null!==g){const t={id:g[0],Data:A};e((0,Va.fm)(t))}else e((0,Va.TT)(A)),P()},inputs:Ja(g,i,t),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(i).length&&(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,Va.Fu)(g)),h(null)},heading:"DELETE SUPPLIER PAYMENT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are you sure you want to delete this payment."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=v;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Va.O6)(o)),N(!I),y(0)):""===n?(e((0,Va.O6)(o)),N(!I),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(console.log("New State => ",o),e((0,Va.O6)(o)),N(!I),y(0))},filters:v,setFilter:b,state:S,setState:w,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:P,searchFiltersForm:es,searchInputForm:Ie}),(0,U.jsx)(J,{columns:ts(u,m,d),rows:E,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=A,{field:n,operator:l,sort:r}=v;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Va.O6)(o)):""===n?e((0,Va.O6)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Va.O6)(o))}})]})]})};var ss=a(11292);const is=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.employee.pic?"".concat(G.y,"/public/employees/images/").concat(e.row.employee.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"advanceDeducted",headerName:"Advance Deducted",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.advanceDeducted]})},{field:"grossSalary",headerName:"Gross Salary",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.grossSalary]})},{field:"netSalary",headerName:"Net Salary",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.netSalary]})},{field:"salaryOfMonth",headerName:"Month of",width:100},{field:"salaryOfYear",headerName:"Year",width:100},{field:"action",headerName:"Action",width:100,renderCell:t=>(0,U.jsx)("div",{className:"cellAction",children:(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})})}],ns=(e,t,a)=>[{id:1,label:"Employee",type:"select",name:"employeeId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"".concat(G.y,"/public/employees/images/").concat(e.pic),avatarAlt:"./img/avatarfile.png",designation:e.designation,salary:e.salary}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Advance Deduct",tabIndex:1,type:"number",name:"advanceDeducted",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Month of Salary",type:"month",name:"salaryOfMonth",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Paid",value:"paid"},{id:2,name:"Un Paid",value:"pending"}]},{id:6,label:null!==e&&0!==Object.keys(t).length?"Update Employee Salary":"ADD Employee Salary",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],ls=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.completeData.employees)),a=(0,r.v9)((e=>e.salaries.data)),i=(0,r.v9)((e=>e.supplierpayments.current)),n=(0,r.v9)((e=>e.salaries.totalRecord)),l=(0,r.v9)((e=>e.supplierpayments.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[v,b]=(0,s.useState)({field:"",operator:"",sort:-1}),[S,w]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[A,Z]=(0,s.useState)({employeeId:"",advanceDeducted:0,salaryOfMonth:Qe()().format("MMM"),salaryOfYear:Qe()().format("YYYY"),date:""}),[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,Va.UA)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&Z({supplierId:i.supplierId,amount:i.amount,date:i.date})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:v.sort};return e((0,Y.XA)()),e((0,ss.cX)(t)),()=>{e((0,ss.f6)())}}),[]),(0,s.useEffect)((()=>{"date"===v.field?b({...v,operator:"inBetween"}):"inBetween"===v.operator&&b({...v,operator:"$regex"})}),[v.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[l]);const P=()=>{d(!1),h(null),Z({employeeId:"",advanceDeducted:0,salaryOfMonth:Qe()().format("MMM"),salaryOfYear:Qe()().format("YYYY"),date:""})};const C=a.map((e=>{return{...e,name:e.employee.name&&(t=e.employee.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),remaining:e.employee.balance?e.employee.balance:0};var t})),{employeeId:E,advanceDeducted:R,salaryOfMonth:O,date:F}=A;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(j.Z,{style:{marginRight:"10px"}}),title:"Employee Salaries",subTitle:"Manage Application Employee Salary",addBtnTitle:"Add Salary",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE EMPLOYEE SALARY":"ADD EMPLOYEE SALARY",color:"#999999",state:A,Id:g,setState:Z,handleOnClose:P,handleOnSubmit:async t=>{if(t.preventDefault(),""===E)(0,vt.Am)("Select employee first ",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Please enter advance deducted or Zero",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Please select salary of month",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Select date",{position:"top-right",type:"error"});else if(null!==g){const t={id:g[0],Data:A};e((0,ss.dd)(t)),P()}else e((0,ss.MF)(A)),P()},inputs:ns(g,i,t),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(i).length&&(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,ss.Xh)(g)),h(null)},heading:"DELETE EMPLOYEE SALARY",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are you sure you want to delete this salary."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=v;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Va.O6)(o)),N(!I),y(0)):""===n?(e((0,Va.O6)(o)),N(!I),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(console.log("New State => ",o),e((0,Va.O6)(o)),N(!I),y(0))},filters:v,setFilter:b,state:S,setState:w,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:()=>{e((0,Va.O6)({page:0,sort:-1}))},searchFiltersForm:Ha,searchInputForm:Rt}),(0,U.jsx)(J,{columns:is(u),rows:C,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=A,{field:n,operator:l,sort:r}=v;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Ya.Gr)(o)):""===n?e((0,Ya.Gr)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Ya.Gr)(o))}})]})]})};var rs=a(8466);const os=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.employee.pic?"".concat(G.y,"/public/employees/images/").concat(e.row.employee.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"advanceDeducted",headerName:"Total Adv Amount ",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.amount]})},{field:"totAdvanceReturned",headerName:"Returned Advance",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.totAdvanceReturned]})},{field:"remainingAdvance",headerName:"Rem: Advance",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.remainingAdvance]})},{field:"grossSal",headerName:"Date",width:110,renderCell:e=>(0,U.jsx)("div",{className:"cellAction",children:e.row.date})},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,U.jsx)("div",{style:{background:"pending"===e.row.status?"#ff0000":"#06c90a",color:"white",width:60,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:100,renderCell:a=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}],ds=(e,t,a)=>[{id:1,label:"Employee ",type:"select",name:"employeeId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/employees/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Amount",type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:null!==e&&0!==Object.keys(t).length?"Update Employee Advance":"ADD Employee Advance",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}];var cs=a(19910);const ms=(e,t,a)=>[{id:1,label:"Select Advance",type:"select",name:"advanceId",options:a.length>0&&a.map((e=>({id:e._id,name:e.employee.name,date:e.date,amount:e.amount,remAdv:e.remainingAdvance,value:e._id,avatarUrl:"http://localhost:5000/public/employees/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Amount",type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:null!==e&&0!==Object.keys(t).length?"Update Advance Payment":"Pay Advance",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],ps=e=>{let{openDetailsDialog:t,heading:a,icon:i,color:n,handleOnCloseDetails:l,inputs:r}=e;const{darkMode:o,dispatch:d}=(0,s.useContext)(Na.Z);console.log(o);const c=(0,Za.ZP)(Ia.Z)((e=>{let{theme:t}=e;return{width:"100%",padding:t.spacing(2),...t.typography.body2}})),m=e=>{if("string"!==typeof e)return"";const t=e.match(/([A-Z][a-z]+|[a-z]+)/g);if(!t)return e;return t.map(((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" ")};return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(dt.Z,{open:t,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsxs)(ut.Z,{id:"alert-dialog-title",style:{color:n,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",fontWeight:"800"},children:[(0,U.jsxs)(H.Z,{style:{color:n,display:"flex",alignItems:"center",fontSize:"16px",fontWeight:"600"},children:[i,a]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{onClick:l,children:(0,U.jsx)(Zt.Z,{})})})]}),(0,U.jsxs)(mt.Z,{children:[console.log(r),(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px",paddingBottom:"8px"},children:(0,U.jsx)(q.ZP,{src:r.employee&&""!==r.employee.pic?"http://localhost:5000/public/employees/images/".concat(r.employee.pic):"./img/avatarfile.png",size:120,round:!0})}),(0,U.jsx)(K.ZP,{container:!0,spacing:2,children:Object.entries(r).map(((e,t)=>{let[a,s]=e;return"object"!==typeof s&&"array"!==typeof s&&"employeeId"!==a&&"_id"!==a&&(0,U.jsx)(K.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:(0,U.jsxs)(H.Z,{style:{display:"flex",gap:10},children:[(0,U.jsx)(x.Z,{children:m(String(a))}),"partial"===s||"pending"===s?(0,U.jsx)("div",{style:{background:"partial"===s?"#ff7912":"#2486d1",color:"white",width:60,textAlign:"center",borderRadius:4},children:s}):(0,U.jsx)(x.Z,{children:m(String(s))})]})},t)}))}),(0,U.jsx)("div",{style:{marginTop:10,height:200,overflow:"auto"},children:Object.entries(r).map(((e,t)=>{let[a,s]=e;return Array.isArray(s)?s.map(((e,t)=>(0,U.jsx)(c,{style:{marginTop:7,color:"dark"===o?"#999":"#222"},children:(0,U.jsxs)(H.Z,{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[(0,U.jsxs)(H.Z,{children:[(0,U.jsxs)(H.Z,{children:["Date: ",e.date]}),(0,U.jsxs)(H.Z,{children:["Method: ",m(e.method)]})]}),(0,U.jsxs)(H.Z,{children:["Amount: ","Rs. ".concat(e.amount)]}),(0,U.jsx)(H.Z,{children:(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>console.log("Deleted..."),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})})]})},"".concat(a,"-").concat(t)))):null}))})]})]})})},us=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.completeData.employees)),a=(0,r.v9)((e=>e.completeData.advances)),i=(0,r.v9)((e=>e.advances.data)),n=(0,r.v9)((e=>e.advances.current)),l=(0,r.v9)((e=>e.advances.totalRecord)),o=(0,r.v9)((e=>e.advances.errors)),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[b,D]=(0,s.useState)(0),[S,w]=(0,s.useState)({field:"",operator:"",sort:-1}),[A,Z]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[N,P]=(0,s.useState)({employeeId:"",advanceId:"",amount:0,date:""}),[C,E]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==y&&!0===d||void 0!==y&&!0===u)&&e((0,cs.lf)(y))}),[y]),(0,s.useEffect)((()=>{0!==Object.keys(n).length&&P({supplierId:n.supplierId,amount:n.amount,date:n.date})}),[n]),(0,s.useEffect)((()=>{const t={page:0,sort:S.sort};return e((0,Y.XA)()),e((0,Y.hx)()),e((0,cs.tD)(t)),()=>{e((0,ss.f6)())}}),[]),(0,s.useEffect)((()=>{"date"===S.field?w({...S,operator:"inBetween"}):"inBetween"===S.operator&&w({...S,operator:"$regex"})}),[S.field]),(0,s.useEffect)((()=>{(null===o||void 0===o?void 0:o.length)>0?o.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):R()}),[o]);const R=()=>{c(!1),p(!1),v(null),P({employeeId:"",advanceId:"",amount:0,date:""})};const O=i.map((e=>{return{...e,name:e.employee.name&&(t=e.employee.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),remaining:e.employee.balance?e.employee.balance:0};var t})),{employeeId:F,advanceId:k,amount:T,date:B}=N,z=async t=>{t.preventDefault(),""===F&&""===k?""===F?(0,vt.Am)("Select employee first ",{position:"top-right",type:"error"}):(0,vt.Am)("Select advance first ",{position:"top-right",type:"error"}):""===T||0===T?(0,vt.Am)("Please amount given as advance",{position:"top-right",type:"error"}):""===B?(0,vt.Am)("Select date",{position:"top-right",type:"error"}):""!==F?e((0,cs.wL)(N)):""!==k&&e((0,cs.am)(N))};return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(j.Z,{style:{marginRight:"10px"}}),title:"Employee Advance",subTitle:"Manage Employee Advances",addBtnTitle:"Add Advance",secondaryBtnTitle:"Pay Advance",dialog:d,secondaryDialog:m,btnIcon:(0,U.jsx)(j.Z,{}),secondaryBtnIcon:(0,U.jsx)(rs.Z,{style:{marginRight:"10px"}}),setDialog:c,setSecondaryDialog:p}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(ps,{openDetailsDialog:u,heading:0!==Object.keys(n).length?"Advance Detail of ".concat(n.employee.name):"Advance Details",inputs:0!==Object.keys(n).length&&n,icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>g(!1)}),d&&(0,U.jsx)(It,{openFormDialog:d,heading:null!==y&&0!==Object.keys(n).length?"UPDATE EMPLOYEE ADVANCE":"ADD EMPLOYEE ADVANCE",color:"#999999",state:N,setState:P,handleOnClose:R,handleOnSubmit:z,inputs:ds(y,n,t),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(It,{openFormDialog:m,heading:null!==y&&!0===m&&0!==Object.keys(n).length?"UPDATE Advance Payment":"PAY EMPLOYEE ADVANCE",color:"#999999",state:N,setState:P,handleOnClose:R,handleOnSubmit:z,inputs:ms(y,n,a),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:h,setOpenDeleteDialog:x,handleOnDelete:()=>{e((0,Va.Fu)(y)),v(null)},heading:"DELETE EMPLOYEE PAYMENT",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are you sure you want to delete this payment."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=A,{field:n,operator:l,sort:r}=S;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Va.O6)(o)),E(!C),D(0)):""===n?(e((0,Va.O6)(o)),E(!C),D(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(console.log("New State => ",o),e((0,Va.O6)(o)),E(!C),D(0))},filters:S,setFilter:w,state:A,setState:Z,openFiltersPanel:C,setOpenFiltersPanel:E,loadDataFunc:()=>{e((0,Va.O6)({page:0,sort:-1}))},searchFiltersForm:Ha,searchInputForm:Rt}),(0,U.jsx)(J,{columns:os(x,g),rows:O,currentPage:b,totalRecords:l,selectedRowId:y,setSelectedRowId:v,handleOnPageChange:t=>{D(t);const{startDate:a,endDate:s,searchInput:i}=N,{field:n,operator:l,sort:r}=S;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,cs.tD)(o)):""===n?e((0,cs.tD)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,cs.tD)(o))}})]})]})};var gs=a(27955);const hs=(e,t,a)=>[{field:"name",headerName:"Expense Name",width:230},{field:"description",headerName:"Description",width:300},{field:"amount",headerName:"Amount",width:150,renderCell:e=>(0,U.jsxs)("div",{className:"cellAction",children:["Rs. ",e.row.amount]})},{field:"date",headerName:"Date",width:150},{field:"action",headerName:"Action",width:130,renderCell:t=>(0,U.jsxs)("div",{className:"cellAction",children:["open"===t.row.status&&(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})}),"open"===t.row.status&&(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var xs=a(97603);const ys=(e,t)=>[{id:1,label:"Expense Name",type:"text",name:"name",grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Amount",type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Description",type:"text",name:"description",grid:{xs:12,sm:12,md:12,lg:12}},{id:5,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:6,label:null!==e&&0!==Object.keys(t).length?"Update Expense":"Add Expense",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],fs=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Description",value:"description"},{id:3,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],js=()=>{const e=(0,r.I0)(),{user:t}=(0,s.useContext)(z.Z),a=(0,r.v9)((e=>e.expenses.data)),i=(0,r.v9)((e=>e.expenses.current)),n=(0,r.v9)((e=>e.expenses.totalRecord)),l=(0,r.v9)((e=>e.expenses.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[j,v]=(0,s.useState)({field:"",operator:"",sort:-1}),[b,S]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[w,A]=(0,s.useState)({cashierId:t._id,name:"",description:"",amount:"",date:""}),Z=e=>Math.round(100*e)/100,[I,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,xs.dw)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&A({name:i.name,description:i.description,amount:i.amount,date:i.date})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:j.sort};return e((0,xs.T4)(t)),()=>{e((0,xs.bv)())}}),[]),(0,s.useEffect)((()=>{"date"===j.field?v({...j,operator:"inBetween"}):"inBetween"===j.operator&&v({...j,operator:"$regex"})}),[j.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):C()}),[l]);const P=()=>{e((0,xs.T4)({page:0,sort:-1}))},C=()=>{d(!1),h(null),A({cashierId:t._id,name:"",description:"",amount:"",date:""})};console.log(w);function E(e){return e.split(" ").map(((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1):e)).join(" ")}const R=a.map((e=>({...e,name:e.name&&E(e.name),description:e.description&&E(e.description)}))),{name:O,description:F,amount:k,date:T}=w;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(gs.Z,{style:{marginRight:"10px"}}),title:"Expenses",subTitle:"Manage Expenses",addBtnTitle:"Add Expense",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE EXPENSE":"ADD EXPENSE",color:"#999999",state:w,Id:g,setState:A,handleOnClose:C,handleOnSubmit:async t=>{if(t.preventDefault(),""===O)(0,vt.Am)("Enter expense name",{position:"top-right",type:"error"});else if(""===F)(0,vt.Am)("Enter description",{position:"top-right",type:"error"});else if(""===k)(0,vt.Am)("Enter amount expend",{position:"top-right",type:"error"});else if(""===T)(0,vt.Am)("Select date please",{position:"top-right",type:"error"});else{let t={...w,amount:Z(k)};if(null!==g){const a={id:g[0],Data:t};e((0,xs.E)(a))}else{let t={...w,amount:Z(k)};e((0,xs.ai)(t)),P()}}},inputs:ys(g,i),icon:(0,U.jsx)(f.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:0!==Object.keys(i).length&&i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,xs.vu)(g)),h(null)},heading:"DELETE EXPENSE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Expense?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=b,{field:n,operator:l,sort:r}=j;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,xs.T4)(o)),N(!I),y(0)):""===n?(e((0,xs.T4)(o)),N(!I),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,xs.T4)(o)),N(!I),y(0))},filters:j,setFilter:v,state:b,setState:S,openFiltersPanel:I,setOpenFiltersPanel:N,loadDataFunc:P,searchFiltersForm:fs,searchInputForm:Ie}),(0,U.jsx)(J,{columns:hs(u),rows:R,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=b,{field:n,operator:l,sort:r}=j;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,xs.T4)(o)):""===n?e((0,xs.T4)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,xs.T4)(o))}})]})]})},vs=(e,t,a)=>[{field:"name",headerName:"Name",width:300,renderCell:e=>(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:e.row.product.pic?"".concat(G.y,"/public/products/images/").concat(e.row.product.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.product.name]})},{field:"quantity",headerName:"Quantity",width:250},{field:"date",headerName:"Date",width:250},{field:"action",headerName:"Action",width:160,renderCell:s=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,U.jsx)(wt.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var bs=a(92784);const Ds=(e,t,a)=>[{id:1,label:"Product Name",type:"select",name:"productId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/products/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:3,label:"Quantity",type:"number",name:"quantity",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Wastage":"Add Wastage",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Ss=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Product",value:"product"},{id:2,name:"date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],ws=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.products.data)),a=(0,r.v9)((e=>e.wastages.data)),i=(0,r.v9)((e=>e.wastages.current)),n=(0,r.v9)((e=>e.wastages.totalRecord)),l=(0,r.v9)((e=>e.wastages.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[f,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[S,w]=(0,s.useState)({productId:"",quantity:"",date:""}),[A,Z]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,bs.CD)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&w({productId:i.productId,quantity:i.quantity,date:i.date})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:f.sort};return e((0,va.Xp)(t)),e((0,bs.r8)(t)),()=>{e((0,bs.tU)())}}),[]),(0,s.useEffect)((()=>{"date"===f.field?j({...f,operator:"inBetween"}):"inBetween"===f.operator&&j({...f,operator:"$regex"})}),[f.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):N()}),[l]);const I=()=>{e((0,bs.r8)({page:0,sort:-1}))},N=()=>{d(!1),h(null),w({productId:"",quantity:"",date:""})};const P=a.length>0&&a.map((e=>{return{...e,productName:e.product.name&&(t=e.product.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))};var t})),{productId:C,quantity:E,date:R}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(k.Z,{style:{marginRight:"10px"}}),title:"Stock Wastages",subTitle:"Manage Stock Wastage",addBtnTitle:"Add Wastage",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE WASTAGE":"ADD WASTAGE",color:"#999999",state:S,Id:g,setState:w,handleOnClose:N,handleOnSubmit:async t=>{if(t.preventDefault(),""===C)(0,vt.Am)("Select product please",{position:"top-right",type:"error"});else if(""===E)(0,vt.Am)("Enter wastage quantity",{position:"top-right",type:"error"});else if(E<0)(0,vt.Am)("Quantity can not be negative",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Select date please",{position:"top-right",type:"error"});else if(null!==g){const t={id:g[0],Data:S};e((0,bs.mr)(t))}else e((0,bs.bd)(S)),I()},inputs:Ds(g,i,t),icon:(0,U.jsx)(k.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:0!==Object.keys(i).length&&i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,bs.vb)(g)),h(null)},heading:"DELETE WASTAGE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Wastage Entry?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=f;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,bs.r8)(o)),Z(!A),y(0)):""===n?(e((0,bs.r8)(o)),Z(!A),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,bs.r8)(o)),Z(!A),y(0))},filters:f,setFilter:j,state:v,setState:b,openFiltersPanel:A,setOpenFiltersPanel:Z,loadDataFunc:I,searchFiltersForm:Ss,searchInputForm:ma}),(0,U.jsx)(J,{columns:vs(u,m,d),rows:P,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=f;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,bs.r8)(o)):""===n?e((0,bs.r8)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,bs.r8)(o))}})]})]})},As=(e,t,a)=>[{field:"name",headerName:"Name",width:300,renderCell:e=>{var t;return(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:null!==(t=e.row)&&void 0!==t&&t.product.pic?"".concat(G.y,"/public/products/images/").concat(e.row.product.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.product.name]})}},{field:"dip",headerName:"Dip Reading",width:250},{field:"date",headerName:"Date",width:250},{field:"action",headerName:"Action",width:160,renderCell:t=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,U.jsx)(ie.Z,{style:{fontSize:"20px"}})}),(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})]})}];var Zs=a(60800);const Is=(e,t,a)=>[{id:1,label:"Product Name",type:"select",name:"productId",options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"http://localhost:5000/public/products/images/".concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:3,label:"Dip Reading",type:"number",name:"dip",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Dip":"Add Dip",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],Ns=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.products.data)),a=(0,r.v9)((e=>e.dips.data)),i=(0,r.v9)((e=>e.dips.current)),n=(0,r.v9)((e=>e.dips.totalRecord)),l=(0,r.v9)((e=>e.dips.errors)),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0),[f,j]=(0,s.useState)({field:"",operator:"",sort:-1}),[v,b]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[S,w]=(0,s.useState)({productId:"",dip:"",date:""}),[A,Z]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==g&&!0===o||void 0!==g&&!0===c)&&e((0,Zs.LF)(g))}),[g]),(0,s.useEffect)((()=>{0!==Object.keys(i).length&&w({productId:i.productId,dip:i.dip,date:i.date})}),[i]),(0,s.useEffect)((()=>{const t={page:0,sort:f.sort};return e((0,va.Xp)(t)),e((0,Zs.zu)(t)),()=>{e((0,Zs.Il)())}}),[]),(0,s.useEffect)((()=>{"date"===f.field?j({...f,operator:"inBetween"}):"inBetween"===f.operator&&j({...f,operator:"$regex"})}),[f.field]),(0,s.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)>0?l.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})})):P()}),[l]);const N=()=>{e((0,Zs.zu)({page:0,sort:-1}))},P=()=>{d(!1),h(null),w({productId:"",dip:"",date:""})};const C=a.map((e=>{return{...e,productName:e.product.name&&(t=e.product.name,t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))};var t})),{productId:E,dip:R,date:O}=S;return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),title:"Dips Record",subTitle:"Manage Stock Dips",addBtnTitle:"Add Dip",dialog:o,setDialog:d}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(It,{openFormDialog:o,setOpenFormDialog:d,heading:null!==g&&0!==Object.keys(i).length?"UPDATE DIP":"ADD DIP",color:"#999999",state:S,Id:g,setState:w,handleOnClose:P,handleOnSubmit:async t=>{if(t.preventDefault(),""===E)(0,vt.Am)("Select product please",{position:"top-right",type:"error"});else if(""===R)(0,vt.Am)("Enter wastage quantity",{position:"top-right",type:"error"});else if(R<0)(0,vt.Am)("Quantity can not be negative",{position:"top-right",type:"error"});else if(""===O)(0,vt.Am)("Select date please",{position:"top-right",type:"error"});else if(null!==g){const t={id:g[0],Data:S};e((0,Zs.QM)(t))}else e((0,Zs.DZ)(S)),N()},inputs:Is(g,i,t),icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(Ft,{openDetailsDialog:c,heading:"Kashif's Detail",inputs:0!==Object.keys(i).length&&i,icon:(0,U.jsx)(D.Z,{style:{marginRight:"10px"}})}),(0,U.jsx)(gt,{openDeleteDialog:p,setOpenDeleteDialog:u,handleOnDelete:()=>{e((0,Zs.hd)(g)),h(null)},heading:"DELETE DIP READING",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Dip Reading?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=v,{field:n,operator:l,sort:r}=f;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Zs.zu)(o)),Z(!A),y(0)):""===n?(e((0,Zs.zu)(o)),Z(!A),y(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Zs.zu)(o)),Z(!A),y(0))},filters:f,setFilter:j,state:v,setState:b,openFiltersPanel:A,setOpenFiltersPanel:Z,loadDataFunc:N,searchFiltersForm:Ss,searchInputForm:ma}),(0,U.jsx)(J,{columns:As(u,0,d),rows:C,currentPage:x,totalRecords:n,selectedRowId:g,setSelectedRowId:h,handleOnPageChange:t=>{y(t);const{startDate:a,endDate:s,searchInput:i}=S,{field:n,operator:l,sort:r}=f;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Zs.zu)(o)):""===n?e((0,Zs.zu)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Zs.zu)(o))}})]})]})},Ps=[{field:"description",headerName:"Description",width:350,headerAlign:"center",renderCell:e=>(0,U.jsx)("div",{className:"cellWithImg",children:e.row.heading?(0,U.jsx)("div",{style:{fontWeight:800},children:e.row.heading}):(0,U.jsx)("div",{children:e.row.description})})},{field:"quantity",headerName:"Liters/Qty",width:250,headerAlign:"center"},{field:"amount",headerName:"Amount",width:170,headerAlign:"center",renderCell:e=>{var t,a;return(0,U.jsx)("div",{className:"cellWithImg",children:(null===(t=e.row)||void 0===t?void 0:t.amount)&&(0,U.jsxs)("span",{children:[" Rs. ",null===(a=e.row)||void 0===a?void 0:a.amount]})})}},{field:"profit",headerName:"Profit",width:170,headerAlign:"center",renderCell:e=>{var t;return(0,U.jsx)("div",{className:"cellWithImg",children:null!==(t=e.row)&&void 0!==t&&t.grossTotalProfit?(0,U.jsxs)("div",{style:{fontWeight:800},children:["Rs. ",e.row.grossTotalProfit]}):(0,U.jsxs)("div",{children:[" ",e.row.totalProfit&&(0,U.jsxs)("span",{children:[" Rs. ",e.row.totalProfit]})]})})}}];var Cs=a(27152);const Es=e=>[{id:1,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:4}},{id:2,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:4}},{id:3,label:"Filter",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}},{id:4,label:"Print",type:"button",btntype:"button",variant:"contained",btnFunc:e,color:"primary",grid:{xs:12,sm:2}}];function Rs(){const e=(0,r.I0)(),t=(0,r.v9)((e=>e.reports.data)),[a,i]=((0,r.v9)((e=>e.reports.totalRecord)),(0,s.useState)({startDate:"",endDate:""}));let n=[];t.map((e=>{for(let t=0;t<Object.keys(e).length;t++)if("products"===Object.keys(e)[t]){let a=[...e[Object.keys(e)[t]]].map((e=>({...e,id:e._id})));a.unshift({id:1001,heading:"Products"}),n.push(...a)}else if("grossTotal"===Object.keys(e)[t]){let a=[...e[Object.keys(e)[t]]].map((e=>({...e,id:e._id})));a.unshift({id:1002,heading:"Gross Totals"}),n.push(...a)}else if("expenseData"===Object.keys(e)[t]){let a=[...e[Object.keys(e)[t]]].map((e=>({...e,id:e._id})));a.unshift({id:1003,heading:"Total Expense"}),n.push(...a)}else if("recovery"===Object.keys(e)[t]){let a=[...e[Object.keys(e)[t]]].map((e=>({...e,id:e._id})));a.unshift({id:1005,heading:"Recovery"}),n.push(...a)}console.log("check row item => ",Object.keys(e)[1])}));const l=n.map((e=>({...e})));console.log(n);return(0,U.jsxs)(H.Z,{m:"0px 20px 20px 20px",children:[(0,U.jsx)(se,{title:"Reports",subTitle:"Generate Statement or Report",icon:(0,U.jsx)(R.Z,{})}),(0,U.jsx)(H.Z,{sx:{paddingLeft:3,paddingRight:3},children:(0,U.jsx)(Ve,{inputs:Es((async()=>{async function e(e){const{startDate:t,endDate:a}=e;try{const e=await tt().get("".concat(G.b.GENREPORT,"?startDate=").concat(t,"&endDate=").concat(a),{responseType:"blob"}),s=new Blob([e.data],{type:"application/pdf"}),i=window.URL.createObjectURL(s);window.open(i,"_blank"),window.URL.revokeObjectURL(i)}catch(s){console.error("Error fetching the PDF:",s)}}try{const{startDate:t,endDate:s}=a;if(""===t&&""===s)(0,vt.Am)("Please select date first",{position:"top-right",type:"error"});else if(""!==t&&""!==s){e({startDate:t,endDate:s})}else if(""!==t&&""===s){e({startDate:t,endDate:t})}else if(""===t&&""!==s){e({startDate:s,endDate:s})}}catch(t){console.error("Error fetching the PDF:",t)}})),state:a,setState:i,submit:t=>{t.preventDefault();const{startDate:s,endDate:i}=a;if(""===s&&""===i)(0,vt.Am)("Please select date first",{position:"top-right",type:"error"});else if(""!==s&&""!==i){let t={startDate:s,endDate:i};e((0,Cs._8)(t))}else if(""!==s&&""===i){let t={startDate:s,endDate:s};e((0,Cs._8)(t))}else if(""===s&&""!==i){let t={startDate:i,endDate:i};e((0,Cs._8)(t))}}})}),(0,U.jsx)(J,{columns:Ps,rows:n.length>0&&l,footer:!0})]})}var Os=a(26284);const Fs=(e,t,a)=>[{field:"name",headerName:"Cashier Name",width:190,renderCell:e=>{var t;return(0,U.jsxs)("div",{className:"cellWithImg",children:[(0,U.jsx)("img",{src:null!==(t=e.row.cashier)&&void 0!==t&&t.pic?"".concat(G.y,"/public/users/images/").concat(e.row.cashier.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.cashier.name.length>11?e.row.cashier.name.substring(0,11)+"....":e.row.cashier.name]})}},{field:"salesCash",headerName:"Sales Cash",width:140,renderCell:e=>(0,U.jsx)("div",{children:e.row.salesCash?e.row.salesCash.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}):0})},{field:"debitCash",headerName:"Debit Cash",width:140,renderCell:e=>(0,U.jsx)("div",{children:e.row.debitCash?e.row.debitCash.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}):0})},{field:"cardAmount",headerName:"Card Amount",width:140,renderCell:e=>(0,U.jsx)("div",{children:e.row.cardAmount?e.row.cardAmount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}):0})},{field:"creditAmount",headerName:"Credit Amount",width:140,renderCell:e=>(0,U.jsx)("div",{children:e.row.creditAmount?e.row.creditAmount.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}):0})},{field:"date",headerName:"Date",width:100},{field:"action",headerName:"Action",width:130,renderCell:t=>(0,U.jsxs)("div",{className:"cellAction",children:[(0,U.jsx)(Ht.Z,{title:"Print Report",children:(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>a(t.row._id),children:(0,U.jsx)(Os.Z,{style:{fontSize:"20px"}})})}),(0,U.jsx)(Ht.Z,{title:"Delete Closing",children:(0,U.jsx)(re.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,U.jsx)(ne.Z,{style:{fontSize:"20px"}})})})]})}],ks=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.closings.data)),a=(0,r.v9)((e=>e.sales.current)),i=(0,r.v9)((e=>e.closings.totalRecord)),n=(0,r.v9)((e=>e.sales.errors)),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[u,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(0),[y,f]=(0,s.useState)({field:"",operator:"",sort:-1}),[j,v]=(0,s.useState)({searchInput:"",startDate:"",endDate:""}),[b,D]=(0,s.useState)({name:"",type:"",initialReading:"",currentReading:"",status:""}),[S,w]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==u&&!0===l||void 0!==u&&!0===d)&&e((0,Ba.OD)(u[0]))}),[u]),console.log("Checking the search State ",j),(0,s.useEffect)((()=>{0!==Object.keys(a).length&&D({name:a.name,type:a.type,initialReading:a.initialReading,currentReading:a.currentReading,status:a.status})}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:y.sort};return e((0,Qt.ew)(t)),()=>{e((0,Qt.Lp)())}}),[]),(0,s.useEffect)((()=>{"date"===y.field?f({...y,operator:"inBetween"}):"inBetween"===y.operator&&f({...y,operator:"$regex"})}),[y.field]),(0,s.useEffect)((()=>{(null===n||void 0===n?void 0:n.length)>0&&n.forEach((e=>{(0,vt.Am)(e.msg,{position:"top-right",type:"error"})}))}),[n]);function A(e){let t=0,a=0;return null===e||void 0===e||e.forEach((e=>{t+=e.quantity*e.price.newSellingPrice,a+=e.price.newSellingPrice/100*e.discount*e.quantity})),{totalAmount:t,totalDiscount:a}}const Z=t.length>0?t.map((e=>({...e,totalAmount:e.items&&A(e.items).totalAmount,totalDiscount:e.items&&A(e.items).totalDiscount,product:e.items}))):[];return(0,U.jsxs)(H.Z,{m:"0px 20px 15px 20px",children:[(0,U.jsx)(se,{icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),title:"Sale Closings",subTitle:"Manage Application Sale Closings"}),(0,U.jsxs)(H.Z,{className:"mainCard",children:[(0,U.jsx)(Wa,{openDetailsDialog:d,heading:0!==Object.keys(a).length?"Sales Detail of ".concat(a.customer.name):"Sale Details",inputs:0!==Object.keys(a).length&&a,icon:(0,U.jsx)(I.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>{c(!1)}}),(0,U.jsx)(gt,{openDeleteDialog:m,setOpenDeleteDialog:p,handleOnDelete:()=>{e((0,Ba.pe)(u)),g(null)},heading:"DELETE SALE",color:"#ff0000",icon:(0,U.jsx)(ht.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Sale?."}),(0,U.jsx)(jt,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?void 0:n,operator:l,sort:r,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Ba.X8)(o)),w(!S),x(0)):""===n?(e((0,Ba.X8)(o)),w(!S),x(0)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,vt.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Ba.X8)(o)),w(!S),x(0))},filters:y,setFilter:f,state:j,setState:v,openFiltersPanel:S,setOpenFiltersPanel:w,loadDataFunc:()=>{e((0,Ba.X8)({page:0,sort:-1}))},searchFiltersForm:La,searchInputForm:Ie}),(0,U.jsx)(J,{columns:Fs(p,0,(t=>{e((0,Qt.hC)(t)),console.log("Check print id => ",t)})),rows:Z,currentPage:h,totalRecords:i,selectedRowId:u,setSelectedRowId:g,handleOnPageChange:t=>{x(t);const{startDate:a,endDate:s,searchInput:i}=j,{field:n,operator:l,sort:r}=y;let o={field:""===n?"":n,operator:l,sort:r,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,vt.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Ba.X8)(o)):""===n?e((0,Ba.X8)(o)):""!==n&&""===i?(0,vt.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Ba.X8)(o))}})]})]})},Ts=e=>{let{mode:t}=e;const{logout:a,user:r}=(0,s.useContext)(z.Z);return(0,U.jsx)("div",{className:"dark"===t?"authApp dark":"authApp",children:(0,U.jsxs)(i.VK,{children:[(0,U.jsx)(l.Z,{className:"authNavbar",user:r,logout:a}),(0,U.jsx)(vt.Ix,{theme:"colored",closeButton:!1}),(0,U.jsx)(rt.Z,{}),(0,U.jsxs)("div",{className:"main",children:[(0,U.jsx)(M,{className:"authSidebar"}),(0,U.jsx)("div",{className:"appContainer",children:(0,U.jsxs)(n.Z5,{children:[(0,U.jsx)(n.AW,{exact:!0,path:"/",element:(0,U.jsx)(X,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/subscriptions",element:(0,U.jsx)(pe,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/packages",element:(0,U.jsx)(Fe,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/packages/new",element:(0,U.jsx)(lt,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/packages/update/:id",element:(0,U.jsx)(lt,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/features",element:(0,U.jsx)(Ce,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/features/new",element:(0,U.jsx)(Ee,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/meters",element:(0,U.jsx)(_t,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/customers",element:(0,U.jsx)(ea,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/customerpayments",element:(0,U.jsx)(Qa,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/suppliers",element:(0,U.jsx)(la,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/supplierpayments",element:(0,U.jsx)(as,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/employees",element:(0,U.jsx)(pa,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/employeesalary",element:(0,U.jsx)(ls,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/employeeadvances",element:(0,U.jsx)(us,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/machines",element:(0,U.jsx)(xa,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/readings",element:(0,U.jsx)($a,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/products",element:(0,U.jsx)(Ca,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/prices",element:(0,U.jsx)(ka,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/pos",element:(0,U.jsx)(Ua,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/sales",element:(0,U.jsx)(_a,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/purchases",element:(0,U.jsx)(Ga,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/reports",element:(0,U.jsx)(Rs,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/stocks",element:(0,U.jsx)(Da,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/wastages",element:(0,U.jsx)(ws,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/dips",element:(0,U.jsx)(Ns,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/expenses",element:(0,U.jsx)(js,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/tenants",element:(0,U.jsx)(bt,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/tenants/new",element:(0,U.jsx)(St,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/tenants/update/:id",element:(0,U.jsx)(St,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/admin/users",element:(0,U.jsx)(Bt,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/closing",element:(0,U.jsx)(Vt,{})}),(0,U.jsx)(n.AW,{exact:!0,path:"/allclosings",element:(0,U.jsx)(ks,{})})]})})]})]})})}},7075:()=>{},42108:(e,t,a)=>{e.exports=a.p+"static/media/profile_user.f92e5ecc7edfd2ea035e.jpg"}}]);
//# sourceMappingURL=883.e7c6a7fd.chunk.js.map