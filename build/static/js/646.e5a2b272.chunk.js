"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[646],{19396:(e,t,a)=>{a.d(t,{CF:()=>n,ru:()=>s});var i=a(37725);const n=(e,t,a)=>[{id:1,label:"Customer",type:"select",name:"customerId",disabled:Object.entries(t).length>0,options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"".concat(i.y,"/public/customers/images/").concat(e.pic),avatarAlt:"./img/avatarfile.png",salary:e.balance.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Amount",tabIndex:1,type:"number",name:"payingAmount",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Date",type:"date",name:"date",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:null!==e&&0!==Object.keys(t).length?"Update Customer Payment":"ADD CUSTOMER Payemnt",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],s=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}]},96418:(e,t,a)=>{a.d(t,{Lg:()=>s,PV:()=>i,Vx:()=>n});const i=(e,t)=>[{id:1,label:"Name",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Balance",tabIndex:3,type:"number",name:"balance",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Customer":"ADD CUSTOMER",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],n=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],s=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}]},21980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});a(22317);var i=a(697),n=a(72791),s=a(28924),l=a(66351),r=a(59434),d=a(19570),o=a(98635),m=a(66807),c=a(46174),p=a(92167),u=a(5092),g=a(97246),h=a(75985),x=a(96418),v=a(26384),y=a(19396),b=a(39086),D=a(37725);const f=(e,t,a)=>[{id:1,label:"Customer",type:"select",name:"customerId",disabled:Object.entries(t).length>0,options:a.length>0&&a.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"".concat(D.y,"/public/customers/images/").concat(e.pic),avatarAlt:"./img/avatarfile.png",salary:e.balance.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})}))),grid:{xs:12,sm:12,md:12,lg:12}},{id:2,label:"Description",tabIndex:1,type:"text",name:"description",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Amount",tabIndex:1,type:"number",name:"amount",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:5,label:null!==e&&0!==Object.keys(t).length?"Update Customer Advance":"ADD CUSTOMER Advance",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}];var A=a(52524),C=a(38820),I=a(5397),S=a(20068),j=a(13400),w=a(80184);const N=(e,t,a)=>[{field:"name",headerName:"Name",width:250,renderCell:e=>(0,w.jsxs)("div",{className:"cellWithImg",children:[(0,w.jsx)("img",{src:e.row.pic?"".concat(D.y,"/public/customers/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name.length>30?e.row.name.substring(0,30)+"....":e.row.name]})},{field:"description",headerName:"Description",width:250,renderCell:e=>(0,w.jsx)("div",{className:"cellAction",children:e.row.description})},{field:"amount",headerName:"Amount",width:150,renderCell:e=>{var t;return(0,w.jsx)("div",{className:"cellAction",children:(null===(t=e.row.amount)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"date",headerName:"Date",width:150},{field:"action",headerName:"Action",width:160,renderCell:i=>(0,w.jsxs)("div",{className:"cellAction",children:[(0,w.jsx)(S.Z,{title:"Customer Advance Detials",children:(0,w.jsx)(j.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,w.jsx)(A.Z,{style:{fontSize:"20px"}})})}),"open"===i.row.status&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.Z,{title:"Edit Customer Advance",children:(0,w.jsx)(j.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,w.jsx)(C.Z,{style:{fontSize:"20px"}})})}),(0,w.jsx)(S.Z,{title:"Delete Customer Advance",children:(0,w.jsx)(j.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,w.jsx)(I.Z,{style:{fontSize:"20px"}})})})]})]})}];var Z=a(72226),E=a(6001);const P=()=>{const e=(0,r.I0)(),{user:t}=(0,n.useContext)(b.Z),a=(0,r.v9)((e=>e.completeData.customers)),D=(0,r.v9)((e=>e.customerAdvances.data)),A=(0,r.v9)((e=>e.customerAdvances.current)),C=(0,r.v9)((e=>e.customerAdvances.totalRecord)),I=(0,r.v9)((e=>e.customerAdvances.errors)),[S,j]=(0,n.useState)(!1),[P,O]=(0,n.useState)(!1),[z,R]=(0,n.useState)(!1),[F,U]=(0,n.useState)(null),[B,k]=(0,n.useState)(0),[M,T]=(0,n.useState)({field:"",operator:"",sort:-1}),[_,V]=(0,n.useState)({searchInput:"",startDate:"",endDate:""}),[L,$]=(0,n.useState)({cashierId:t._id,customerId:"",amount:"",description:"",date:""}),[W,H]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(void 0!==F&&!0===S||void 0!==F&&!0===P)&&e((0,Z.xX)(F))}),[F]),(0,n.useEffect)((()=>{0!==Object.keys(A).length&&$({customerId:A.customerId,description:A.description,amount:A.amount,date:A.date})}),[A]),(0,n.useEffect)((()=>{const t={page:0,sort:M.sort};return e((0,E.C6)()),e((0,Z.NP)(t)),()=>{e((0,E.JH)()),e((0,Z.nH)())}}),[]),(0,n.useEffect)((()=>{"date"===M.field?T({...M,operator:"inBetween"}):"inBetween"===M.operator&&T({...M,operator:"$regex"})}),[M.field]),(0,n.useEffect)((()=>{(null===I||void 0===I?void 0:I.length)>0?I.forEach((e=>{(0,h.Am)(e.msg,{position:"top-right",type:"error"})})):K()}),[I]);const K=()=>{j(!1),U(null),$({userId:t._id,customerId:"",description:"",amount:"",date:""}),e((0,Z.u$)())};const q=D.map((e=>({...e}))),{userId:J,customerId:X,description:G,amount:Q,date:Y}=L;return(0,w.jsxs)(i.Z,{m:"0px 20px 15px 20px",children:[(0,w.jsx)(s.Z,{icon:(0,w.jsx)(c.Z,{style:{marginRight:"10px"}}),title:"Customer Advances",subTitle:"Manage Application Customers",addBtnTitle:"Add Advance",dialog:S,setDialog:j}),(0,w.jsxs)(i.Z,{className:"mainCard",children:[(0,w.jsx)(o.Z,{openFormDialog:S,setOpenFormDialog:j,heading:null!==F&&0!==Object.keys(A).length?"UPDATE CUSTOMER ADVANCE":"ADD CUSTOMER ADVANCE",color:"#999999",state:L,Id:F,setState:$,handleOnClose:K,handleOnSubmit:async t=>{if(t.preventDefault(),""===J)(0,h.Am)("Please re-login",{position:"top-right",type:"error"});else if(""===X)(0,h.Am)("Select Customer",{position:"top-right",type:"error"});else if(""===G)(0,h.Am)("Please enter description",{position:"top-right",type:"error"});else if(""===Q)(0,h.Am)("Please enter amount",{position:"top-right",type:"error"});else if(""===Y)(0,h.Am)("Select date",{position:"top-right",type:"error"});else if(null!==F){const t={id:F[0],Data:L};e((0,Z.z8)(t))}else console.log("Check state => ",L),e((0,Z.sc)(L))},inputs:f(F,A,a),icon:(0,w.jsx)(p.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(A).length&&(0,w.jsx)(v.Z,{openDetailsDialog:P,heading:"".concat((ee=null===A||void 0===A?void 0:A.customerName,ee.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))," Advance Details"),inputs:A,handleOnCloseDetails:()=>{O(!1),U(null),$({userId:t._id,customerId:"",amount:"",description:"",date:""}),e((0,Z.u$)())},icon:(0,w.jsx)(u.Z,{style:{marginRight:"10px"}})}),(0,w.jsx)(d.Z,{openDeleteDialog:z,setOpenDeleteDialog:R,handleOnDelete:()=>{e((0,Z.sR)(F)),U(null)},heading:"DELETE CUSTOMER ADVANCE",color:"#ff0000",icon:(0,w.jsx)(m.Z,{style:{marginRight:"10px"}}),message:"Are you sure you want to delete this advance."}),(0,w.jsx)(g.Z,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:i,searchInput:n}=_,{field:s,operator:l,sort:r}=M;let d={field:""===s?void 0:s,operator:l,sort:r,page:0,searchInput:n,startDate:""!==i&&""===a?i:a,endDate:""===i&&""!==a?a:i};"date"===s?""===a&&""===i?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,Z.NP)(d)),H(!W),k(0)):""===s?(e((0,Z.NP)(d)),H(!W),k(0)):""!==s&&""===n?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==s&&""!==n&&""===l?(0,h.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,Z.NP)(d)),H(!W),k(0))},filters:M,setFilter:T,state:_,setState:V,openFiltersPanel:W,setOpenFiltersPanel:H,loadDataFunc:()=>{e((0,Z.NP)({page:0,sort:-1}))},searchFiltersForm:y.ru,searchInputForm:x.Lg}),(0,w.jsx)(l.Z,{columns:N(R,O,j),rows:q,currentPage:B,totalRecords:C,selectedRowId:F,setSelectedRowId:U,handleOnPageChange:t=>{k(t);const{startDate:a,endDate:i,searchInput:n}=_,{field:s,operator:l,sort:r}=M;let d={field:""===s?"":s,operator:l,sort:r,page:t,searchInput:n,startDate:""!==i&&""===a?i:a,endDate:""===i&&""!==a?a:i};"date"===s?""===a&&""===i?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,Z.NP)(d)):""===s?e((0,Z.NP)(d)):""!==s&&""===n?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,Z.NP)(d))}})]})]});var ee}},5397:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(74223),n=a(80184);const s=(0,i.Z)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},38820:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(74223),n=a(80184);const s=(0,i.Z)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},52524:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(74223),n=a(80184);const s=(0,i.Z)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info")},22317:()=>{}}]);
//# sourceMappingURL=646.e5a2b272.chunk.js.map