"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[214],{47953:(e,t,i)=>{i.d(t,{o:()=>o});var a=i(38820),l=i(52524),r=i(20068),n=i(13400),s=i(37725),d=i(80184);const o=(e,t,i)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,d.jsxs)("div",{className:"cellWithImg",children:[(0,d.jsx)("img",{src:e.row.pic?"".concat(s.y,"/public/products/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"type",headerName:"Type",width:100},{field:"costPrice",headerName:"Cost Price",width:150,renderCell:e=>{var t;return(0,d.jsx)("div",{children:e.row.prices.costPrice?(null===(t=e.row.prices.costPrice)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0:""})}},{field:"sellingPrice",headerName:"Selling Price",width:140,renderCell:e=>{var t;return(0,d.jsx)("div",{children:(null===(t=e.row.prices.newSellingPrice)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"date",headerName:"Last Updated",width:120,renderCell:e=>(0,d.jsx)("div",{children:e.row.prices.date})},{field:"status",headerName:"Status",width:90,renderCell:e=>(0,d.jsx)("div",{style:{background:"active"===e.row.status.toLowerCase()?"#02bf2e":"#999",color:"white",width:65,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:e=>(0,d.jsxs)("div",{className:"cellAction",children:[(0,d.jsx)(r.Z,{title:"Edit Product",children:(0,d.jsx)(n.Z,{className:"viewButton",onClick:()=>{i(!0)},children:(0,d.jsx)(a.Z,{style:{fontSize:"20px"}})})}),(0,d.jsx)(r.Z,{title:"Product Details",children:(0,d.jsx)(n.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,d.jsx)(l.Z,{style:{fontSize:"20px"}})})})]})}]},95957:(e,t,i)=>{i.d(t,{CE:()=>r,Ty:()=>l,c0:()=>a});const a=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:12,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:12,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:12,md:6,lg:6}},{id:4,label:"Salary *",tabIndex:3,type:"number",name:"salary",grid:{xs:12,sm:12,md:6,lg:6}},{id:5,label:"Advance *",tabIndex:3,type:"number",name:"advance",grid:{xs:12,sm:12,md:6,lg:6}},{id:6,label:"Designation *",tabIndex:4,type:"text",name:"designation",grid:{xs:12,sm:12,md:6,lg:6}},{id:7,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:12,md:6,lg:6}},{id:8,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:12,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:9,label:null!==e&&0!==Object.keys(t).length?"Update Employee":"Add Employee",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],l=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Designation",value:"designation"},{id:5,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],r=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}]},18111:(e,t,i)=>{i.d(t,{L:()=>r,l:()=>l});var a=i(37725);const l=(e,t,i,l)=>[{id:1,label:"Select Product",type:"select",name:"productId",options:i.length>0&&i.map((e=>({id:e._id,name:e.name,value:e._id}))),grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Select Supplier",type:"select",name:"supplierId",options:l.length>0&&l.map((e=>({id:e._id,name:e.name,value:e._id,avatarUrl:"".concat(a.y,"/public/suppliers/images/").concat(e.pic),avatarAlt:"./img/avatarfile.png"}))),grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Product Quantity",type:"number",name:"quantity",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Cost Price",type:"number",name:"costPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Selling Price",type:"number",name:"sellingPrice",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Paying Amount",type:"number",name:"paidAmount",grid:{xs:12,sm:6,md:6,lg:6}},{id:8,label:"Date",type:"date",name:"date",grid:{xs:12,sm:12,md:12,lg:12}},{id:9,label:null!==e&&0!==Object.keys(t).length?"Update Stock":"Add Stock",type:"button",btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],r=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Supplier Name",value:"supplier"},{id:2,name:"Product Name",value:"product"},{id:7,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}]},93305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var a=i(697),l=i(72791),r=i(28924),n=i(66351),s=i(59434),d=(i(70591),i(19570)),o=i(98635),c=i(66807),m=i(31694),p=i(92167),u=i(5092),g=i(97246),h=i(75985),y=i(26384),x=(i(47953),i(18481),i(95957)),v=(i(92061),i(5397)),f=i(20068),b=i(13400),P=i(37725),w=i(80184);const D=(e,t,i)=>[{field:"supplier",headerName:"Supplier Name",width:230,renderCell:e=>{var t;return(0,w.jsxs)("div",{className:"cellWithImg",children:[(0,w.jsx)("img",{src:null!==(t=e.row.supplier)&&void 0!==t&&t.pic?"".concat(P.y,"/public/suppliers/images/").concat(e.row.supplier.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.supplierName]})}},{field:"productName",headerName:"Product Name",width:150},{field:"quantity",headerName:"Quantity",width:120},{field:"costPrice",headerName:"Cost Price",width:130,renderCell:e=>{var t;return(0,w.jsx)("div",{children:(null===(t=e.row.costPrice)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"sellingPrice",headerName:"Selling Price",width:130,renderCell:e=>{var t;return(0,w.jsx)("div",{children:(null===(t=e.row.sellingPrice)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"date",headerName:"Date",width:120,renderCell:e=>(0,w.jsx)("div",{children:e.row.date})},{field:"action",headerName:"Action",width:100,renderCell:t=>(0,w.jsx)("div",{className:"cellAction",children:"open"===t.row.status&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(f.Z,{title:"Delete Purchase",children:(0,w.jsx)(b.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,w.jsx)(v.Z,{style:{fontSize:"20px"}})})})})})}];var S=i(75416),j=i(18111),A=(i(99784),i(6001));const C=()=>{const e=(0,s.I0)(),t=(0,s.v9)((e=>e.completeData.products));console.log(t);const i=(0,s.v9)((e=>e.purchases.data)),v=(0,s.v9)((e=>e.completeData.suppliers)),f=(0,s.v9)((e=>e.purchases.current)),b=(0,s.v9)((e=>e.purchases.totalRecord)),P=(0,s.v9)((e=>e.purchases.errors)),[C,I]=(0,l.useState)(!1),[N,E]=(0,l.useState)(!1),[Z,k]=(0,l.useState)(!1),[F,z]=(0,l.useState)(null),[B,O]=(0,l.useState)(0),[R,q]=(0,l.useState)({field:"",operator:"",sort:-1}),[U,L]=(0,l.useState)({startDate:"",endDate:"",searchInput:""}),[T,G]=(0,l.useState)({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""}),[K,W]=(0,l.useState)(""),[_,M]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(void 0!==F&&!0===C||void 0!==F&&!0===N)&&e((0,S.sv)(F))}),[F]),(0,l.useEffect)((()=>{0!==Object.keys(f).length&&G({productId:f.productId,supplierId:f.supplierId,quantity:f.quantity,costPrice:f.costPrice,sellingPrice:f.sellingPrice,paidAmount:f.paidAmount,date:f.date})}),[f]),(0,l.useEffect)((()=>{const t={page:0,sort:R.sort};return e((0,A.Dg)()),e((0,S.GP)(t)),e((0,A.Dh)()),()=>{e((0,S.oq)()),e((0,A.gP)())}}),[]),(0,l.useEffect)((()=>{"date"===R.field?q({...R,operator:"inBetween"}):"inBetween"===R.operator&&q({...R,operator:"$regex"})}),[R.field]),(0,l.useEffect)((()=>{(null===P||void 0===P?void 0:P.length)>0?P.forEach((e=>{(0,h.Am)(e.msg,{position:"top-right",type:"error"})})):$()}),[P]);const $=()=>{I(!1),z(null),G({productId:"",supplierId:"",quantity:"",costPrice:"",sellingPrice:"",paidAmount:"",date:""}),W("")};function H(e){return console.log(e),e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const V=i.map((e=>({...e,supplierName:e.supplier&&H(e.supplier.name),productName:e.product&&H(e.product.name)}))),{productId:Q,supplierId:J,quantity:X,costPrice:Y,sellingPrice:ee,paidAmount:te,date:ie}=T;return(0,w.jsxs)(a.Z,{m:"0px 20px 15px 20px",children:[(0,w.jsx)(r.Z,{icon:(0,w.jsx)(m.Z,{style:{marginRight:"10px"}}),title:"Purchase History",subTitle:"Manage Application Stocks",addBtnTitle:"Add Stock",dialog:C,setDialog:I}),(0,w.jsxs)(a.Z,{className:"mainCard",children:[t.length>0&&v.length>0&&(0,w.jsx)(o.Z,{openFormDialog:C,setOpenFormDialog:I,heading:null!==F&&0!==Object.keys(f).length?"UPDATE STOCK":"ADD STOCK",color:"#999999",state:T,Id:F,setState:G,handleOnClose:$,handleOnSubmit:async t=>{if(t.preventDefault(),""===Q)(0,h.Am)("Select product",{position:"top-right",type:"error"});else if(""===J)(0,h.Am)("Select product supplier",{position:"top-right",type:"error"});else if(""===X)(0,h.Am)("Enter quantity of product",{position:"top-right",type:"error"});else if(""===Y)(0,h.Am)("Enter cost price",{position:"top-right",type:"error"});else if(""===ee)(0,h.Am)("Enter selling price",{position:"top-right",type:"error"});else if(""===te)(0,h.Am)("Enter amount paid",{position:"top-right",type:"error"});else if(""===ie)(0,h.Am)("Select date ",{position:"top-right",type:"error"});else if(null!==F){const t={id:F[0],Data:T};e((0,S.CD)(t))}else e((0,S.I0)(T))},inputs:(0,j.l)(F,f,t,v),icon:(0,w.jsx)(p.Z,{style:{marginRight:"10px"}})}),(0,w.jsx)(y.Z,{openDetailsDialog:N,heading:"Kashif's Detail",inputs:0!==Object.keys(f).length&&f,icon:(0,w.jsx)(u.Z,{style:{marginRight:"10px"}})}),(0,w.jsx)(d.Z,{openDeleteDialog:Z,setOpenDeleteDialog:k,handleOnDelete:()=>{e((0,S.uU)(F)),z(null)},heading:"DELETE PURCHASED STOCK",color:"#ff0000",icon:(0,w.jsx)(c.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Purchased Stock?."}),(0,w.jsx)(g.Z,{submit:async t=>{t.preventDefault();const{startDate:i,endDate:a,searchInput:l}=U,{field:r,operator:n,sort:s}=R;let d={field:""===r?void 0:r,operator:n,sort:s,page:0,searchInput:l,startDate:""!==a&&""===i?a:i,endDate:""===a&&""!==i?i:a};"date"===r?""===i&&""===a?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,S.GP)(d)),M(!_),O(0)):""===r?(e((0,S.GP)(d)),M(!_),O(0)):""!==r&&""===l?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==r&&""!==l&&""===n?(0,h.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,S.GP)(d)),M(!_),O(0))},filters:R,setFilter:q,state:U,setState:L,openFiltersPanel:_,setOpenFiltersPanel:M,loadDataFunc:()=>{e((0,S.GP)({page:0,sort:-1}))},searchFiltersForm:j.L,searchInputForm:x.CE}),(0,w.jsx)(n.Z,{columns:D(k),rows:V,currentPage:B,totalRecords:b,selectedRowId:F,setSelectedRowId:z,handleOnPageChange:t=>{O(t);const{startDate:i,endDate:a,searchInput:l}=U,{field:r,operator:n,sort:s}=R;let d={field:""===r?"":r,operator:n,sort:s,page:t,searchInput:l,startDate:""!==a&&""===i?a:i,endDate:""===a&&""!==i?i:a};"date"===r?""===i&&""===a?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,S.GP)(d)):""===r?e((0,S.GP)(d)):""!==r&&""===l?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,S.GP)(d))}})]})]})}},70591:(e,t,i)=>{i.d(t,{p:()=>n});var a=i(74569),l=i.n(a),r=i(37725);const n=async e=>{try{return await l().post("".concat(r.y,"/api/uploads"),e).then((e=>e.data))}catch(t){return t.response.data}}},5397:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(74223),l=i(80184);const r=(0,a.Z)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},38820:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(74223),l=i(80184);const r=(0,a.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},52524:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(74223),l=i(80184);const r=(0,a.Z)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info")}}]);
//# sourceMappingURL=214.f28eb9f9.chunk.js.map