"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[981],{96418:(e,t,a)=>{a.d(t,{Lg:()=>n,PV:()=>s,Vx:()=>i});const s=(e,t)=>[{id:1,label:"Name",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Balance",tabIndex:3,type:"number",name:"balance",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Customer":"ADD CUSTOMER",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],i=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],n=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}]},46919:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(697),i=a(72791),n=a(28924),r=a(66351),l=a(38820),d=a(52524),o=a(20068),c=a(13400),m=a(37725),p=a(80184);const u=(e,t,a)=>[{field:"user",headerName:"User",width:230,renderCell:e=>(0,p.jsxs)("div",{className:"cellWithImg",children:[console.log(e.row.pic),(0,p.jsx)("img",{src:e.row.pic?"".concat(m.y,"/public/users/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name.length>30?e.row.name.substring(0,30)+"....":e.row.name]})},{field:"email",headerName:"Email",width:230},{field:"contact",headerName:"Contact",width:150},{field:"access",headerName:"Role",width:120},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,p.jsx)("div",{style:{background:"active"===e.row.status.toLowerCase()?"#02bf2e":"#999",color:"white",width:65,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:a=>(0,p.jsxs)("div",{className:"cellAction",children:[(0,p.jsx)(o.Z,{title:"Edit User",children:(0,p.jsx)(c.Z,{className:"viewButton",onClick:()=>{e(!0)},children:(0,p.jsx)(l.Z,{style:{fontSize:"20px"}})})}),(0,p.jsx)(o.Z,{title:"User Details",children:(0,p.jsx)(c.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,p.jsx)(d.Z,{style:{fontSize:"20px"}})})})]})}];var g=a(59434),h=a(70591),x=a(19570),f=a(98635),b=a(66807);const y=(0,a(74223).Z)([(0,p.jsx)("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87z"},"0"),(0,p.jsx)("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),(0,p.jsx)("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24zm-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"},"2")],"PeopleAlt");var v=a(5092),w=a(97246),A=a(75985),D=a(71099),j=a(96418),I=a(26384),S=a(65712);const E=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Username *",type:"text",name:"username",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Role",type:"select",tabIndex:5,disable:!1,name:"access",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Admin",value:"web_admin"},{id:2,name:"Cashier",value:"cashier"}]},{id:5,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:"Password",tabIndex:2,type:"password",name:"password",grid:{xs:12,sm:6,md:6,lg:6}},{id:8,label:"Confirm Password",tabIndex:2,type:"password",name:"confirmPassword",grid:{xs:12,sm:6,md:6,lg:6}},{id:9,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:12,md:12,lg:12}},{id:10,label:null!==e&&0!==Object.keys(t).length?"Update User":"Add User",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],C=()=>{const e=(0,g.I0)(),t=(0,g.v9)((e=>e.users.data)),a=(0,g.v9)((e=>e.users.current)),l=(0,g.v9)((e=>e.users.totalRecord)),d=(0,g.v9)((e=>e.users.errors)),[o,c]=(0,i.useState)(!1),[C,Z]=(0,i.useState)(!1),[U,R]=(0,i.useState)(!1),[N,P]=(0,i.useState)(null),[z,O]=(0,i.useState)(0),[k,W]=(0,i.useState)({field:"",operator:"",sort:-1}),[B,F]=(0,i.useState)({searchInput:""}),[L,M]=(0,i.useState)({name:"",username:"",access:"",email:"",contact:"",access:"",address:"",password:"",confirmPassword:"",status:"",pic:""}),[q,T]=(0,i.useState)(""),[V,$]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(void 0!==N&&!0===o||void 0!==N&&!0===C)&&e((0,S.fp)(N))}),[N]),(0,i.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("".concat(m.y,"/public/users/images/").concat(a.pic));T(t)}M({name:a.name,email:a.email,contact:a.contact,username:a.username,access:a.access,address:a.address,status:a.status}),a.pic&&t()}}),[a]),(0,i.useEffect)((()=>{const t={page:0,sort:k.sort};e((0,S.AW)(t))}),[]),(0,i.useEffect)((()=>{"date"===k.field?W({...k,operator:"inBetween"}):"inBetween"===k.operator&&W({...k,operator:"$regex"})}),[k.field]),(0,i.useEffect)((()=>{(null===d||void 0===d?void 0:d.length)>0?d.forEach((e=>{(0,A.Am)(e.msg,{position:"top-right",type:"error"})})):_()}),[d]);const _=()=>{c(!1),P(null),M({name:"",email:"",contact:"",username:"",access:"",address:"",status:"",password:"",confirmPassword:""}),T(""),e((0,S.Ze)())};function Y(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const G=t.map((e=>({...e,name:e.name&&Y(e.name),address:e.address&&Y(e.address),status:e.status&&Y(e.status)}))),{name:H,username:J,access:K,contact:Q,address:X,password:ee,confirmPassword:te,status:ae}=L;return(0,p.jsxs)(s.Z,{m:"0px 20px 15px 20px",children:[(0,p.jsx)(n.Z,{icon:(0,p.jsx)(y,{style:{marginRight:"10px"}}),title:"Users",subTitle:"Manage Application Users",addBtnTitle:"Add User",dialog:o,setDialog:c}),(0,p.jsxs)(s.Z,{className:"mainCard",children:[(0,p.jsx)(f.Z,{openFormDialog:o,setOpenFormDialog:c,heading:null!==N&&0!==Object.keys(a).length?"UPDATE USER":"ADD USER",color:"#999999",state:L,Id:N,setState:M,file:q,setFile:T,handleOnClose:_,handleOnSubmit:async t=>{if(t.preventDefault(),console.log("Check the passwrod => ",L),""===H)(0,A.Am)("Enter Name",{position:"top-right",type:"error"});else if(""===J)(0,A.Am)("Enter unique username",{position:"top-right",type:"error"});else if(""===K)(0,A.Am)("Select User Role",{position:"top-right",type:"error"});else if(""===Q)(0,A.Am)("Enter contact number",{position:"top-right",type:"error"});else if(!ee||ee.length<6)(0,A.Am)("Enter a password min 6 characters",{position:"top-right",type:"error"});else if(!te||te.length<6)(0,A.Am)("Enter confirm password",{position:"top-right",type:"error"});else if(ee!==te)(0,A.Am)("Your passwords are not matching",{position:"top-right",type:"error"});else if(""===X)(0,A.Am)("Enter address of user",{position:"top-right",type:"error"});else if(""===ae)(0,A.Am)("Select status",{position:"top-right",type:"error"});else if(""!==q){function a(e){const t=new FormData;return t.append("file",e),t}const s=await(0,h.p)(a(q));if(!0===(null===s||void 0===s?void 0:s.success)){const i={...L};if(i.pic=s.filename,M(i),null!==N){const n={id:N[0],Data:i};e((0,S.Nq)(n))}else e((0,S.cn)(i))}}else if(null!==N){const r={id:N[0],Data:L};e((0,S.Nq)(r))}else e((0,S.cn)(L))},inputs:E(N,a),icon:(0,p.jsx)(y,{style:{marginRight:"10px"}})}),0!==Object.keys(a).length&&(0,p.jsx)(I.Z,{openDetailsDialog:C,heading:"".concat(a.name,"'s Detail"),inputs:a,handleOnCloseDetails:()=>{Z(!1),P(null),M({name:"",email:"",contact:"",username:"",access:"",address:"",status:""}),T(""),e((0,S.Ze)())},icon:(0,p.jsx)(v.Z,{style:{marginRight:"10px"}})}),(0,p.jsx)(x.Z,{openDeleteDialog:U,setOpenDeleteDialog:R,handleOnDelete:()=>{e((0,D.LA)(N)),P(null)},heading:"DELETE USER",color:"#ff0000",icon:(0,p.jsx)(b.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to User? Once you delete it's entire record will be deleted, and you can never get it back."}),(0,p.jsx)(w.Z,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:s,searchInput:i}=B,{field:n,operator:r,sort:l}=k;let d={field:""===n?void 0:n,operator:r,sort:l,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,A.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,S.AW)(d)),$(!V),O(0)):""===n?(e((0,S.AW)(d)),$(!V),O(0)):""!==n&&""===i?(0,A.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===r?(0,A.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,S.AW)(d)),$(!V),O(0))},filters:k,setFilter:W,state:B,setState:F,openFiltersPanel:V,setOpenFiltersPanel:$,loadDataFunc:()=>{e((0,S.AW)({page:0,sort:-1}))},searchFiltersForm:j.Vx,searchInputForm:j.Lg}),(0,p.jsx)(r.Z,{columns:u(c,Z),rows:G,currentPage:z,totalRecords:l,selectedRowId:N,setSelectedRowId:P,handleOnPageChange:t=>{O(t);const{startDate:a,endDate:s,searchInput:i}=B,{field:n,operator:r,sort:l}=k;let d={field:""===n?"":n,operator:r,sort:l,page:t,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:s};"date"===n?""===a&&""===s?(0,A.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,S.AW)(d)):""===n?e((0,S.AW)(d)):""!==n&&""===i?(0,A.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,S.AW)(d))}})]})]})}},70591:(e,t,a)=>{a.d(t,{p:()=>r});var s=a(74569),i=a.n(s),n=a(37725);const r=async e=>{try{return await i().post("".concat(n.y,"/api/uploads"),e).then((e=>e.data))}catch(t){return t.response.data}}},38820:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(74223),i=a(80184);const n=(0,s.Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},52524:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(74223),i=a(80184);const n=(0,s.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info")}}]);
//# sourceMappingURL=981.c2ffebe8.chunk.js.map