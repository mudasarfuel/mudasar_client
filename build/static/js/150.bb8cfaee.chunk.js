"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[150],{16925:(e,t,a)=>{a.d(t,{v:()=>c});var s=a(38820),i=a(52524),n=a(5397),l=a(20068),d=a(13400),r=a(37725),o=a(80184);const c=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,o.jsxs)("div",{className:"cellWithImg",children:[(0,o.jsx)("img",{src:e.row.pic?"".concat(r.y,"/public/customers/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name.length>30?e.row.name.substring(0,30)+"....":e.row.name]})},{field:"balance",headerName:"Receivable",width:150,renderCell:e=>{var t;return(0,o.jsx)("div",{className:"cellWithStatus ".concat(e.row.status),children:(null===(t=e.row.balance)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"contact",headerName:"Contact",width:150},{field:"address",headerName:"Address",width:200},{field:"status",headerName:"Status",width:100,renderCell:e=>(0,o.jsx)("div",{style:{background:"active"===e.row.status.toLowerCase()?"#02bf2e":"#999",color:"white",width:65,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:r=>(0,o.jsxs)("div",{className:"cellAction",children:[(0,o.jsx)(l.Z,{title:"Edit Customer",children:(0,o.jsx)(d.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,o.jsx)(s.Z,{style:{fontSize:"20px"}})})}),(0,o.jsx)(l.Z,{title:"View Detials",children:(0,o.jsx)(d.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,o.jsx)(i.Z,{style:{fontSize:"20px"}})})}),(0,o.jsx)(l.Z,{title:"Delete Customer",children:(0,o.jsx)(d.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,o.jsx)(n.Z,{style:{fontSize:"20px"}})})})]})}]},96418:(e,t,a)=>{a.d(t,{Lg:()=>n,PV:()=>s,Vx:()=>i});const s=(e,t)=>[{id:1,label:"Name",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:6,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:6,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:6,md:6,lg:6}},{id:4,label:"Balance",tabIndex:3,type:"number",name:"balance",grid:{xs:12,sm:6,md:6,lg:6}},{id:5,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:6,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Customer":"ADD CUSTOMER",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],i=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],n=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}]},82542:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});a(18650);var s=a(697),i=a(72791),n=a(28924),l=a(66351),d=(a(16925),a(59434)),r=(a(70591),a(19570)),o=a(98635),c=a(66807),m=a(81808),p=a(92167),u=a(5092),h=a(97246),g=a(75985),x=a(71099),b=a(96418),v=a(26384),y=a(74223),f=a(80184);const w=(0,y.Z)((0,f.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.88 15.76V19h-1.75v-1.29c-.74-.18-2.39-.77-3.02-2.96l1.65-.67c.06.22.58 2.09 2.4 2.09.93 0 1.98-.48 1.98-1.61 0-.96-.7-1.46-2.28-2.03-1.1-.39-3.35-1.03-3.35-3.31 0-.1.01-2.4 2.62-2.96V5h1.75v1.24c1.84.32 2.51 1.79 2.66 2.23l-1.58.67c-.11-.35-.59-1.34-1.9-1.34-.7 0-1.81.37-1.81 1.39 0 .95.86 1.31 2.64 1.9 2.4.83 3.01 2.05 3.01 3.45 0 2.63-2.5 3.13-3.02 3.22z"}),"Paid");var D=a(13400),C=a(37725);const S=(e,t,a)=>[{field:"name",headerName:"Name",width:200,renderCell:e=>(0,f.jsxs)("div",{className:"cellWithImg",children:[(0,f.jsx)("img",{src:e.row.user.pic?"".concat(C.y,"/public/users/images/").concat(e.row.user.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.user.username]})},{field:"cash",headerName:"Cash",width:200,renderCell:e=>(0,f.jsx)("div",{className:"cellWithStatus ",children:e.row.cash.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2})})},{field:"description",headerName:"Description",width:250},{field:"status",headerName:"Status",width:150,renderCell:e=>(0,f.jsx)("div",{style:{background:"pending"===e.row.status.toLowerCase()?"#03a0f5":"#999",color:"white",width:70,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"date",headerName:"Date",width:150},{field:"action",headerName:"Action",width:100,renderCell:e=>(0,f.jsx)("div",{className:"cellAction",children:(0,f.jsx)(D.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,f.jsx)(w,{style:{fontSize:"20px"}})})})}];var j=a(58988);const I=(e,t)=>[{id:1,label:"Name",type:"text",name:"name",disabled:!0,tabIndex:0,grid:{xs:12,sm:12,md:6,lg:6}},{id:2,label:"Cash",tabIndex:1,type:"number",disabled:!0,name:"cash",grid:{xs:12,sm:12,md:6,lg:6}},{id:3,label:"Description",tabIndex:2,type:"text",name:"description",grid:{xs:12,sm:12,md:6,lg:6}},{id:4,label:"Cash Date",tabIndex:3,type:"date",disabled:!0,name:"date",grid:{xs:12,sm:12,md:6,lg:6}},{id:5,label:"Collection Date",tabIndex:3,type:"date",name:"collectionDate",grid:{xs:12,sm:12,md:6,lg:6}},{id:6,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:12,md:6,lg:6},options:[{id:1,name:"Pending",value:"pending"},{id:2,name:"Collected",value:"collected"}]},{id:7,label:null!==e&&0!==Object.keys(t).length?"Update Collection":"Collected",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}];var N=a(39086);const Z=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Cashier Name",value:"name"},{id:2,name:"Status",value:"status"},{id:3,name:"Date",value:"date"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],A=()=>{const{user:e}=(0,i.useContext)(N.Z);console.log("User => ",e);const t=(0,d.I0)(),a=(0,d.v9)((e=>e.cashes.data)),y=(0,d.v9)((e=>e.cashes.current)),w=(0,d.v9)((e=>e.cashes.totalRecord)),D=(0,d.v9)((e=>e.cashes.errors)),[C,A]=(0,i.useState)(!1),[E,z]=(0,i.useState)(!1),[k,B]=(0,i.useState)(!1),[O,M]=(0,i.useState)(null),[P,R]=(0,i.useState)(0),[F,L]=(0,i.useState)({field:"",operator:"",sort:-1}),[W,U]=(0,i.useState)({startDate:"",endDate:"",searchInput:""}),[V,$]=(0,i.useState)({userId:e._id,name:"",cash:"",description:"",collectionDate:"",date:"",status:""}),[_,q]=(0,i.useState)(!1),[T,K]=(0,i.useState)(window.matchMedia("(max-width: 768px)").matches);(0,i.useEffect)((()=>{const e=window.matchMedia("(max-width: 768px)"),t=()=>K(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[]),(0,i.useEffect)((()=>{(void 0!==O&&!0===C||void 0!==O&&!0===E)&&t((0,j.NM)(O))}),[O]),(0,i.useEffect)((()=>{0!==Object.keys(y).length&&$({...V,name:y.username,cash:y.cash,description:y.description,date:y.date,status:y.status})}),[y]),(0,i.useEffect)((()=>{const e={page:0,sort:F.sort};return t((0,x.OL)(e)),t((0,j.at)(e)),()=>{t((0,j.fW)())}}),[]),(0,i.useEffect)((()=>{"date"===F.field?L({...F,operator:"inBetween"}):"inBetween"===F.operator&&L({...F,operator:"$regex"})}),[F.field]),(0,i.useEffect)((()=>{(null===D||void 0===D?void 0:D.length)>0?D.forEach((e=>{(0,g.Am)(e.msg,{position:"top-right",type:"error"})})):H()}),[D]);const H=()=>{A(!1),M(null),$({userId:e._id,name:"",cash:"",description:"",collectionDate:"",date:"",status:""})};function G(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const J=a.map((e=>({...e,name:e.name&&G(e.name),address:e.address&&G(e.address),status:e.status&&G(e.status)}))),{userId:Q,description:X,collectionDate:Y,status:ee}=V;return console.log("Main State => ",V),(0,f.jsxs)(s.Z,{m:"0px 20px 15px 20px",children:[(0,f.jsx)(n.Z,{icon:(0,f.jsx)(m.Z,{style:{marginRight:"10px"}}),title:"Daily Cash",subTitle:"Manage Daily Cash",dialog:C}),(0,f.jsxs)(s.Z,{className:"mainCard",children:[(0,f.jsx)(o.Z,{openFormDialog:C,setOpenFormDialog:A,heading:"Collect Cash",color:"#999999",state:V,Id:O,setState:$,handleOnClose:H,handleOnSubmit:async e=>{if(e.preventDefault(),""===Q)(0,g.Am)("User ID is Missing",{position:"top-right",type:"error"});else if(""===X)(0,g.Am)("Description is missing",{position:"top-right",type:"error"});else if(""===Y)(0,g.Am)("Collection is missing",{position:"top-right",type:"error"});else if(""===ee)(0,g.Am)("Please select status",{position:"top-right",type:"error"});else if(O.length>0){const e={id:O[0],Data:V};console.log("Check Data in Submit Function => ",e),t((0,j.kc)(e))}else(0,g.Am)("Cash Id is Missing",{position:"top-right",type:"error"})},inputs:I(O,y),icon:(0,f.jsx)(p.Z,{style:{marginRight:"10px"}})}),0!==Object.keys(y).length&&(0,f.jsx)(v.Z,{openDetailsDialog:E,heading:"Kashif's Detail",inputs:y,handleOnCloseDetails:()=>z(!1),icon:(0,f.jsx)(u.Z,{style:{marginRight:"10px"}})}),(0,f.jsx)(r.Z,{openDeleteDialog:k,setOpenDeleteDialog:B,handleOnDelete:()=>{t((0,x.LA)(O)),M(null)},heading:"DELETE CUSTOMER",color:"#ff0000",icon:(0,f.jsx)(c.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Customer? Once you delete it's entire record will be deleted, and you can never get it back."}),(0,f.jsx)(h.Z,{submit:async e=>{e.preventDefault();const{startDate:a,endDate:s,searchInput:i}=W,{field:n,operator:l,sort:d}=F;let r={field:""===n?void 0:n,operator:l,sort:d,page:0,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,g.Am)("Please Select Date",{position:"top-right",type:"error"}):(t((0,j.at)(r)),q(!_),R(0)):""===n?(t((0,j.at)(r)),q(!_),R(0)):""!==n&&""===i?(0,g.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==n&&""!==i&&""===l?(0,g.Am)("Please select condition",{position:"top-right",type:"error"}):(t((0,j.at)(r)),q(!_),R(0))},filters:F,setFilter:L,state:W,setState:U,openFiltersPanel:_,setOpenFiltersPanel:q,loadDataFunc:()=>{t((0,j.at)({page:0,sort:-1}))},searchFiltersForm:Z,searchInputForm:b.Lg}),(0,f.jsx)(l.Z,{columns:S(0,0,A),rows:J,currentPage:P,totalRecords:w,selectedRowId:O,setSelectedRowId:M,handleOnPageChange:e=>{R(e);const{startDate:a,endDate:s,searchInput:i}=W,{field:n,operator:l,sort:d}=F;let r={field:""===n?"":n,operator:l,sort:d,page:e,searchInput:i,startDate:""!==s&&""===a?s:a,endDate:""===s&&""!==a?a:s};"date"===n?""===a&&""===s?(0,g.Am)("Please Select Date",{position:"top-right",type:"error"}):t((0,j.at)(r)):""===n?t((0,j.at)(r)):""!==n&&""===i?(0,g.Am)("Please Enter to search..",{position:"top-right",type:"error"}):t((0,j.at)(r))}})]})]})}},70591:(e,t,a)=>{a.d(t,{p:()=>l});var s=a(74569),i=a.n(s),n=a(37725);const l=async e=>{try{return await i().post("".concat(n.y,"/api/uploads"),e).then((e=>e.data))}catch(t){return t.response.data}}},5397:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(74223),i=a(80184);const n=(0,s.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},38820:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(74223),i=a(80184);const n=(0,s.Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},52524:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(74223),i=a(80184);const n=(0,s.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info")},18650:()=>{}}]);
//# sourceMappingURL=150.bb8cfaee.chunk.js.map