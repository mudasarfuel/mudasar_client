{"version":3,"file":"static/js/581.d9c24b32.chunk.js","mappings":"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","sources":["Pages/Customer/TotalSale.js"],"sourcesContent":["import { Box } from \"@mui/material\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Header from \"../../Components/Header/Header\";\r\nimport DataTable from \"../../Components/datatable/DataTable\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Dialogue from \"../../Components/dialogue/Dialogue\";\r\nimport DangerousIcon from \"@mui/icons-material/Dangerous\";\r\nimport {\r\n  Assessment,\r\n} from \"@mui/icons-material\";\r\nimport \"./sales.scss\";\r\nimport Search from \"../../Components/search/Search\";\r\nimport { toast } from \"react-toastify\";\r\nimport { searchInput } from \"../../Components/sources/formSources\";\r\nimport { salesColumns } from \"../../Components/datatable/salesTableSources\";\r\nimport { clearSales, deleteSale, getSales, getSingleSale } from \"../../redux/saleSlice/saleSlice\";\r\nimport SaleDetails from \"./SaleDetails\";\r\nimport { searchSalesFilters } from \"../../Components/sources/salesFormSources\";\r\n\r\nconst TotalSale = () => {\r\n  //Initializing dispatch function to call redux functions\r\n  const dispatch = useDispatch();\r\n  //Initializing useSelector to get data from redux store\r\n  const sales = useSelector((state) => state.sales.data);\r\n  //Initializing the current machine\r\n  const currentData = useSelector((state) => state.sales.current);\r\n  //Initiaizing useSelector to get total records\r\n  const totalRecords = useSelector((state) => state.sales.totalRecord);\r\n  //Initializing UseSelector to get errors\r\n  const submitErrors = useSelector((state) => state.sales.errors);\r\n  //Use State for Handle Open and close of form dialog\r\n  const [openFormDialog, setOpenFormDialog] = useState(false);\r\n  //Use State for handle Open and close of Details Dialog\r\n  const [openDetailsDialog, setDetailsDialog] = useState(false);\r\n  //Use State for Handle Open and close of dialog box\r\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\r\n  //Use State for selected row item id\r\n  const [selectedRowId, setSelectedRowId] = useState(null);\r\n  //Use State for manage pages\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  //Setup use state for search filters\r\n  const [filters, setFilter] = useState({\r\n    field: \"\",\r\n    operator: \"\",\r\n    sort: -1,\r\n  });\r\n  //Use State for search inputs\r\n  const [search, setSearch] = useState({\r\n    searchInput: \"\",\r\n    startDate: \"\",\r\n    endDate: \"\"\r\n  });\r\n\r\n\r\n  //Use State for manage filters panel\r\n  const [openFiltersPanel, setOpenFiltersPanel] = useState(false);\r\n  //Use Effect to get Single Customer API Hit\r\n  useEffect(() => {\r\n    if ((selectedRowId !== undefined && openFormDialog === true) || (selectedRowId !== undefined && openDetailsDialog === true)) {\r\n      //Dispatch current supplier\r\n      dispatch(getSingleSale(selectedRowId[0]));\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [selectedRowId]);\r\n\r\n  \r\n  //Load Data into state for update Use Effect\r\n\r\n\r\n  //useEffect to dispatch all machines\r\n  useEffect(() => {\r\n    const initialData = { page: 0, sort: filters.sort };\r\n    //Call getMachines using dispatch\r\n    // dispatch(getMachines(initialData));\r\n    dispatch(getSales(initialData));\r\n\r\n    //Call clear machines to clear machines from state on unmount\r\n    return () => {\r\n      dispatch(clearSales());\r\n    };\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  //useEffect to handle the dates filter\r\n  useEffect(() => {\r\n    if (filters.field === \"date\") {\r\n      setFilter({ ...filters, operator: \"inBetween\" });\r\n    } else {\r\n      if (filters.operator === \"inBetween\") {\r\n        setFilter({ ...filters, operator: \"$regex\" });\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [filters.field]);\r\n\r\n  //useEffect to Iterate submit Errors\r\n  useEffect(() => {\r\n    if (submitErrors?.length > 0) {\r\n      //iterate submit errors\r\n      submitErrors.forEach((item) => {\r\n        toast(item.msg, { position: \"top-right\", type: \"error\" });\r\n      });\r\n    }\r\n \r\n  }, [submitErrors]);\r\n\r\n  //Handle Delete Sale func\r\n  const handleOnDelete = () => {\r\n    //Calling delete function\r\n    dispatch(deleteSale(selectedRowId));\r\n    //after delete clear row id\r\n    setSelectedRowId(null);\r\n  };\r\n\r\n  //Load The Data\r\n  const loadData = () => {\r\n    const initialData = { page: 0, sort: -1 };\r\n    //Call getMachines using dispatch\r\n    dispatch(getSales(initialData));\r\n  };\r\n  //Handle On submit\r\n  const handleOnSubmit = async (e) => {\r\n    e.preventDefault();\r\n    //Destructuring values from state\r\n    const { startDate, endDate, searchInput } = search;\r\n    //Destructuring values from filters\r\n    const { field, operator, sort } = filters;\r\n    //Organizing data from filters and search Input\r\n    let newState = {\r\n      field: field === \"\" ? undefined : field,\r\n      operator: operator,\r\n      sort: sort,\r\n      page: 0,\r\n      searchInput: searchInput,\r\n      startDate: endDate !== \"\" && startDate === \"\" ? endDate : startDate,\r\n      endDate: endDate === \"\" && startDate !== \"\" ? startDate : endDate,\r\n    };\r\n    if (field === \"date\") {\r\n      if (startDate === \"\" && endDate === \"\") {\r\n        toast(\"Please Select Date\", { position: \"top-right\", type: \"error\" });\r\n      } else {\r\n        //Calling dispatch function to hit API Call\r\n        dispatch(getSales(newState));\r\n        //After search results close the filters panel\r\n        setOpenFiltersPanel(!openFiltersPanel);\r\n        //Set Page to Zero\r\n        setCurrentPage(0);\r\n      }\r\n    } else if (field === \"\") {\r\n      //Calling dispatch function to hit API Call\r\n      dispatch(getSales(newState));\r\n      //After search results close the filters panel\r\n      setOpenFiltersPanel(!openFiltersPanel);\r\n      //Set Page to Zero\r\n      setCurrentPage(0);\r\n    } else {\r\n      if (field !== \"\" && searchInput === \"\") {\r\n        toast(\"Please Enter to search..\", {\r\n          position: \"top-right\",\r\n          type: \"error\",\r\n        });\r\n      } else if (field !== \"\" && searchInput !== \"\" && operator === \"\") {\r\n        toast(\"Please select condition\", {\r\n          position: \"top-right\",\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        //Calling dispatch function to hit API Call\r\n        dispatch(getSales(newState));\r\n        //After search results close the filters panel\r\n        setOpenFiltersPanel(!openFiltersPanel);\r\n        //Set Page to Zero\r\n        setCurrentPage(0);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  //Handle on Page Change\r\n  const handleOnPageChange = (e) => {\r\n    //Setting pagination\r\n    setCurrentPage(e);\r\n    //Destructuring values from state\r\n    const { startDate, endDate, searchInput } = search;\r\n    //Destructuring values from filters\r\n    const { field, operator, sort } = filters;\r\n    //Organizing data from filters and search Input\r\n    let newState = {\r\n      field: field === \"\" ? \"\" : field,\r\n      operator: operator,\r\n      sort: sort,\r\n      page: e,\r\n      searchInput: searchInput,\r\n      startDate: endDate !== \"\" && startDate === \"\" ? endDate : startDate,\r\n      endDate: endDate === \"\" && startDate !== \"\" ? startDate : endDate,\r\n    };\r\n\r\n    if (field === \"date\") {\r\n      if (startDate === \"\" && endDate === \"\") {\r\n        toast(\"Please Select Date\", { position: \"top-right\", type: \"error\" });\r\n      } else {\r\n        //Calling dispatch function to hit API Call\r\n        dispatch(getSales(newState));\r\n      }\r\n    } else if (field === \"\") {\r\n      dispatch(getSales(newState));\r\n    } else {\r\n      if (field !== \"\" && searchInput === \"\") {\r\n        toast(\"Please Enter to search..\", {\r\n          position: \"top-right\",\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        //Calling dispatch function to hit API Call\r\n        dispatch(getSales(newState));\r\n      }\r\n    }\r\n  };\r\n  // Function for Capitalizing the data\r\n  // function capitalizeEachWord(sentence) {\r\n  //   return sentence\r\n  //     .split(\" \")\r\n  //     .map((word) => {\r\n  //       return word.charAt(0).toUpperCase() + word.slice(1);\r\n  //     })\r\n  //     .join(\" \");\r\n  // } \r\n\r\n\r\n  //Iterate and capitalizing data of each row\r\n  const capitalizedRows = sales.length > 0 ? sales.map((row) => ({\r\n    ...row,\r\n    \r\n    product: row.items\r\n  })) : [];\r\n\r\n  const handleOnCloseDetails = () => {\r\n\r\n    setDetailsDialog(false)\r\n  }\r\n\r\n  return (\r\n    <Box m=\"0px 20px 15px 20px\">\r\n      {/* Header for Employee Page  */}\r\n      <Header\r\n        icon={<Assessment style={{ marginRight: \"10px\" }} />}\r\n        title=\"Sales\"\r\n        subTitle=\"Manage Application Sales\"\r\n      />\r\n      {/* Main Card for setup employees Table */}\r\n      <Box className=\"mainCard\">\r\n        {/* Add OR Update Employee Dialog Box  */}\r\n\r\n        {/* Employee Details Dialog box  */}\r\n        <SaleDetails\r\n          openDetailsDialog={openDetailsDialog}\r\n          heading={Object.keys(currentData).length !== 0 ? `Sales Detail of ${currentData.customer.name}` : \"Sale Details\"}\r\n          inputs={Object.keys(currentData).length !== 0 && currentData}\r\n          icon={<Assessment style={{ marginRight: \"10px\" }} />}\r\n          handleOnCloseDetails={handleOnCloseDetails}\r\n        />\r\n        {/* Delete Content Dialog box  */}\r\n        <Dialogue\r\n          openDeleteDialog={openDeleteDialog}\r\n          setOpenDeleteDialog={setOpenDeleteDialog}\r\n          handleOnDelete={handleOnDelete}\r\n          heading={\"DELETE SALE\"}\r\n          color=\"#ff0000\"\r\n          icon={<DangerousIcon style={{ marginRight: \"10px\" }} />}\r\n          message={\r\n            \"Are sure you want to delete Sale?.\"\r\n          }\r\n        />\r\n\r\n        {/* Here we calling Search component in which we \r\n        are passing Filters state and Input Values state  */}\r\n        <Search\r\n          submit={handleOnSubmit}\r\n          filters={filters}\r\n          setFilter={setFilter}\r\n          state={search}\r\n          setState={setSearch}\r\n          openFiltersPanel={openFiltersPanel}\r\n          setOpenFiltersPanel={setOpenFiltersPanel}\r\n          loadDataFunc={loadData}\r\n          searchFiltersForm={searchSalesFilters}\r\n          searchInputForm={searchInput}\r\n        />\r\n        {/* DataTable for Employees  */}\r\n        <DataTable\r\n          columns={salesColumns(\r\n            setOpenDeleteDialog,\r\n            setDetailsDialog,\r\n            setOpenFormDialog\r\n          )}\r\n          rows={capitalizedRows}\r\n          currentPage={currentPage}\r\n          totalRecords={totalRecords}\r\n          selectedRowId={selectedRowId}\r\n          setSelectedRowId={setSelectedRowId}\r\n          handleOnPageChange={handleOnPageChange}\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TotalSale;\r\n\r\n\r\n"],"names":["TotalSale","dispatch","useDispatch","sales","useSelector","state","data","currentData","current","totalRecords","totalRecord","submitErrors","errors","openFormDialog","setOpenFormDialog","useState","openDetailsDialog","setDetailsDialog","openDeleteDialog","setOpenDeleteDialog","selectedRowId","setSelectedRowId","currentPage","setCurrentPage","filters","setFilter","field","operator","sort","search","setSearch","searchInput","startDate","endDate","openFiltersPanel","setOpenFiltersPanel","useEffect","undefined","getSingleSale","initialData","page","getSales","clearSales","length","forEach","item","toast","msg","position","type","capitalizedRows","map","row","product","items","_jsxs","Box","m","children","_jsx","Header","icon","Assessment","style","marginRight","title","subTitle","className","SaleDetails","heading","Object","keys","concat","customer","name","inputs","handleOnCloseDetails","Dialogue","handleOnDelete","deleteSale","color","DangerousIcon","message","Search","submit","async","e","preventDefault","newState","setState","loadDataFunc","loadData","searchFiltersForm","searchSalesFilters","searchInputForm","DataTable","columns","salesColumns","rows","handleOnPageChange"],"sourceRoot":""}