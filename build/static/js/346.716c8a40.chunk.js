"use strict";(self.webpackChunkadmin_material=self.webpackChunkadmin_material||[]).push([[346],{95957:(e,t,a)=>{a.d(t,{CE:()=>i,Ty:()=>s,c0:()=>n});const n=(e,t)=>[{id:1,label:"Name *",type:"text",name:"name",tabIndex:0,grid:{xs:12,sm:12,md:6,lg:6}},{id:2,label:"Email",tabIndex:1,type:"email",name:"email",grid:{xs:12,sm:12,md:6,lg:6}},{id:3,label:"Contact",tabIndex:2,type:"phone",name:"contact",grid:{xs:12,sm:12,md:6,lg:6}},{id:4,label:"Salary *",tabIndex:3,type:"number",name:"salary",grid:{xs:12,sm:12,md:6,lg:6}},{id:5,label:"Advance *",tabIndex:3,type:"number",name:"advance",grid:{xs:12,sm:12,md:6,lg:6}},{id:6,label:"Designation *",tabIndex:4,type:"text",name:"designation",grid:{xs:12,sm:12,md:6,lg:6}},{id:7,label:"Address",tabIndex:4,type:"text",name:"address",grid:{xs:12,sm:12,md:6,lg:6}},{id:8,label:"Status",type:"select",tabIndex:5,disable:!1,name:"status",size:"small",minWidth:"100wh",grid:{xs:12,sm:12,md:6,lg:6},options:[{id:1,name:"Active",value:"active"},{id:2,name:"Deactive",value:"deactive"}]},{id:9,label:null!==e&&0!==Object.keys(t).length?"Update Employee":"Add Employee",type:"button",tabIndex:6,btntype:"submit",color:"primary",variant:"contained",grid:{xs:12,sm:12,md:12,lg:12}}],s=e=>[{id:1,label:"Condition",type:"select",disable:"inBetween"===e.operator,name:"operator",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:["date"!==e.field&&{id:1,name:"Contains",value:"$regex"},"date"!==e.field&&{id:2,name:"Equals",value:"$eq"},"date"===e.field&&{id:7,name:"In Between",value:"inBetween"}]},{id:2,label:"Select Column",type:"select",name:"field",size:"small",minWidth:"100wh",grid:{xs:12,sm:6,md:4,lg:4},options:[{id:1,name:"Name",value:"name"},{id:2,name:"Email",value:"email"},{id:3,name:"Contact",value:"contact"},{id:4,name:"Designation",value:"designation"},{id:5,name:"Status",value:"status"}]},{id:3,label:"Sorting",type:"select",name:"sort",size:"small",options:[{id:1,name:"Ascending",value:1},{id:2,name:"Descending",value:-1}],grid:{xs:12,sm:6,md:4,lg:4}}],i=e=>["date"!==e.field&&"contact"!==e.field&&{id:1,label:"Enter ".concat(null===e||void 0===e?void 0:e.field.replace(/^_/,"").replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))),type:"text",disabled:""===e.field,name:"searchInput",grid:{xs:12,sm:10}},"date"===e.field&&"inBetween"===e.operator&&{id:2,label:"Start Date",type:"date",name:"startDate",grid:{xs:12,sm:"inBetween"===e.operator?5:10}},"date"===e.field&&"inBetween"===e.operator&&{id:3,label:"End Date",type:"date",name:"endDate",grid:{xs:12,sm:5}},"contact"===e.field&&{id:4,type:"phone",name:"searchInput",grid:{xs:12,sm:8,md:8,lg:10}},{id:5,label:"Search",type:"button",btntype:"submit",variant:"contained",color:"primary",grid:{xs:12,sm:2}}]},29209:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(697),s=a(72791),i=a(28924),l=a(66351),r=a(59434),o=a(70591),d=a(19570),c=a(98635),m=a(66807),p=a(5092),u=a(92167),g=a(97246),h=a(75985),y=a(26384),f=a(38820),x=a(52524),v=a(5397),b=a(13400),D=a(37725),w=a(80184);const E=(e,t,a)=>[{field:"name",headerName:"Name",width:230,renderCell:e=>(0,w.jsxs)("div",{className:"cellWithImg",children:[(0,w.jsx)("img",{src:e.row.pic?"".concat(D.y,"/public/employees/images/").concat(e.row.pic):"./img/avatarfile.png",alt:"",className:"cellImg"}),e.row.name]})},{field:"salary",headerName:"Salary",width:150,renderCell:e=>{var t;return(0,w.jsx)("div",{className:"cellWithStatus ".concat(e.row.salary),children:(null===(t=e.row.salary)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"remainingAdvance",headerName:"Remaining Advance",width:150,renderCell:e=>{var t;return(0,w.jsx)("div",{className:"cellWithStatus ".concat(e.row.advance),children:(null===(t=e.row.advance)||void 0===t?void 0:t.toLocaleString("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2,maximumFractionDigits:2}))||0})}},{field:"contact",headerName:"Contact",width:130},{field:"designation",headerName:"Designation",width:130},{field:"status",headerName:"Status",width:90,renderCell:e=>(0,w.jsx)("div",{style:{background:"Active"===e.row.status?"#02bf2e":"#777",color:"white",width:65,textAlign:"center",borderRadius:4},children:e.row.status})},{field:"action",headerName:"Action",width:160,renderCell:n=>(0,w.jsxs)("div",{className:"cellAction",children:[(0,w.jsx)(b.Z,{className:"viewButton",onClick:()=>{a(!0)},children:(0,w.jsx)(f.Z,{style:{fontSize:"20px"}})}),(0,w.jsx)(b.Z,{className:"viewButton",onClick:()=>t(!0),children:(0,w.jsx)(x.Z,{style:{fontSize:"20px"}})}),(0,w.jsx)(b.Z,{className:"viewButton",onClick:()=>e(!0),children:(0,w.jsx)(v.Z,{style:{fontSize:"20px"}})})]})}];var j=a(18481),S=a(95957);const A=()=>{const e=(0,r.I0)(),t=(0,r.v9)((e=>e.employees.data)),a=(0,r.v9)((e=>e.employees.current)),f=(0,r.v9)((e=>e.employees.totalRecord)),x=(0,r.v9)((e=>e.employees.errors)),[v,b]=(0,s.useState)(!1),[A,N]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[Z,P]=(0,s.useState)(null),[F,k]=(0,s.useState)(0),[O,z]=(0,s.useState)({field:"",operator:"",sort:-1}),[B,R]=(0,s.useState)({searchInput:""}),[M,L]=(0,s.useState)({name:"",email:"",contact:"",designation:"",address:"",salary:"",advance:"",status:"",pic:""}),[T,U]=(0,s.useState)(""),[W,H]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(void 0!==Z&&!0===v||void 0!==Z&&!0===A)&&e((0,j.Kc)(Z))}),[Z]),(0,s.useEffect)((()=>{if(0!==Object.keys(a).length){async function e(e){let t=await fetch(e),a=await t.blob();return new File([a],"test.jpg",{type:"image/jpeg"})}async function t(){const t=await e("".concat(D.y,"/public/employees/images/").concat(a.pic));U(t)}L({name:a.name,email:a.email,contact:a.contact,designation:a.designation,salary:a.salary,address:a.address,advance:a.advance,status:a.status}),a.pic&&t()}}),[a]),(0,s.useEffect)((()=>{const t={page:0,sort:O.sort};return e((0,j.fN)(t)),()=>{e((0,j.Kg)())}}),[]),(0,s.useEffect)((()=>{"date"===O.field?z({...O,operator:"inBetween"}):"inBetween"===O.operator&&z({...O,operator:"$regex"})}),[O.field]),(0,s.useEffect)((()=>{(null===x||void 0===x?void 0:x.length)>0&&x.forEach((e=>{(0,h.Am)(e.msg,{position:"top-right",type:"error"})}))}),[x]);const K=()=>{b(!1),P(null),L({name:"",email:"",contact:"",designation:"",address:"",advance:"",salary:"",status:"",pic:""}),U(""),e((0,j.hP)())};function V(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}const $=t.map((e=>({...e,name:e.name&&V(e.name),designation:e.designation&&V(e.designation),address:e.address&&V(e.address),status:e.status&&V(e.status)}))),{name:_,salary:q,status:G,designation:Y}=M;return(0,w.jsxs)(n.Z,{m:"0px 20px 15px 20px",children:[(0,w.jsx)(i.Z,{icon:(0,w.jsx)(p.Z,{style:{marginRight:"10px"}}),title:"Employees",subTitle:"Manage Application Employees",addBtnTitle:"Add Employee",dialog:v,setDialog:b}),(0,w.jsxs)(n.Z,{className:"mainCard",children:[(0,w.jsx)(c.Z,{openFormDialog:v,setOpenFormDialog:b,heading:null!==Z&&0!==Object.keys(a).length?"UPDATE EMPLOYEE":"ADD EMPLOYEE",color:"#999999",state:M,Id:Z,setState:L,file:T,setFile:U,handleOnClose:K,handleOnSubmit:async t=>{if(t.preventDefault(),""===_)(0,h.Am)("Enter employee name",{position:"top-right",type:"error"});else if(""===q)(0,h.Am)("Enter employee salary",{position:"top-right",type:"error"});else if(q<=0)(0,h.Am)("Enter a valid salary",{position:"top-right",type:"error"});else if(""===Y)(0,h.Am)("Enter employee designation",{position:"top-right",type:"error"});else if(""===G)(0,h.Am)("Please select status",{position:"top-right",type:"error"});else if(""!==T){function a(e){const t=new FormData;return t.append("file",e),t}const n=await(0,o.p)(a(T));if(!0===(null===n||void 0===n?void 0:n.success)){const s={...M};if(s.pic=n.filename,L(s),null!==Z){const i={id:Z[0],Data:s};e((0,j.HG)(i)),K()}else e((0,j.xk)(s)),K()}}else if(null!==Z){const l={id:Z[0],Data:M};e((0,j.HG)(l)),K()}else e((0,j.xk)(M)),K()},inputs:(0,S.c0)(Z,a),icon:(0,w.jsx)(u.Z,{style:{marginRight:"10px"}})}),(0,w.jsx)(y.Z,{openDetailsDialog:A,heading:"".concat(0!==Object.keys(a).length&&a.name,"'s Detail"),inputs:0!==Object.keys(a).length&&a,icon:(0,w.jsx)(p.Z,{style:{marginRight:"10px"}}),handleOnCloseDetails:()=>{N(!1),P(null),L({name:"",email:"",contact:"",designation:"",address:"",salary:"",advance:"",status:"",pic:""}),e((0,j.hP)())}}),(0,w.jsx)(d.Z,{openDeleteDialog:C,setOpenDeleteDialog:I,handleOnDelete:()=>{e((0,j.h1)(Z)),P(null)},heading:"DELETE Employee",color:"#ff0000",icon:(0,w.jsx)(m.Z,{style:{marginRight:"10px"}}),message:"Are sure you want to delete Employee?."}),(0,w.jsx)(g.Z,{submit:async t=>{t.preventDefault();const{startDate:a,endDate:n,searchInput:s}=B,{field:i,operator:l,sort:r}=O;let o={field:""===i?void 0:i,operator:l,sort:r,page:0,searchInput:s,startDate:""!==n&&""===a?n:a,endDate:""===n&&""!==a?a:n};"date"===i?""===a&&""===n?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):(e((0,j.fN)(o)),H(!W),k(0)):""===i?(e((0,j.fN)(o)),H(!W),k(0)):""!==i&&""===s?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):""!==i&&""!==s&&""===l?(0,h.Am)("Please select condition",{position:"top-right",type:"error"}):(e((0,j.fN)(o)),H(!W),k(0))},filters:O,setFilter:z,state:B,setState:R,openFiltersPanel:W,setOpenFiltersPanel:H,loadDataFunc:()=>{e((0,j.fN)({page:0,sort:-1}))},searchFiltersForm:S.Ty,searchInputForm:S.CE}),(0,w.jsx)(l.Z,{columns:E(I,N,b),rows:$,currentPage:F,totalRecords:f,selectedRowId:Z,setSelectedRowId:P,handleOnPageChange:t=>{k(t);const{startDate:a,endDate:n,searchInput:s}=B,{field:i,operator:l,sort:r}=O;let o={field:""===i?"":i,operator:l,sort:r,page:t,searchInput:s,startDate:""!==n&&""===a?n:a,endDate:n};"date"===i?""===a&&""===n?(0,h.Am)("Please Select Date",{position:"top-right",type:"error"}):e((0,j.fN)(o)):""===i?e((0,j.fN)(o)):""!==i&&""===s?(0,h.Am)("Please Enter to search..",{position:"top-right",type:"error"}):e((0,j.fN)(o))}})]})]})}},70591:(e,t,a)=>{a.d(t,{p:()=>l});var n=a(74569),s=a.n(n),i=a(37725);const l=async e=>{try{return await s().post("".concat(i.y,"/api/uploads"),e).then((e=>e.data))}catch(t){return t.response.data}}},5397:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(74223),s=a(80184);const i=(0,n.Z)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},38820:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(74223),s=a(80184);const i=(0,n.Z)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},52524:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(74223),s=a(80184);const i=(0,n.Z)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info")}}]);
//# sourceMappingURL=346.716c8a40.chunk.js.map